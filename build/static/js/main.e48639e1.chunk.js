(this["webpackJsonpsmart-manager"]=this["webpackJsonpsmart-manager"]||[]).push([[0],{12:function(e,t,n){e.exports={container:"welcome_container__Q_7tA","top-container":"welcome_top-container__Cx96Y","top-div-container":"welcome_top-div-container__Nez3F","header-nav":"welcome_header-nav__2lkBj",logo:"welcome_logo__2Xqb5","first-buttons":"welcome_first-buttons__3h1jo",pic1:"welcome_pic1__qGdZx",pic2:"welcome_pic2__1c6_d","lower-div-container":"welcome_lower-div-container__1nI_u","first-text":"welcome_first-text__2Z5OY","login-button":"welcome_login-button__1567E","sign-up-button":"welcome_sign-up-button__1wl2z",headers:"welcome_headers__3K-We",lucida:"welcome_lucida__ptbMc",paragraph:"welcome_paragraph__2tZDv","second-sign-up-button":"welcome_second-sign-up-button__2NbfZ","second-container":"welcome_second-container__DAZ3V","first-row":"welcome_first-row__2E0nZ","second-text":"welcome_second-text__2SCAX","third-sign-up-button":"welcome_third-sign-up-button__2LGI6","pic3-container":"welcome_pic3-container__3n972",picture:"welcome_picture__4oIrl","second-row":"welcome_second-row__3YjEF","second-row-colum":"welcome_second-row-colum__3KVao","second-row-pic":"welcome_second-row-pic__2gXJQ","pic4-container":"welcome_pic4-container__n3-74","third-row":"welcome_third-row__VB9B_","pic6-container":"welcome_pic6-container__3ke7Z","content-wrap":"welcome_content-wrap__YVnx1",footer:"welcome_footer__3gtAE","footer-column":"welcome_footer-column__3uKqO","footer-headers":"welcome_footer-headers__3gxEw","footer-info":"welcome_footer-info__1_oxo","last-column":"welcome_last-column__2w2xJ","social-media-container":"welcome_social-media-container__S34p3","social-media":"welcome_social-media__1w-xg",sd2006:"welcome_sd2006__1n8Ed"}},131:function(e,t,n){e.exports={containerMemb:"show-all-task-members_containerMemb__1lC9a",allCardMembers:"show-all-task-members_allCardMembers__XzbKC",eachMember:"show-all-task-members_eachMember__1zBth",avatar:"show-all-task-members_avatar__3H3YY"}},132:function(e,t,n){e.exports={attachment:"attachment_attachment__3h6P9","att-picture":"attachment_att-picture__EmFiD",format:"attachment_format__nn8jH",name:"attachment_name__1qqTB"}},134:function(e,t,n){e.exports={container:"toggle-switch_container__1SHrj","switch-container":"toggle-switch_switch-container__u2au8","container-active":"toggle-switch_container-active__1cMtP","state-circle":"toggle-switch_state-circle__1OnkA"}},14:function(e,t,n){e.exports={navigation:"header_navigation__fJ63T",small:"header_small__1teZG",container:"header_container__3KlHF",links:"header_links__2hRFR",margin:"header_margin__1o7ce",options:"header_options__3k5mV","first-option":"header_first-option__2kqDm","last-option":"header_last-option__3QlKJ",logout:"header_logout__Sqhs8",input:"header_input__1xJ3o",avatar:"header_avatar__2BJ1H",font:"header_font__SQRRp",select:"header_select__3fnVl",view:"header_view__3reCI","logout-position":"header_logout-position__3aXq5","view-position":"header_view-position__2YHhc",teams:"header_teams__28NdG","teams-position":"header_teams-position__3RFVg","team-options":"header_team-options__3EQGp",overflow:"header_overflow__3pY44",hover:"header_hover__1X08T",flex:"header_flex__26aaz","projects-position":"header_projects-position__KW8oY","profile-picture":"header_profile-picture__19YCA"}},15:function(e,t,n){e.exports={container:"profile_container__1p1bn","left-container":"profile_left-container__39W7O","pic-container":"profile_pic-container__3CjX9",pic1:"profile_pic1__3QhRY",teams:"profile_teams__3WNcc","navigate-buttons":"profile_navigate-buttons__3etSr","button-input-div":"profile_button-input-div__2qBDm","button-input-div-tasks":"profile_button-input-div-tasks__1-zEB","input-fields-tasks":"profile_input-fields-tasks__2YFdL","input-fields-profile":"profile_input-fields-profile__3uu_S","profile-pic":"profile_profile-pic__3FZTl","load-pic-text":"profile_load-pic-text__1-aLV",pen:"profile_pen__BlxgA","profile-pic-container":"profile_profile-pic-container__U7RG3","profile-picture":"profile_profile-picture__2qwPO","save-button":"profile_save-button__1a4Dc","button-div-save":"profile_button-div-save__1QmVw",alerts:"profile_alerts__17g07","new-pass-alert":"profile_new-pass-alert__3y3O0","select-team-container":"profile_select-team-container__dJYD1","teams-home":"profile_teams-home__2HaTN","navigate-buttons-teams":"profile_navigate-buttons-teams__2_h-4",edit:"profile_edit__1Xgrq",delete:"profile_delete__31xju",relative:"profile_relative__3StLS",menu:"profile_menu__3eNZ7"}},182:function(e,t,n){e.exports={submit:"button-hide-list_submit__3IMBu",name:"button-hide-list_name__yyff7",opacity:"button-hide-list_opacity__1yCdD"}},183:function(e,t,n){e.exports={app:"page-layout_app__v-_Gs",content:"page-layout_content__Cr_Mh",small:"page-layout_small__208gw"}},184:function(e,t,n){e.exports={container:"filter-wrapper_container__2MpXG","legend-wrapper":"filter-wrapper_legend-wrapper__11Nws",legend:"filter-wrapper_legend__3uKNM"}},185:function(e,t,n){e.exports={"filter-used":"filter-due-date_filter-used__1Wx2C","filter-blank":"filter-due-date_filter-blank__3Puwk","filter-clear":"filter-due-date_filter-clear__12ktu"}},19:function(e,t,n){e.exports={columns:"calendar-data_columns__1QWXz",task:"calendar-data_task__ZE6uj",buttoDiv:"calendar-data_buttoDiv__2J87B",listName:"calendar-data_listName__3lv8E",container:"calendar-data_container__AkkwG",nameContainer:"calendar-data_nameContainer__rkbae",input:"calendar-data_input__1VVv0",inputList:"calendar-data_inputList__18Si4",addlist:"calendar-data_addlist__3ybnS",dueDateField:"calendar-data_dueDateField__3nuYW",dueDateFieldInput:"calendar-data_dueDateFieldInput__1csSW",inputElementName:"calendar-data_inputElementName__1CaRY",clean:"calendar-data_clean__ldBxu",taskProgress:"calendar-data_taskProgress__1KRv2",taskProgressButton:"calendar-data_taskProgressButton__3GJU6",taskProgressButtonInput:"calendar-data_taskProgressButtonInput__3n9Rl",tableText:"calendar-data_tableText__2Rt8E",select:"calendar-data_select__21nQR",pen:"calendar-data_pen__1ZWSl",membersDiv:"calendar-data_membersDiv__3h7P0",membersContainer:"calendar-data_membersContainer__3yEFo",daylyProgress:"calendar-data_daylyProgress__2hXc9",header:"calendar-data_header__3vmIu",cursorPointer:"calendar-data_cursorPointer__i8FeY",filter:"calendar-data_filter__vHt4c",filters:"calendar-data_filters__2NQez","filters-container":"calendar-data_filters-container__1o1Rp","filters-clicked":"calendar-data_filters-clicked__35F0-",list:"calendar-data_list__3hiib","attachments-container":"calendar-data_attachments-container__2rC_j"}},20:function(e,t,n){e.exports={"small-buttons":"edit-card-options_small-buttons__3l5_v",pics:"edit-card-options_pics__1Rgep",date:"edit-card-options_date__6HShF",select:"edit-card-options_select__f8FQ6",members:"edit-card-options_members__3YsY4",history:"edit-card-options_history__2cvkB","progress-input":"edit-card-options_progress-input__AQHwY","progress-input-container":"edit-card-options_progress-input-container__2yjqC","progress-bar":"edit-card-options_progress-bar__1Zy68","bad-input":"edit-card-options_bad-input__1z2vs",progress:"edit-card-options_progress__35yqq","att-container":"edit-card-options_att-container__3s32p",attachment:"edit-card-options_attachment__23zEM","att-picture":"edit-card-options_att-picture__1vBGz",format:"edit-card-options_format__3YF--",remaining:"edit-card-options_remaining__1fXLS"}},21:function(e,t,n){e.exports={container:"edit-team_container__3iIvO",title:"edit-team_title__t532U","input-container":"edit-team_input-container__3mGvs","input-container-invite":"edit-team_input-container-invite__1-eJB","input-name":"edit-team_input-name__NRn4U","text-invite":"edit-team_text-invite__GSDwM","input-invite":"edit-team_input-invite__3SGX9","input-container-descr":"edit-team_input-container-descr__3puM-","text-area-descr":"edit-team_text-area-descr__2Z5gO","button-div":"edit-team_button-div__2IJzX","create-button":"edit-team_create-button__1nkRd","members-avatars":"edit-team_members-avatars__3Ugjl","members-div":"edit-team_members-div__1VgUe","invite-input":"edit-team_invite-input__10J8k","select-for-invite":"edit-team_select-for-invite__1bgKl",members:"edit-team_members__3Uqvp",user:"edit-team_user__3k1aK",email:"edit-team_email__1dRrH","leave-team-btn-div":"edit-team_leave-team-btn-div__1v5qx","leave-team-btn":"edit-team_leave-team-btn__34yGk"}},23:function(e,t,n){e.exports={container:"signup-form_container__pL3cY",alerts:"signup-form_alerts__1NIfM","inner-container":"signup-form_inner-container__hoTOj",logo:"signup-form_logo__EYNAN","right-side":"signup-form_right-side__3LkAs",title:"signup-form_title__QLVot","input-container":"signup-form_input-container__1qrTE","sign-up-input":"signup-form_sign-up-input__1oZmY","pass-instructions":"signup-form_pass-instructions__17Qkc","sign-up-button":"signup-form_sign-up-button__1XVSK","button-div-login":"signup-form_button-div-login__2fD7k","text-div":"signup-form_text-div__1wJxN","already-sign-up":"signup-form_already-sign-up__A2wg4","sign-up-btn":"signup-form_sign-up-btn__56zNu","button-div-google-login":"signup-form_button-div-google-login__2CAU5","google-login-btn":"signup-form_google-login-btn__2VdiI"}},245:function(e,t,n){e.exports={aside:"list-color_aside__27qHb",list:"list-color_list__3JEd4"}},246:function(e,t,n){e.exports={"members-avatars":"team-members_members-avatars__390KK"}},249:function(e,t,n){e.exports={bar:"progress-bar_bar__4DnDk",progress:"progress-bar_progress__1WhBT"}},251:function(e,t,n){e.exports={button:"attachmentsLink_button__13r6n",attachments:"attachmentsLink_attachments__JXZ-P"}},253:function(e,t,n){e.exports={projectInfoContainer:"project-list_projectInfoContainer__3mRLd","calendar-container":"project-list_calendar-container__3Tbzi",table:"project-list_table__ibsXA",column:"project-list_column__3rGR1",columnChild:"project-list_columnChild__1AVvT",daylyElement:"project-list_daylyElement__2Qz1Z"}},26:function(e,t,n){e.exports={title:"my-tasks_title__glghp",teams:"my-tasks_teams__1ifMW",selected:"my-tasks_selected__2hBIa",pic:"my-tasks_pic__37y99",box:"my-tasks_box__19wXx",project:"my-tasks_project__1KJap","project-name":"my-tasks_project-name__2-cBX",link:"my-tasks_link__3JjLA",bold:"my-tasks_bold__3TzlB",header:"my-tasks_header__3-wOE",raw:"my-tasks_raw__31kUo",container:"my-tasks_container__yU16j","task-container":"my-tasks_task-container__svxEy",list:"my-tasks_list__33WIh",task:"my-tasks_task__tAkep",progress:"my-tasks_progress__1ufVZ",days:"my-tasks_days__2EVrp"}},30:function(e,t,n){e.exports={container:"create-team_container__2x5c_",form:"create-team_form__31NMs",title:"create-team_title___mRVu","input-container":"create-team_input-container__120Le","input-name":"create-team_input-name__wbZRq","input-container-descr":"create-team_input-container-descr__1ODZz","input-container-members":"create-team_input-container-members__1ufrx","description-text":"create-team_description-text__1uRG8","text-area-descr":"create-team_text-area-descr__2vq-U","members-text":"create-team_members-text__2zmpj","input-members":"create-team_input-members__bd9o9","button-div":"create-team_button-div__w-R_d","create-button":"create-team_create-button__1FHVI","members-avatars":"create-team_members-avatars__dYqfC","invite-input":"create-team_invite-input__2-X5E","select-for-invite":"create-team_select-for-invite__3qZYT","members-pop-up":"create-team_members-pop-up__1kwPP",members:"create-team_members__32-cU",user:"create-team_user__2icTP",email:"create-team_email__lytiR"}},31:function(e,t,n){e.exports={container:"form-forgot-password_container__26C4L",alerts:"form-forgot-password_alerts__1fS5n","inner-container":"form-forgot-password_inner-container__3W8lt",logo:"form-forgot-password_logo__3Hu63","right-side":"form-forgot-password_right-side__21XKQ",title:"form-forgot-password_title__1KDRx","input-container":"form-forgot-password_input-container__IW3bb",emailInput:"form-forgot-password_emailInput__VJY2X",passInput:"form-forgot-password_passInput__3nmAn",loginButton:"form-forgot-password_loginButton__hdTg5",buttonDivLogin:"form-forgot-password_buttonDivLogin__2xfcE",textDiv:"form-forgot-password_textDiv__1uU55",buttonDivGoogleLogin:"form-forgot-password_buttonDivGoogleLogin__2UhZA",forgotPass:"form-forgot-password_forgotPass__3QNjx",newToSmM:"form-forgot-password_newToSmM__3i_oO",signUpBtn:"form-forgot-password_signUpBtn__Zc2y6",googleLoginBtn:"form-forgot-password_googleLoginBtn__1cA2c"}},33:function(e,t,n){e.exports={container:"login-form_container__DtpdL",alerts:"login-form_alerts__3wIFj","inner-container":"login-form_inner-container__7oZRt",logo:"login-form_logo__2lNG1","right-side":"login-form_right-side__1qmB_",title:"login-form_title__I-Bu-","input-container":"login-form_input-container__2Gp5r","email-input":"login-form_email-input__2gYaE","pass-input":"login-form_pass-input__35CUg","login-button":"login-form_login-button__1uy1x","button-div-login":"login-form_button-div-login__ErLQu","text-div":"login-form_text-div__18MK_","button-div-google-login":"login-form_button-div-google-login__259W1","forgot-pass":"login-form_forgot-pass__2H5x8","new-to-sm":"login-form_new-to-sm__2fzoU","sign-up-btn":"login-form_sign-up-btn__gw4UI","google-login-btn":"login-form_google-login-btn__3sp6Q"}},34:function(e,t,n){e.exports={container:"add-project-member_container__22-qP",form:"add-project-member_form__3qaBa","current-members":"add-project-member_current-members__3RNVi","admins-container":"add-project-member_admins-container__3JjPC",admins:"add-project-member_admins__3tdXj","big-container":"add-project-member_big-container__1j1-9","members-container":"add-project-member_members-container__M6Z1p",title:"add-project-member_title__3EGhe",members:"add-project-member_members__8u9vO","member-select":"add-project-member_member-select__2SrhS","add-button":"add-project-member_add-button__2OOOi",draggable:"add-project-member_draggable__3PkUN",droppable:"add-project-member_droppable__XWc43","droppable-members":"add-project-member_droppable-members__1iHfX"}},346:function(e,t,n){e.exports={clean:"button-clean_clean__2SpL2"}},348:function(e,t,n){e.exports={"profile-picture":"avatar-user_profile-picture__EodOI"}},35:function(e,t,n){e.exports={container:"create-project_container__3mplR",title:"create-project_title__2N9HY","input-container":"create-project_input-container__28w3g","input-name":"create-project_input-name__eAV6y","invite-input":"create-project_invite-input__3RmZ5","select-for-invite":"create-project_select-for-invite__dgcCU","members-input":"create-project_members-input__viVpd","input-container-descr":"create-project_input-container-descr__2GHEX","text-area-descr":"create-project_text-area-descr__1TOMF","text-invite":"create-project_text-invite__3CPaO","button-div":"create-project_button-div__L527l","create-button":"create-project_create-button__1TcHh","members-avatars":"create-project_members-avatars__1q9MH",members:"create-project_members__2Uleh",user:"create-project_user__6JmZH",email:"create-project_email__1NcNi"}},351:function(e,t,n){e.exports={button:"button-grey_button__2u67_"}},352:function(e,t,n){e.exports={link:"link_link__3NAE5"}},353:function(e,t,n){e.exports={transparent:"transparent_transparent__30Vus"}},354:function(e,t,n){e.exports={"search-container":"search-results_search-container__1aurP"}},355:function(e,t,n){e.exports={title:"title_title__3Ce-3"}},356:function(e,t,n){e.exports={alert:"alert_alert__3deuX"}},357:function(e,t,n){e.exports={button:"button_button__3LYM9"}},358:function(e,t,n){e.exports={title:"inbox_title__3OZg9"}},36:function(e,t,n){e.exports={container:"confirmation_container__1bAwH",logo:"confirmation_logo__r2fwd",title:"confirmation_title__25J6O",text:"confirmation_text__CrbGr",cheers:"confirmation_cheers__2efBO",team:"confirmation_team__DFO2_","proceed-button":"confirmation_proceed-button__1MxlW"}},37:function(e,t,n){e.exports={container:"edit-card_container__2tYtI","task-name":"edit-card_task-name__26wIw","name-input":"edit-card_name-input___gxuh","task-body":"edit-card_task-body__gBHAf",text:"edit-card_text__3mvzJ","left-side":"edit-card_left-side__CTqky","right-side":"edit-card_right-side__1jdEh","task-component":"edit-card_task-component__3DsaE","description-input":"edit-card_description-input__3IEGO","small-buttons":"edit-card_small-buttons__1ZE0w",pics:"edit-card_pics__dtnBg"}},39:function(e,t,n){e.exports={container:"form-add-password_container__2yhI6",alerts:"form-add-password_alerts__2d9EU",innerContainer:"form-add-password_innerContainer__2zNNl",logo:"form-add-password_logo__1HgWR",rightSide:"form-add-password_rightSide__1LBUg",title:"form-add-password_title__1kxgS",inputContainer:"form-add-password_inputContainer__zhZU1",passInstructions:"form-add-password_passInstructions__25RWw",passInput:"form-add-password_passInput__1gXnd",loginButton:"form-add-password_loginButton__3pupI",buttonDivLogin:"form-add-password_buttonDivLogin__3aXeP",textLogin:"form-add-password_textLogin__2noU-",textDiv:"form-add-password_textDiv__3Bs4x",forgotPass:"form-add-password_forgotPass__1Uo4N",newToSmM:"form-add-password_newToSmM__3qN7U",signUpBtn:"form-add-password_signUpBtn__2VXx2",newPassAlert:"form-add-password_newPassAlert__1iW4i"}},396:function(e,t,n){},40:function(e,t,n){e.exports={list:"list_list__23Rsq",row:"list_row__1A6HD",button:"list_button__2gQ2b",dots:"list_dots__wwSr4",menu:"list_menu__1hArt",edit:"list_edit__KXS03",delete:"list_delete__1qqcq",relative:"list_relative__2X72U","add-task":"list_add-task__12pcF",draggable:"list_draggable__2_1rW",droppable:"list_droppable__cPWKr",flexend:"list_flexend__3_V7F",name:"list_name__33z_E",container:"list_container__HKNpO",input:"list_input__3Rjro","task-input":"list_task-input__3Qgts"}},45:function(e,t,n){e.exports={container:"home_container__fjBCo","pic-container":"home_pic-container__19tLe",pic1:"home_pic1__2nxZp","welcome-user":"home_welcome-user__3-oPo","left-buttons":"home_left-buttons__1hKu4","right-buttons":"home_right-buttons__3sde6","my-teams-container":"home_my-teams-container__2mSLR","teams-home":"home_teams-home__3j3qr","select-team-container":"home_select-team-container__SZWtV","navigate-buttons":"home_navigate-buttons__2Lqc4","navigate-buttons-teams":"home_navigate-buttons-teams__2zoCx"}},46:function(e,t,n){e.exports={container:"edit-list_container__1PV_g",form:"edit-list_form__1Ipgs",title:"edit-list_title__1OmTv","input-container":"edit-list_input-container__1Xk2M",name:"edit-list_name__13OFB",inputListName:"edit-list_inputListName__1l3BY","change-color":"edit-list_change-color__3HL93","color-title":"edit-list_color-title__JW9SN","list-color":"edit-list_list-color__RxwCd","color-pick":"edit-list_color-pick__3MYZG","color-button":"edit-list_color-button__1duo6","edit-list-button":"edit-list_edit-list-button__3kaw7","name-input":"edit-list_name-input__3x8HX",text:"edit-list_text__281s1"}},51:function(e,t,n){e.exports={aside:"aside_aside__3wMyb",container:"aside_container__Qu0TM",button:"aside_button__1Dg_A",logo:"aside_logo__1AAc9","top-left":"aside_top-left__-_vaI",menu:"aside_menu__b_F-d","top-right":"aside_top-right__191c3",link:"aside_link__2o8o9","bottom-right":"aside_bottom-right__1FKYl",bell:"aside_bell__25Vva"}},52:function(e,t,n){e.exports={card:"my-tasks-task_card__3BAWy",task:"my-tasks-task_task__1lp6I",progress:"my-tasks-task_progress__2gxJ6",days:"my-tasks-task_days__fOUDh",deadline:"my-tasks-task_deadline__2lfRD","buttons-container":"my-tasks-task_buttons-container__3FXO0",button:"my-tasks-task_button__QPAX8",input:"my-tasks-task_input__2s3ei","bad-input":"my-tasks-task_bad-input__3kwUX","no-border":"my-tasks-task_no-border__1QKqD",edit:"my-tasks-task_edit__1xVtt"}},55:function(e,t,n){e.exports={form:"edit-project_form__u2u3o",title:"edit-project_title__1LrjA","buttons-div":"edit-project_buttons-div__EE1f6","navigate-buttons":"edit-project_navigate-buttons__2Zfm7","input-container":"edit-project_input-container__3FESj","input-pr-name":"edit-project_input-pr-name__1gf5E","input-container-descr":"edit-project_input-container-descr__1CK_p","text-area-descr":"edit-project_text-area-descr__1EcWM","edit-members":"edit-project_edit-members__3T8W2"}},59:function(e,t,n){e.exports={container:"table-date-navigation_container__1uoG4",navigateButtons:"table-date-navigation_navigateButtons__32aiq",picContainer:"table-date-navigation_picContainer__3ZRkt",centeredText:"table-date-navigation_centeredText__t9WtX"}},655:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),s=n(75),i=n.n(s),o=n(16),l=n(3),u=n(82),d=n.n(u),j=n(27),b=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null};var m=function(e){return{username:e.user.username,id:e.user._id,teams:e.teams,inbox:e.user.inbox,confirmed:e.user.confirmed,newPasswordConfirmed:e.user.newPasswordConfirmed,recentProjects:e.user.recentProjects,image:e.user.image}},p=c.a.createContext({user:null,logIn:function(){},logOut:function(){}}),h=function(e){var t=Object(r.useState)(null),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(!0),u=Object(l.a)(i,2),h=u[0],f=u[1],O=Object(j.g)(),x=function(e){s(Object(o.a)(Object(o.a)({},e),{},{loggedIn:!0}))},_=Object(r.useCallback)((function(){var e=b("x-auth-token");fetch("/api/user/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){e.ok?(document.cookie="x-auth-token= ; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/;",s({loggedIn:!1})):O.push("/error")}))}),[O]),v=Object(r.useCallback)((function(){var e=b("x-auth-token");if(!e)return s({loggedIn:!1}),void f(!1);fetch("/api/user/verify",{method:"GET",headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){return e.json()})).then((function(e){e.status?x(m(e)):_(),f(!1)}))}),[_]);return Object(r.useEffect)((function(){v()}),[v]),h?Object(a.jsx)(d.a,{type:"TailSpin",color:"#363338",height:100,width:100,timeout:3e3}):Object(a.jsx)(p.Provider,{value:{user:c,setUser:s,logIn:x,logOut:_},children:e.children})},f=function(e){return Object(a.jsx)(h,{children:e.children})},O=(n(396),n(13)),x=n(17),_=n(4),v=n.n(_),g=n(7),N=n(30),k=n.n(N),w=c.a.createContext({teams:[],setTeams:function(){},selectedTeam:"Select",setSelectedTeam:function(){},getCurrentTeam:function(){},currentTeam:"",setCurrentTeam:function(){},getTeams:function(){}}),y=n(346),C=n.n(y),S=function(e){var t=e.title,n=e.onClick,r=e.type,c=e.className,s=e.children,i=e.style;return Object(a.jsxs)("button",{type:r||"button",onClick:n,className:"".concat(C.a.clean," ").concat(c),style:i,children:[t,s]})},T=n(347),I=n.n(T),D=c.a.createContext();function P(){return Object(r.useContext)(D)}function E(e){var t=e.user,n=e.children,c=Object(r.useState)(),s=Object(l.a)(c,2),i=s[0],o=s[1],u=window.location.href.includes("heroku")?"/":"http://localhost:4000";return Object(r.useEffect)((function(){if(t&&t.teams){var e=t.username,n=t.id,a=Object(x.a)(t.teams).map((function(e){return e._id})),r=JSON.stringify(a),c=I()(u,{query:{teamsStr:r,username:e,userId:n},transports:["websocket"]});return o(c),function(){return c.close()}}}),[t,u]),Object(a.jsx)(D.Provider,{value:i,children:n})}var A=n(348),F=n.n(A),L=n(234),z=n.n(L),M=n(235),R=n.n(M),U=n(178);function H(e){var t=e.user,n=e.onClick,r=e.className,c=e.key,s=e.size;return t.image?Object(a.jsx)(z.a,{publicId:t.image.publicId,onClick:n,className:"".concat(F.a["profile-picture"]," ").concat(r),children:Object(a.jsx)(R.a,{width:s,height:s,gravity:"faces",crop:"fill"})},c):Object(a.jsx)(U.a,{className:r,onClick:n,name:t.username,size:s,round:!0,maxInitials:2},c)}var B=n(351),J=n.n(B),W=function(e){var t=e.title,n=e.onClick,r=e.className;return Object(a.jsx)("button",{onClick:n,className:"".concat(J.a.button," ").concat(r),children:t})};function Y(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],m=Object(r.useState)(""),h=Object(l.a)(m,2),f=h[0],O=h[1],_=Object(r.useState)([]),N=Object(l.a)(_,2),y=N[0],C=N[1],T=Object(r.useState)(!1),I=Object(l.a)(T,2),D=I[0],E=I[1],A=Object(r.useState)([]),F=Object(l.a)(A,2),L=F[0],z=F[1],M=Object(j.g)(),R=Object(r.useContext)(w),U=Object(r.useContext)(p),B=P(),J=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(t.target.value),E(!1),0!==L.length){e.next=12;break}return n=b("x-auth-token"),e.next=6,fetch("/api/user/get-all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:n}});case 6:return(a=e.sent).ok||M.push("/error"),e.next=10,a.json();case 10:r=e.sent,z(r);case 12:f.length>=2&&E(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var t=Object(g.a)(v.a.mark((function t(n){var a,r,s,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==c){t.next=3;break}return t.abrupt("return");case 3:return a=b("x-auth-token"),t.next=6,fetch("/api/teams",{method:"POST",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({name:c,description:u,requests:y})});case 6:if((r=t.sent).ok){t.next=12;break}return M.push("/error"),t.abrupt("return");case 12:return t.next=14,r.json();case 14:s=t.sent,(i=Object(x.a)(R.teams)).push(s),R.setTeams(i),R.setSelectedTeam(s.name),e.hideForm(),B.emit("team-update",s._id),B.emit("multiple-messages-sent",y),M.push("/team/".concat(s._id));case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:k.a.container,children:[Object(a.jsx)("div",{className:k.a.title,children:"Create New Team"}),Object(a.jsxs)("div",{className:k.a["input-container"],children:[Object(a.jsx)("span",{children:" Name"}),Object(a.jsx)("input",{className:k.a["input-name"],value:c,onChange:function(e){return s(e.target.value)},label:"Name",id:"name",placeholder:"Team Name"})]}),Object(a.jsxs)("div",{className:k.a["input-container-descr"],children:[Object(a.jsx)("span",{className:k.a["description-text"],children:" Description"}),Object(a.jsx)("textarea",{className:k.a["text-area-descr"],value:u,onChange:function(e){return d(e.target.value)},label:"Description",id:"description",placeholder:"Team Description"})]}),Object(a.jsxs)("div",{className:k.a["input-container-members"],children:[Object(a.jsx)("span",{className:k.a["members-text"],children:" Invite Members"}),Object(a.jsxs)("div",{className:k.a["invite-input"],children:[Object(a.jsx)("input",{className:k.a["input-members"],autoComplete:"off",value:f,onChange:J,label:"Invite members",id:"members",placeholder:"username",onBlur:function(){setTimeout((function(){return E(!1)}),120)}}),Object(a.jsx)("div",{className:k.a["select-for-invite"],children:D&&Object(a.jsx)("div",{className:k.a["members-pop-up"],children:Object(a.jsx)("div",{className:k.a.members,children:L.filter((function(e){return e.username.toLowerCase().includes(f.toLowerCase())&&!e.username.includes(U.user.username)})).filter((function(e){return!y.find((function(t){return t.username===e.username}))})).sort((function(e,t){return e.username.localeCompare(t.username)})).map((function(e){return Object(a.jsx)(S,{className:k.a.user,onClick:function(){return function(e){var t=Object(x.a)(y);t.push(e),C(t),E(!1),O("")}(e)},title:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:e.username}),Object(a.jsx)("div",{className:k.a.email,children:e.email})]})},e._id)}))})})})]})]}),Object(a.jsx)("div",{className:k.a["members-avatars"],children:y.map((function(e){return Object(a.jsx)(S,{onClick:function(){return function(e){var t=y.filter((function(t){return t._id!==e._id}));C(t)}(e)},title:Object(a.jsx)(H,{user:e,size:40})})}))}),Object(a.jsx)("div",{className:k.a["button-div"],children:Object(a.jsx)(W,{onClick:function(e){return Y(e)},title:"Create",className:k.a["create-button"]})})]})}var G=n(352),q=n.n(G),V=function(e){var t=e.title,n=e.href,r=e.className,c=e.onClick;return Object(a.jsx)(O.b,{to:n,className:"".concat(q.a.link," ").concat(r),onClick:c,children:t})},X=n(51),Z=n.n(X),K=n.p+"static/media/logo.2beba198.svg",Q=n.p+"static/media/menu.f66dcc80.svg",$=n.p+"static/media/home.05f82417.svg",ee=n.p+"static/media/tasks.d514e762.svg",te=n.p+"static/media/inbox.6389f480.svg",ne=n.p+"static/media/inbox-bell.959a963c.svg",ae=c.a.createContext({lists:[],setLists:function(){},hiddenLists:[],setHiddenLists:function(){},project:{},setProject:function(){}}),re=n(245),ce=n.n(re);function se(e){var t=e.color,n=e.type;return Object(a.jsx)("svg",{className:"".concat(ce.a[n]),xmlns:"http://www.w3.org/2000/svg",width:"110",height:"26.931",viewBox:"0 0 110 26.931",children:Object(a.jsx)("g",{id:"Layer_2","data-name":"Layer 2",transform:"translate(0.002 0.014)",children:Object(a.jsx)("g",{id:"Layer_1","data-name":"Layer 1",transform:"translate(-0.002 -0.014)",children:Object(a.jsx)("path",{className:ce.a.path,id:"Path_60","data-name":"Path 60",d:"M4.208,22.578l-.277-.26c-.594-.366-.814-1.074-1.351-1.49-1-.749-1.14-2.214-2.352-2.784a1.237,1.237,0,0,1-.187-.391,1.628,1.628,0,0,1,.554-1.628,5.636,5.636,0,0,1,3.1-.456,6.862,6.862,0,0,0,1.083,0,.733.733,0,0,0,.765-.765c.049-.48-.057-.814-.586-.871a1.628,1.628,0,0,1-.513-.163c-.92-.456-.961-1.083-.106-1.7a3.256,3.256,0,0,0,.545-.448,1.27,1.27,0,0,1,.659-.383c.667-.244,1.538.3,2.027-.545a.651.651,0,0,0-.244-.374,6.894,6.894,0,0,1-.659-.554,1.278,1.278,0,0,1-.415-.814A1.9,1.9,0,0,0,5.022,6.933C4.2,6.509,3.6,5.891,4.411,4.881c2.263-1.628,4.933-1.937,7.57-2.328,1.27-.309,2.589-.187,3.858-.48a4.811,4.811,0,0,1,1.449-.09c.643.073,1.254.317,1.921-.147a2.011,2.011,0,0,1,1.718-.106,2.808,2.808,0,0,0,2.32-.2,3.394,3.394,0,0,1,2.2.122c1.628-.6,3.313-.391,4.957-.667.765-.147,1.563-.114,2.328-.3a8.873,8.873,0,0,1,3.557.13.252.252,0,0,0,.269,0A2.914,2.914,0,0,1,39.885.73h.277A2.182,2.182,0,0,1,42.075.307a22.922,22.922,0,0,0,3.883.057A34.326,34.326,0,0,0,56.165.2,1.75,1.75,0,0,1,57.85.51h.277C59.136-.3,60.276.054,61.383.128a28.856,28.856,0,0,0,4.436.26,8.669,8.669,0,0,1,2.751,0c1.188.317,2.442,0,3.606.244A22.083,22.083,0,0,0,75.7.917l.464.041a16.752,16.752,0,0,0,3.191.228h.464c1.083.057,2.157.285,3.256.269,1.351,0,2.678.3,4.021.309.814.171,1.685.2,2.523.334.545.269,1.254.065,1.709.578a4.746,4.746,0,0,0,1.9.309,26.545,26.545,0,0,1,4.548.392c1.166.211,2.347.235,3.527.333,1.091.3,2.271,0,3.329.5,1.408,0,2.825,0,4.241.081.3,0,.716.1.676.513s-.374.586-.814.383c-1.034-.09-2.059-.155-2.523,1.083-.317.814-.961.562-1.555.488-.537.228-1.14.147-1.677.358a5.576,5.576,0,0,1-.814.106,20.26,20.26,0,0,0-4.591.765c.814.676,1.245,1.555,2.255,1.758a1.934,1.934,0,0,1,1.424.334c-.057,1.026-.936.586-1.449.814a.578.578,0,0,1-.383-.065.057.057,0,0,0,0,.057h3.972a1.042,1.042,0,0,1,.92.448c-.244.814-1.058.521-1.587.814-.407.212-1.156.187-.545.961a4.613,4.613,0,0,0,.391.407,11.928,11.928,0,0,0,3,.155,5.421,5.421,0,0,1,.961,0c.814.147,1.058.44.407,1.156-1.074,1.188-2.442,2.165-3.012,3.769,1.742,0,3.565.041,5.389,0,.863.4.879.92.236,1.547a1.148,1.148,0,0,0-.3.814c.114.35.073.733.212,1.074.562,1.384.5,1.547-.863,2.068a13.569,13.569,0,0,1-2.637.814c-1.571.049-3.118.521-4.7.309-1.628-.554-3.329.212-4.99-.081a9.589,9.589,0,0,0-4.884.147,2.816,2.816,0,0,1-2.076.488H79.771a5.739,5.739,0,0,0-1.9.179,10.631,10.631,0,0,1-1.831.1c-4.485,0-8.954.081-13.455,0a4.933,4.933,0,0,0-1.758.187,9.247,9.247,0,0,1-2.507.106h-.529a28.6,28.6,0,0,1-3.126,0h-.48a6.137,6.137,0,0,1-1.726-.1,11.209,11.209,0,0,0-3.533-.2c-2.222.065-4.461-.106-6.675.163a6.658,6.658,0,0,1-1.929.081,4.168,4.168,0,0,1-.456,0c-1.286,0-2.572.106-3.858.049a12.474,12.474,0,0,0-3.394,0c-1.319.2-2.67-.138-3.98.187a16.768,16.768,0,0,1-2.556.236c-1.368-.366-2.711.342-4.07.106a2.133,2.133,0,0,1-.456-.073,9.475,9.475,0,0,0-2.711-.179c-1.213-.09-2.442-.236-3.63-.342a9.377,9.377,0,0,0-1.058-.228,17.6,17.6,0,0,0-2.068-.114c-1.335-.472-2.768-.22-4.119-.521a.969.969,0,0,1-.684-.814l-.594-.537c-.244-.236-.627-.26-.814-.529l-.529-.342A1.913,1.913,0,0,1,4.208,22.578Z",transform:"translate(0.002 0.014)",fill:t})})})})}var ie=n(182),oe=n.n(ie),le=function(e){var t=e.list,n=e.type,c=Object(r.useContext)(ae);return Object(a.jsxs)("button",{onClick:function(){var e=Object(x.a)(c.hiddenLists);if(e.includes(t._id)){var n=e.indexOf(t._id);e.splice(n,1)}else e.push(t._id);c.setHiddenLists(e)},className:"".concat(oe.a.submit," ").concat(c.hiddenLists.includes(t._id)&&oe.a.opacity),children:[Object(a.jsx)(se,{color:t.color||"#A6A48E",type:n}),Object(a.jsx)("div",{className:oe.a.name,children:t.name})]})};function ue(e){var t=e.asideOn,n=e.setAsideOn,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(r.useContext)(ae),d=Object(r.useContext)(p),j=P(),b=d.logIn;Object(r.useEffect)((function(){window.location.href.includes("project")&&o(!0)}),[]);var h=Object(r.useCallback)(function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=m(t),b(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b]);return Object(r.useEffect)((function(){if(j)return j.on("message-sent",h),function(){return j.off("message-sent")}}),[j,h]),Object(a.jsxs)("div",{className:Z.a.aside,children:[Object(a.jsxs)("aside",{className:Z.a.container,children:[Object(a.jsx)("div",{className:Z.a["top-left"],children:Object(a.jsx)(S,{onClick:function(){return n(!t)},title:Object(a.jsx)("img",{className:Z.a.options,src:Q,alt:"menu",width:"32",height:"24"})})}),Object(a.jsx)(V,{href:"/",title:Object(a.jsx)("img",{src:$,alt:"home",width:"34",height:"32"})}),Object(a.jsx)(V,{href:"/my-tasks/".concat(d.user.id),title:Object(a.jsx)("img",{src:ee,alt:"my-tasks",width:"30",height:"25"})}),Object(a.jsx)(V,{href:"/inbox/".concat(d.user.id),title:Object(a.jsx)("img",{src:te,alt:"inbox",width:"33",height:"34"})}),0!==d.user.inbox.length&&Object(a.jsx)(V,{href:"/inbox/".concat(d.user.id),title:Object(a.jsx)("img",{src:ne,alt:"inbox",width:"33",height:"34"}),className:Z.a.bell})]}),t&&Object(a.jsxs)("div",{className:Z.a.menu,children:[Object(a.jsxs)("div",{className:Z.a["top-right"],children:[Object(a.jsx)("div",{className:Z.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"87",height:"65"})}),Object(a.jsx)(V,{href:"/",title:"Home",className:Z.a.link}),Object(a.jsx)(V,{href:"/my-tasks/".concat(d.user.id),title:"My Tasks",className:Z.a.link}),Object(a.jsx)(V,{href:"/inbox/".concat(d.user.id),title:"Inbox",className:Z.a.link})]}),i&&Object(a.jsx)("div",{className:Z.a["bottom-right"],children:u.lists.map((function(e){return Object(a.jsx)(le,{list:e,type:"aside"},e._id)}))})]})]})}var de=n(14),je=n.n(de),be=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||c(!a)};return a&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[a,e]),[a,c]},me=n(353),pe=n.n(me),he=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{onClick:e.hideForm,className:pe.a.transparent}),e.children]})},fe=n(35),Oe=n.n(fe);n(123);function xe(e){var t=e.hideForm,n=Object(r.useState)(""),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(""),u=Object(l.a)(o,2),d=u[0],m=u[1],h=Object(r.useState)(""),f=Object(l.a)(h,2),O=f[0],_=f[1],N=Object(r.useState)([]),k=Object(l.a)(N,2),w=k[0],y=k[1],C=Object(r.useState)(!1),T=Object(l.a)(C,2),I=T[0],D=T[1],E=Object(r.useState)([]),A=Object(l.a)(E,2),F=A[0],L=A[1],z=Object(r.useContext)(p),M=Object(j.g)(),R=Object(j.h)(),U=P(),B=function(){var e=Object(g.a)(v.a.mark((function e(n){var a,r,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==s){e.next=3;break}return e.abrupt("return");case 3:return a=R.teamid,r=b("x-auth-token"),e.next=7,fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify({name:s,description:d,teamId:a,members:w})});case 7:if((c=e.sent).ok){e.next=13;break}return M.push("/error"),e.abrupt("return");case 13:return e.next=15,c.json();case 15:i=e.sent,t&&t(),U.emit("team-update",a),M.push("/project-board/".concat(a,"/").concat(i._id));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),t=R.teamid,0!==F.length){e.next=12;break}return n=b("x-auth-token"),e.next=6,fetch("/api/teams/get-users/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:n}});case 6:return(a=e.sent).ok||M.push("/error"),e.next=10,a.json();case 10:r=e.sent,L(r.members);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:Oe.a.container,children:[Object(a.jsx)("div",{className:Oe.a.title,children:"Create New Project"}),Object(a.jsxs)("div",{className:Oe.a["input-container"],children:[Object(a.jsx)("span",{children:" Name"}),Object(a.jsx)("input",{className:Oe.a["input-name"],value:s,onChange:function(e){return i(e.target.value)},label:"Name",id:"name",placeholder:"Project Name"})]}),Object(a.jsxs)("div",{className:Oe.a["input-container-descr"],children:[Object(a.jsx)("span",{children:" Description"}),Object(a.jsx)("textarea",{className:Oe.a["text-area-descr"],value:d,onChange:function(e){return m(e.target.value)},label:"Description",id:"description",placeholder:"Project Description"})]}),Object(a.jsxs)("div",{className:Oe.a["input-container"],children:[Object(a.jsx)("span",{className:Oe.a["text-invite"],children:" Invite Members"}),Object(a.jsxs)("div",{className:Oe.a["invite-input"],children:[Object(a.jsx)("input",{className:Oe.a["members-input"],autoComplete:"off",value:O,onFocus:J,onBlur:function(){setTimeout((function(){return D(!1)}),120)},onChange:function(e){return _(e.target.value)},label:"Invite members",id:"members",placeholder:"Teammate Username"}),Object(a.jsx)("div",{className:Oe.a["select-for-invite"],children:I&&Object(a.jsx)("div",{className:Oe.a.members,children:F.filter((function(e){return e.username.toLowerCase().includes(O.toLowerCase())&&!e.username.includes(z.user.username)})).filter((function(e){return!w.find((function(t){return t.username===e.username}))})).sort((function(e,t){return e.username.localeCompare(t.username)})).map((function(e){return Object(a.jsx)(S,{className:Oe.a.user,onClick:function(){return function(e){var t=Object(x.a)(w);t.push(e),y(t),D(!1),_("")}(e)},title:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:e.username}),Object(a.jsx)("div",{className:Oe.a.email,children:e.email})]})},e._id)}))})})]})]}),Object(a.jsx)("div",{className:Oe.a["members-avatars"],children:w.map((function(e,t){return Object(a.jsx)(H,{user:e,onClick:function(){return function(e){var t=w.filter((function(t){return t._id!==e._id}));y(t)}(e)},size:40},t)}))}),Object(a.jsx)("div",{className:Oe.a["button-div"],children:Object(a.jsx)(W,{onClick:function(e){return B(e)},title:"Create",className:Oe.a["create-button"]})})]})}var _e=n(354),ve=n.n(_e);function ge(e){for(var t=Object(r.useContext)(p),n=Object(j.g)(),c=Object(r.useContext)(w),s=t.user.teams,i=e.searchInput,o=[],l=0;l<s.length;l++){var u=s[l],d={name:"Team: ".concat(u.name),id:u._id,type:"team"};o.push(d);for(var b=0;b<u.projects.length;b++){var m=u.projects[b],h={name:"Project: ".concat(m.name),id:m._id,type:"project"};o.push(h)}}return Object(a.jsx)("div",{className:ve.a["search-container"],children:o.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})).map((function(t,r){return Object(a.jsx)("div",{onClick:function(){!function(t){for(var a=0;a<s.length;a++){var r=s[a];r._id===t&&(n.push("/team/".concat(t)),c.updateSelectedTeam(r._id),e.hideForm());for(var i=0;i<r.projects.length;i++){var o=r.projects[i];o._id===t&&(n.push("/project-board/".concat(r._id,"/").concat(o._id)),c.updateSelectedTeam(r._id),e.hideForm())}}}(t.id)},children:t.name},r)}))})}var Ne=function(e){var t=e.asideOn,n=Object(r.useRef)(null),c=Object(r.useRef)(null),s=Object(r.useRef)(null),i=Object(r.useRef)(null),o=Object(r.useRef)(null),u=Object(r.useState)(!1),d=Object(l.a)(u,2),m=d[0],h=d[1],f=be(s),O=Object(l.a)(f,2),x=O[0],_=O[1],N=be(i),k=Object(l.a)(N,2),y=k[0],C=k[1],T=Object(r.useState)(!1),I=Object(l.a)(T,2),D=I[0],E=I[1],A=be(c),F=Object(l.a)(A,2),L=F[0],z=F[1],M=Object(r.useState)(null),R=Object(l.a)(M,2),U=R[0],B=R[1],J=be(n),W=Object(l.a)(J,2),G=W[0],q=W[1],X=Object(r.useState)(!1),Z=Object(l.a)(X,2),K=Z[0],Q=Z[1],$=be(o),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],re=Object(r.useState)(""),ce=Object(l.a)(re,2),se=ce[0],ie=ce[1],oe=Object(r.useState)(!1),le=Object(l.a)(oe,2),ue=le[0],de=le[1],me=Object(r.useContext)(p),pe=Object(r.useContext)(ae),fe=Object(r.useContext)(w),Oe=Object(j.h)(),_e=Object(j.g)(),ve=P();var Ne=Object(r.useCallback)(Object(g.a)(v.a.mark((function e(){var t,n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.projectid,n=b("x-auth-token"),e.next=4,fetch("/api/projects/info/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:n}});case 4:if((a=e.sent).ok){e.next=9;break}_e.push("/error"),e.next=13;break;case 9:return e.next=11,a.json();case 11:r=e.sent,pe.setProject(r);case 13:case"end":return e.stop()}}),e)}))),[_e,Oe,pe]);function ke(e){e===Oe.teamid&&_e.push("/")}function we(e){e===Oe.projectid&&_e.push("/team/".concat(Oe.teamid))}if(Object(r.useEffect)((function(){if(window.location.href.includes("team")||window.location.href.includes("project")){if("Select"===fe.selectedTeam){var e=Oe.teamid;fe.updateSelectedTeam(e)}}else fe.setSelectedTeam("Select");window.location.href.includes("project")&&(E(!0),h(!0),fe.getCurrentProjects(Oe.teamid),null!==pe.project&&pe.project._id===Oe.projectid||Ne(),window.location.href.includes("board")&&B("Board"),window.location.href.includes("list")&&B("List"))}),[Ne,Oe,Oe.teamid,pe.project,fe]),Object(r.useEffect)((function(){if((window.location.href.includes("team")||window.location.href.includes("project"))&&null!=ve)return ve.on("team-deleted",ke),function(){return ve.off("team-deleted")}})),Object(r.useEffect)((function(){if(window.location.href.includes("project")&&null!=ve)return ve.on("project-deleted",we),function(){return ve.off("project-deleted")}})),window.location.href.includes("project")&&!pe.project)return null;return Object(a.jsx)("header",{className:"".concat(je.a.navigation," ").concat(t?je.a.small:""),children:Object(a.jsxs)("div",{className:je.a.container,children:[Object(a.jsxs)("div",{className:je.a.links,children:[Object(a.jsx)("div",{className:je.a.margin,children:"Team:"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{className:je.a.teams,onClick:function(){return C(!y)},title:fe.selectedTeam}),y?Object(a.jsxs)("div",{ref:i,className:"".concat(je.a.options," ").concat(je.a.font," ").concat(je.a["teams-position"]),children:[fe.teams.map((function(e){return Object(a.jsx)("div",{className:je.a["team-options"],children:Object(a.jsx)(V,{href:"/team/".concat(e._id),title:e.name,onClick:function(){var t,n;t=e._id,n=e.name,fe.getCurrentProjects(t),fe.setSelectedTeam(n),C(!1)},className:"".concat(je.a.overflow," ").concat(je.a.hover)})},e._id)})),Object(a.jsx)("div",{className:je.a["last-option"],children:Object(a.jsx)(S,{onClick:function(){return Q(!0)},title:"Create Team",className:je.a.logout})})]}):null]}),K?Object(a.jsx)(he,{hideForm:function(){return Q(!1)},children:Object(a.jsx)(Y,{hideForm:function(){Q(!1)}})}):null,m&&Object(a.jsxs)("div",{className:je.a.flex,children:[Object(a.jsx)("div",{className:je.a.margin,children:"Project:"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{className:je.a.teams,onClick:function(){return _(!x)},title:pe.project.name}),x?Object(a.jsxs)("div",{ref:s,className:"".concat(je.a.options," ").concat(je.a.font," ").concat(je.a["projects-position"]),children:[fe.currentProjects.map((function(e){return Object(a.jsx)("div",{className:je.a["team-options"],children:Object(a.jsx)(V,{href:"/project-board/".concat(Oe.teamid,"/").concat(e._id),title:e.name,onClick:function(){_(!1)},className:"".concat(je.a.overflow," ").concat(je.a.hover)})},e._id)})),Object(a.jsx)("div",{className:je.a["last-option"],children:Object(a.jsx)(S,{onClick:function(){return de(!0)},title:"Create Project",className:je.a.logout})})]}):null]}),ue&&Object(a.jsx)(he,{hideForm:function(){return de(!1)},children:Object(a.jsx)(xe,{hideForm:function(){return de(!1)}})})]}),D&&Object(a.jsxs)("div",{className:je.a.flex,children:[Object(a.jsx)("div",{className:je.a.margin,children:"View:"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{className:je.a.view,onClick:function(){return z(!L)},title:U}),L?Object(a.jsxs)("div",{ref:c,className:"".concat(je.a.options," ").concat(je.a.font," ").concat(je.a["view-position"]),children:[Object(a.jsx)("div",{className:je.a["first-option"],children:Object(a.jsx)(V,{href:"/project-board/".concat(Oe.teamid,"/").concat(pe.project._id),title:"Board",className:je.a.hover,onClick:function(){z(!1)}})}),Object(a.jsx)("div",{className:je.a["last-option"],children:Object(a.jsx)(V,{href:"/project-list/".concat(Oe.teamid,"/").concat(pe.project._id),title:"List",className:je.a.hover,onClick:function(){z(!1)}})})]}):null]})]})]}),Object(a.jsxs)("div",{className:"".concat(je.a.links," ").concat(je.a.font),children:[Object(a.jsxs)("span",{children:[Object(a.jsx)("input",{className:je.a.input,type:"text",placeholder:te?"Enter Project or Team name":"Search...",autoComplete:"off",value:se,onChange:function(e){return ie(e.target.value)},onClick:function(){return ne(!0)},onBlur:function(){setTimeout((function(){return ne(!1)}),120)}}),se.length>0&&te?Object(a.jsx)("div",{ref:o,children:Object(a.jsx)(ge,{searchInput:se,hideForm:function(){ne(!te),ie("")}})}):null]}),Object(a.jsx)(S,{className:je.a.avatar,onClick:function(){return q(!G)},title:Object(a.jsx)(H,{user:me.user,size:40})}),G?Object(a.jsxs)("div",{ref:n,className:"".concat(je.a.options," ").concat(je.a["logout-position"]),children:[Object(a.jsx)("div",{className:je.a["first-option"],children:Object(a.jsx)(V,{href:"/profile/".concat(me.user&&me.user.id),title:"Profile",className:je.a.hover})}),Object(a.jsx)("div",{className:je.a["last-option"],children:Object(a.jsx)(S,{onClick:me.logOut,title:"Log Out",className:je.a.logout})})]}):null]})]})})},ke=n(183),we=n.n(ke),ye=function(e){var t=e.children,n=e.contentStyle,c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1];return Object(a.jsxs)("div",{className:we.a.app,children:[Object(a.jsx)(ue,{asideOn:i,setAsideOn:o}),Object(a.jsx)(Ne,{asideOn:i}),Object(a.jsx)("div",{className:"".concat(we.a.content," ").concat(i?we.a.small:""),style:n&&n,children:t})]})},Ce=n(355),Se=n.n(Ce),Te=function(e){var t=e.title;return Object(a.jsx)("div",{className:Se.a.title,children:t})},Ie=n(45),De=n.n(Ie),Pe=n.p+"static/media/home-page-pic.50bdb1b7.svg",Ee=function(){var e=Object(r.useRef)(null),t=Object(r.useContext)(p),n=Object(j.g)(),c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1],u=be(e),d=Object(l.a)(u,2),b=d[0],m=d[1],h=t.user.username,f=t.user.teams,O=t.user._id,x=t.user.recentProjects;return Object(a.jsxs)(ye,{children:[Object(a.jsx)("div",{children:i?Object(a.jsx)(he,{hideForm:function(){return o(!1)},children:Object(a.jsx)(Y,{hideForm:function(){o(!1)}})}):null}),Object(a.jsx)(Te,{title:"Home"}),Object(a.jsxs)("div",{className:De.a.container,children:[Object(a.jsxs)("span",{className:De.a["left-buttons"],children:[Object(a.jsx)("div",{children:Object(a.jsx)(W,{className:De.a["navigate-buttons"],title:"My Tasks",onClick:function(){return n.push("/my-tasks/".concat(O))}})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(W,{className:De.a["navigate-buttons"],title:"My Teams",onClick:function(){return m(!b)}}),Object(a.jsx)("span",{children:Object(a.jsx)("div",{className:De.a["select-team-container"],children:b?Object(a.jsx)("div",{className:De.a["teams-home"],ref:e,children:f.length>0?f.map((function(e,t){return Object(a.jsx)("span",{children:Object(a.jsx)("div",{className:De.a["navigate-buttons-teams"],onClick:function(){return t=e._id,void n.push("/team/".concat(t));var t},children:e.name})},t)})):"You haven't joined any teams yet"}):null})})]}),Object(a.jsx)("div",{children:Object(a.jsx)(W,{className:De.a["navigate-buttons"],title:"Create New Team",onClick:function(){return o(!0)}})})]}),Object(a.jsxs)("div",{className:De.a["pic-container"],children:[Object(a.jsx)("img",{className:De.a.pic1,src:Pe,alt:""}),Object(a.jsx)("div",{className:De.a["welcome-user"],children:"Welcome ".concat(h,"!")})]}),Object(a.jsx)("span",{className:De.a["right-buttons"],children:x?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Recent projects:"}),x.slice(0).reverse().map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(W,{className:De.a["navigate-buttons"],title:e.name,onClick:function(){return t=e._id,void f.map((function(e){return e.projects.forEach((function(a){a._id===t&&n.push("/project-board/".concat(e._id,"/").concat(t))}))}));var t}})},e._id)}))]}):null})]})]})},Ae=n(12),Fe=n.n(Ae),Le=n.p+"static/media/welcome-page-1.346d3517.svg",ze=n.p+"static/media/welcome-page-2.73d5ef5e.svg",Me=n.p+"static/media/welcome-page-3.5a073b3b.svg",Re=n.p+"static/media/welcome-page-4.5b854b1a.svg",Ue=n.p+"static/media/welcome-page-5.a24b3016.svg",He=n.p+"static/media/welcome-page-6.2c79ee8c.svg",Be=n.p+"static/media/instagram-icon.1043ced2.svg",Je=n.p+"static/media/twitter-icon.0f92d6a5.svg",We=n.p+"static/media/facebook-icon.529cf39a.svg",Ye=n(103),Ge=n.n(Ye),qe=n(33),Ve=n.n(qe),Xe=function(){var e=Object(g.a)(v.a.mark((function e(t,n,a,r,c){var s,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:n,body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 3:return s=e.sent,i=s.headers.get("Authorization"),e.next=7,s.json();case 7:if(!(o=e.sent).needPassword){e.next=11;break}return c(o),e.abrupt("return");case 11:if(!o.wrongPassword){e.next=14;break}return c(o),e.abrupt("return");case 14:if(!o.wrongUser){e.next=17;break}return c(o),e.abrupt("return");case 17:if(!o.exist){e.next=20;break}return c(o),e.abrupt("return");case 20:document.cookie="x-auth-token=".concat(i,";path=/"),o.user.username&&i?r(m(o)):c(o),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),c(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(g.a)(v.a.mark((function e(t,n,a){var r,c,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.tokenId,e.next=4,fetch("/api/user/google-login",{method:"POST",body:JSON.stringify({tokenId:r}),headers:{"Content-Type":"application/json"}});case 4:return c=e.sent,s=c.headers.get("Authorization"),document.cookie="x-auth-token=".concat(s,";path=/"),e.next=9,c.json();case 9:(i=e.sent).user.username&&s?n(m(i)):a(i),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Ke=n(39),Qe=n.n(Ke),$e=n(356),et=n.n($e);function tt(e){return Object(a.jsx)("div",{children:e.alert?Object(a.jsx)("div",{className:et.a.alert,children:e.message}):null})}var nt=function(){var e=Object(g.a)(v.a.mark((function e(t,n,a,r,c){var s,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=b("x-auth-token"),e.next=4,fetch(t,{method:n,body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:s}});case 4:return i=e.sent,e.next=7,i.json();case 7:(o=e.sent).user.username?r(m(o)):c(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,a,r,c){return e.apply(this,arguments)}}();function at(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(r.useState)(!1),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(r.useState)(!1),x=Object(l.a)(O,2),_=x[0],N=x[1],k=Object(r.useContext)(p),w=Object(j.g)(),y=e.userId,C=Object(r.useCallback)(function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f(!1),N(!1),c&&u){e.next=6;break}return N(!0),e.abrupt("return");case 6:if(c===u){e.next=9;break}return f(!0),e.abrupt("return");case 9:return e.next=11,nt("/api/user/addNewPassword/".concat(y),"PUT",{password:c},(function(e){k.logIn(e.user),console.log(k.user),w.push("/")}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w,k,c,u,y]);return Object(a.jsx)("form",{className:Qe.a.container,children:Object(a.jsxs)("div",{className:Qe.a.innerContainer,children:[Object(a.jsx)("div",{className:Qe.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"110",height:"100"})}),Object(a.jsxs)("div",{className:Qe.a.rightSide,children:[Object(a.jsxs)("div",{className:Qe.a.alerts,children:[Object(a.jsx)(tt,{alert:h,message:"Passwords do not match"}),Object(a.jsx)(tt,{alert:_,message:"Please fill all fileds"})]}),Object(a.jsx)("div",{className:Qe.a.title,children:"Add password to user"}),Object(a.jsxs)("div",{className:Qe.a.inputContainer,children:[Object(a.jsx)("div",{children:" Password:"}),Object(a.jsx)("input",{placeholder:"********",className:Qe.a.passInput,type:"password",value:c,onChange:function(e){return s(e.target.value)},label:"New Password",id:"password"}),Object(a.jsxs)("div",{className:Qe.a.passInstructions,children:[Object(a.jsx)("p",{children:"Use 8 or more characters with a mix "}),Object(a.jsx)("p",{children:"of letters, numbers & symbols. "})]})]}),Object(a.jsxs)("div",{className:Qe.a.inputContainer,children:[Object(a.jsx)("div",{children:" Confirm Password:"}),Object(a.jsx)("input",{placeholder:"********",className:Qe.a.passInput,type:"password",value:u,onChange:function(e){return d(e.target.value)},label:"Confirm Password",id:"rePassword"})]}),Object(a.jsx)("div",{className:Qe.a.newPassAlert,children:"Important!!! You have to activate your new password by following the link sent to your email. You have to do this in the next hour in order for your new password to be activated"}),Object(a.jsx)("div",{className:Qe.a.buttonDivLogin,children:Object(a.jsx)("button",{type:"submit",className:Qe.a.loginButton,onClick:C,children:"Submit"})}),Object(a.jsx)("div",{className:Qe.a.textLogin,children:"User was registered with Google. Please add password for this Website"})]})]})})}var rt=n.p+"static/media/google.2cf12fa6.svg",ct=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(r.useState)(!1),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],N=x[1],k=Object(r.useContext)(p),w=Object(j.g)(),y=Object(r.useState)(!1),C=Object(l.a)(y,2),S=C[0],T=C[1],I=Object(r.useState)(!1),D=Object(l.a)(I,2),P=D[0],E=D[1],A=Object(r.useState)(!1),F=Object(l.a)(A,2),L=F[0],z=F[1],M=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),T(!1),E(!1),z(!1),c&&u){e.next=7;break}return T(!0),e.abrupt("return");case 7:return e.next=9,Xe("/api/user/login","POST",{email:u,password:c},(function(e){k.logIn(e),w.push("/")}),(function(e){e.needPassword&&(N(e.userId),f(!0)),e.wrongPassword&&E(!0),e.wrongUser&&z(!0),console.log("Error",e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){f(!1)};return Object(a.jsxs)("div",{children:[h?Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:R,children:Object(a.jsx)(at,{hideForm:R,userId:_,email:u})})}):null,Object(a.jsx)("form",{className:Ve.a.container,onSubmit:M,children:Object(a.jsxs)("div",{className:Ve.a["inner-container"],children:[Object(a.jsx)("div",{className:Ve.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"110",height:"100"})}),Object(a.jsxs)("div",{className:Ve.a["right-side"],children:[Object(a.jsxs)("div",{className:Ve.a.alerts,children:[Object(a.jsx)(tt,{alert:S,message:"Please fill all fileds"}),Object(a.jsx)(tt,{alert:P,message:"Wrong Password"}),Object(a.jsx)(tt,{alert:L,message:"Please fill valid email address"})]}),Object(a.jsx)("div",{className:Ve.a.title,children:"Log In with E-mail"}),Object(a.jsxs)("div",{className:Ve.a["input-container"],children:[Object(a.jsx)("div",{children:" Email:"}),Object(a.jsx)("input",{className:Ve.a["email-input"],placeholder:"John@example.com",value:u,onChange:function(e){return d(e.target.value)},label:"Email",id:"email"})]}),Object(a.jsxs)("div",{className:Ve.a["input-container"],children:[Object(a.jsx)("div",{children:" Password:"}),Object(a.jsx)("input",{className:Ve.a["pass-input"],placeholder:"********",type:"password",value:c,onChange:function(e){return s(e.target.value)},label:"Password",id:"password"})]}),Object(a.jsx)("div",{className:Ve.a["button-div-login"],children:Object(a.jsx)("button",{type:"submit",className:Ve.a["login-button"],children:"Log In"})}),Object(a.jsxs)("div",{className:Ve.a["text-div"],children:[Object(a.jsx)("p",{className:Ve.a["forgot-pass"],onClick:function(){e.goToForgotPassword(),e.hideForm()},children:"Forgot Password?"}),Object(a.jsxs)("p",{className:Ve.a["new-to-sm"],children:["New to Smart Manager?",Object(a.jsx)("button",{className:Ve.a["sign-up-btn"],onClick:function(){e.goToSignUp(),e.hideForm()},children:"Sign Up"})]}),Object(a.jsx)("h3",{children:"or"})]}),Object(a.jsx)("div",{className:Ve.a["button-div-google-login"],children:Object(a.jsx)(Ge.a,{render:function(e){return Object(a.jsxs)("button",{onClick:e.onClick,className:Ve.a["google-login-btn"],children:[Object(a.jsx)("img",{src:rt,alt:"logo",width:"25",height:"25"}),"Log In with Google"]})},clientId:"737157840044-8cdut4c3o2lrn6q2jn37uh65ate0g7pr.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(e){Ze(e,(function(e){k.logIn(e),w.push("/")}),(function(e){console.log("Error",e)}))},cookiePolicy:"single_host_origin"})})]})]})})]})},st=n(23),it=n.n(st),ot=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(r.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],N=x[1],k=Object(r.useState)(!1),w=Object(l.a)(k,2),y=w[0],C=w[1],S=Object(r.useState)(!1),T=Object(l.a)(S,2),I=T[0],D=T[1],P=Object(r.useState)(!1),E=Object(l.a)(P,2),A=E[0],F=E[1],L=Object(r.useState)(!1),z=Object(l.a)(L,2),M=z[0],R=z[1],U=Object(r.useContext)(p),H=Object(j.g)();function B(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}var J=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),R(!1),C(!1),D(!1),F(!1),B(h)){e.next=9;break}return R(!0),e.abrupt("return");case 9:if(u===_){e.next=12;break}return C(!0),e.abrupt("return");case 12:if(c&&u&&_&&h){e.next=15;break}return D(!0),e.abrupt("return");case 15:return e.next=17,Xe("/api/user/register","POST",{email:h,username:c,password:u},(function(e){U.logIn(e),H.push("/")}),(function(e){e.exist&&F(!0)}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("form",{className:it.a.container,onSubmit:J,children:Object(a.jsxs)("div",{className:it.a["inner-container"],children:[Object(a.jsx)("div",{className:it.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"110",height:"100"})}),Object(a.jsxs)("div",{className:it.a["right-side"],children:[Object(a.jsxs)("div",{className:it.a.alerts,children:[Object(a.jsx)(tt,{alert:y,message:"Passwords do not match"}),Object(a.jsx)(tt,{alert:A,message:"User with this email already exists"}),Object(a.jsx)(tt,{alert:I,message:"Please fill all fileds"}),Object(a.jsx)(tt,{alert:M,message:"Please enter valid email address"})]}),Object(a.jsx)("div",{className:it.a.title,children:"Sign Up with E-mail"}),Object(a.jsxs)("div",{className:it.a["input-container"],children:[Object(a.jsx)("div",{children:" Username:"}),Object(a.jsx)("input",{placeholder:"John Smith",className:it.a["sign-up-input"],value:c,onChange:function(e){return s(e.target.value)},label:"Username",id:"username"})]}),Object(a.jsxs)("div",{className:it.a["input-container"],children:[Object(a.jsx)("div",{children:" Email:"}),Object(a.jsx)("input",{placeholder:"John@example.com",className:it.a["sign-up-input"],value:h,onChange:function(e){return f(e.target.value)},label:"Email",id:"email"})]}),Object(a.jsxs)("div",{className:it.a["input-container"],children:[Object(a.jsx)("div",{children:" Password:"}),Object(a.jsx)("input",{placeholder:"********",className:it.a["sign-up-input"],type:"password",value:u,onChange:function(e){return d(e.target.value)},label:"Password",id:"password"}),Object(a.jsxs)("div",{className:it.a["pass-instructions"],children:[Object(a.jsx)("p",{children:"Use 8 or more characters with a"}),Object(a.jsx)("p",{children:"mix of letters, numbers & symbols. "})]})]}),Object(a.jsxs)("div",{className:it.a["input-container"],children:[Object(a.jsx)("div",{children:" Re-type Password:"}),Object(a.jsx)("input",{placeholder:"********",className:it.a["sign-up-input"],type:"password",value:_,onChange:function(e){return N(e.target.value)},label:"Re-Password",id:"re-password"})]}),Object(a.jsx)("div",{className:it.a["button-div-login"],children:Object(a.jsx)("button",{type:"submit",className:it.a["sign-up-button"],children:"Get Started"})}),Object(a.jsx)("div",{className:it.a["text-div"],children:Object(a.jsx)("h3",{children:"or"})}),Object(a.jsx)("div",{className:it.a["button-div-google-login"],children:Object(a.jsx)(Ge.a,{render:function(e){return Object(a.jsxs)("button",{onClick:e.onClick,className:it.a["google-login-btn"],children:[Object(a.jsx)("img",{src:rt,alt:"logo",width:"25",height:"25"}),"Sign Up with Google"]})},clientId:"737157840044-8cdut4c3o2lrn6q2jn37uh65ate0g7pr.apps.googleusercontent.com",buttonText:"Sign up with Google",onSuccess:function(e){Ze(e,(function(e){U.logIn(e),H.push("/")}),(function(e){console.log("Error",e)}))},cookiePolicy:"single_host_origin"})}),Object(a.jsx)("div",{className:it.a["text-div"],children:Object(a.jsxs)("p",{className:it.a["already-sign-up"],children:["Already Sign Up?",Object(a.jsx)("button",{className:it.a["sign-up-btn"],onClick:function(){e.goToLogin(),e.hideForm()},children:"Log In"})]})})]})]})})},lt=n(31),ut=n.n(lt),dt=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(r.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(r.useContext)(p),x=Object(j.g)(),_=Object(r.useState)(!1),N=Object(l.a)(_,2),k=N[0],w=N[1],y=Object(r.useState)(!1),C=Object(l.a)(y,2),S=C[0],T=C[1],I=Object(r.useState)(!1),D=Object(l.a)(I,2),P=D[0],E=D[1],A=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(!1),T(!1),E(!1),c&&u){e.next=7;break}return w(!0),e.abrupt("return");case 7:if(c===h){e.next=10;break}return T(!0),e.abrupt("return");case 10:return e.next=12,fetch("/api/user/login",{method:"POST",body:JSON.stringify({email:u,password:c}),headers:{"Content-Type":"application/json"}});case 12:return n=e.sent,e.next=15,n.json();case 15:if(!(a=e.sent).wrongUser){e.next=19;break}return E(!0),e.abrupt("return");case 19:console.log("Error",a),a.user?r=a.user._id:a.userId&&(r=a.userId),nt("/api/user/addNewPassword/".concat(r),"PUT",{password:c},(function(e){O.logIn(e.user),x.push("/")}));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{className:ut.a.container,onSubmit:A,children:[Object(a.jsxs)("div",{className:ut.a.alerts,children:[Object(a.jsx)(tt,{alert:k,message:"Please fill all fileds"}),Object(a.jsx)(tt,{alert:S,message:"Passwords do not match"}),Object(a.jsx)(tt,{alert:P,message:"Please fill valid email address"})]}),Object(a.jsxs)("div",{className:ut.a["inner-container"],children:[Object(a.jsx)("div",{className:ut.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"110",height:"100"})}),Object(a.jsxs)("div",{className:ut.a["right-side"],children:[Object(a.jsx)("div",{className:ut.a.title,children:"Forgot Password Form"}),Object(a.jsxs)("div",{className:ut.a["input-container"],children:[Object(a.jsx)("div",{children:" Email:"}),Object(a.jsx)("input",{className:ut.a.emailInput,placeholder:"John@example.com",value:u,onChange:function(e){return d(e.target.value)},label:"Email",id:"email"})]}),Object(a.jsxs)("div",{className:ut.a["input-container"],children:[Object(a.jsx)("div",{children:"New Password:"}),Object(a.jsx)("input",{className:ut.a.passInput,placeholder:"********",type:"password",value:c,onChange:function(e){return s(e.target.value)},label:"Password",id:"password"})]}),Object(a.jsxs)("div",{className:ut.a["input-container"],children:[Object(a.jsx)("div",{children:"Re-type New Password:"}),Object(a.jsx)("input",{className:ut.a.passInput,placeholder:"********",type:"password",value:h,onChange:function(e){return f(e.target.value)},label:"Confirm Password",id:"rePassword"})]}),Object(a.jsx)("div",{className:ut.a.buttonDivLogin,children:Object(a.jsx)("button",{type:"submit",className:ut.a.loginButton,children:"Submit"})}),Object(a.jsxs)("div",{className:ut.a.textDiv,children:[Object(a.jsxs)("p",{className:ut.a.newToSmM,children:["New to Smart Manager?",Object(a.jsx)("button",{className:ut.a.signUpBtn,onClick:function(){e.goToSignUp(),e.hideForm()},children:"Sign Up"})]}),Object(a.jsx)("h3",{children:"or"})]}),Object(a.jsx)("div",{className:ut.a.buttonDivGoogleLogin,children:Object(a.jsx)(Ge.a,{render:function(e){return Object(a.jsxs)("button",{onClick:e.onClick,className:ut.a.googleLoginBtn,children:[Object(a.jsx)("img",{src:rt,alt:"logo",width:"25",height:"25"}),"Log In with Google"]})},clientId:"737157840044-8cdut4c3o2lrn6q2jn37uh65ate0g7pr.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(e){Ze(e,(function(e){O.logIn(e),x.push("/")}),(function(e){console.log("Error",e)}))},cookiePolicy:"single_host_origin"})})]})]})]})})},jt=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(r.useState)(!1),j=Object(l.a)(d,2),b=j[0],m=j[1];return Object(a.jsxs)("div",{className:Fe.a.container,children:[n?Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return c(!n)},children:Object(a.jsx)(ct,{hideForm:function(){return c(!n)},goToSignUp:function(){return u(!o)},goToForgotPassword:function(){return m(!b)}})})}):null,o?Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return u(!o)},children:Object(a.jsx)(ot,{hideForm:function(){return u(!o)},goToLogin:function(){return c(!n)}})})}):null,b?Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return m(!b)},children:Object(a.jsx)(dt,{hideForm:function(){return m(!b)},goToSignUp:function(){return u(!o)}})})}):null,Object(a.jsxs)("div",{className:Fe.a["content-wrap"],children:[Object(a.jsxs)("div",{className:Fe.a["top-container"],children:[Object(a.jsxs)("div",{className:Fe.a["top-div-container"],children:[Object(a.jsxs)("div",{className:Fe.a["header-nav"],children:[Object(a.jsx)("span",{className:Fe.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"100%",height:"100%"})}),Object(a.jsxs)("span",{className:Fe.a["first-buttons"],children:[Object(a.jsx)("button",{className:Fe.a["login-button"],onClick:function(){return c(!n)},children:"Log In"}),Object(a.jsx)("button",{className:Fe.a["sign-up-button"],onClick:function(){return u(!o)},children:"Sign Up"})]})]}),Object(a.jsx)("div",{className:Fe.a.pic1,children:Object(a.jsx)("img",{src:Le,alt:"",width:"100%"})}),Object(a.jsx)("div",{className:Fe.a.pic2,children:Object(a.jsx)("img",{src:ze,alt:"",width:"100%"})})]}),Object(a.jsx)("div",{className:Fe.a["lower-div-container"],children:Object(a.jsxs)("div",{className:Fe.a["first-text"],children:[Object(a.jsxs)("p",{className:Fe.a.headers,children:["Manage your work in a ",Object(a.jsx)("span",{className:Fe.a.lucida,children:"Smart"})," way! "]}),Object(a.jsxs)("div",{className:Fe.a.paragraph,children:[Object(a.jsx)("p",{children:"The ideas get more clear, organized and focused on."}),Object(a.jsx)("p",{children:"Flexible and time saving for the whole team. "}),Object(a.jsx)("button",{className:Fe.a["second-sign-up-button"],onClick:function(){return u(!o)},children:"Free Sign Up"})]})]})})]}),Object(a.jsxs)("div",{className:Fe.a["second-container"],children:[Object(a.jsxs)("div",{className:Fe.a["first-row"],children:[Object(a.jsxs)("div",{className:Fe.a["second-text"],children:[Object(a.jsx)("p",{className:Fe.a.headers,children:"Work and participate in different teams "}),Object(a.jsxs)("div",{className:Fe.a.paragraph,children:[Object(a.jsx)("p",{children:"Follow who and when is doing tasks. Be always"}),Object(a.jsx)("p",{children:"informed with the accomplishment of the projects. "}),Object(a.jsx)("button",{className:Fe.a["third-sign-up-button"],onClick:function(){return u(!o)},children:"Try It Now"})]})]}),Object(a.jsx)("div",{className:Fe.a["pic3-container"],children:Object(a.jsx)("img",{className:Fe.a.picture,src:Me,alt:""})})]}),Object(a.jsxs)("div",{className:Fe.a["second-row"],children:[Object(a.jsx)("div",{className:Fe.a["pic4-container"],children:Object(a.jsx)("img",{className:Fe.a.picture,src:Re,alt:""})}),Object(a.jsxs)("div",{className:Fe.a["second-row-colum"],children:[Object(a.jsxs)("div",{className:Fe.a["second-text"],children:[Object(a.jsx)("p",{className:Fe.a.headers,children:"\u0415\u0430sy to manage all the information"}),Object(a.jsxs)("div",{className:Fe.a.paragraph,children:[Object(a.jsx)("p",{children:"Add stickers, notes, comments, attachments in your"}),Object(a.jsx)("p",{children:"  Smart Manager."}),Object(a.jsx)("p",{children:"Collaborate with others in your Team."})]})]}),Object(a.jsx)("div",{className:Fe.a["second-row-pic"],children:Object(a.jsx)("img",{className:Fe.a.picture,src:Ue,alt:""})})]})]}),Object(a.jsxs)("div",{className:Fe.a["third-row"],children:[Object(a.jsxs)("div",{className:Fe.a["second-text"],children:[Object(a.jsxs)("p",{className:Fe.a.headers,children:["Start your ",Object(a.jsx)("span",{className:Fe.a.lucida,children:"Smart Manager"})," Now "]}),Object(a.jsxs)("div",{className:Fe.a.paragraph,children:[Object(a.jsxs)("p",{children:["Connect with other teams from ",Object(a.jsx)("span",{className:Fe.a.lucida,children:"The Smart Family"}),","]}),Object(a.jsx)("p",{children:" save time with more work done."}),Object(a.jsx)("button",{className:Fe.a["second-sign-up-button"],onClick:function(){return u(!o)},children:"Get Started"})]})]}),Object(a.jsx)("div",{className:Fe.a["pic6-container"],children:Object(a.jsx)("img",{className:Fe.a.picture,src:He,alt:""})})]})]})]}),Object(a.jsxs)("footer",{className:Fe.a.footer,children:[Object(a.jsxs)("div",{className:Fe.a["footer-column"],children:[Object(a.jsx)("div",{className:Fe.a["footer-headers"],children:Object(a.jsx)("p",{children:"Contact Us"})}),Object(a.jsxs)("div",{className:Fe.a["footer-info"],children:[Object(a.jsx)("p",{children:"+359 52 317 395"}),Object(a.jsx)("p",{children:"smartmanager@gmail.com"})]})]}),Object(a.jsxs)("div",{className:Fe.a["footer-column"],children:[Object(a.jsx)("div",{className:Fe.a["footer-headers"],children:Object(a.jsx)("p",{children:"SERVICES"})}),Object(a.jsxs)("div",{className:Fe.a["footer-info"],children:[Object(a.jsx)("p",{children:"Contact Us"}),Object(a.jsx)("p",{children:"Ordering & Payment FAQ"})]})]}),Object(a.jsxs)("div",{className:Fe.a["footer-column"],children:[Object(a.jsx)("div",{className:Fe.a["footer-headers"],children:Object(a.jsx)("p",{children:"INFORMATION"})}),Object(a.jsxs)("div",{className:Fe.a["footer-info"],children:[Object(a.jsx)("p",{children:"About SMART MANAGER"}),Object(a.jsx)("p",{children:"Work With US"}),Object(a.jsx)("p",{children:"Privacy Policy"}),Object(a.jsx)("p",{children:"Terms & Conditions"})]})]}),Object(a.jsxs)("div",{className:Fe.a["last-column"],children:[Object(a.jsxs)("div",{className:Fe.a["social-media-container"],children:[Object(a.jsx)("span",{children:Object(a.jsx)("img",{className:Fe.a["social-media"],src:Be,alt:""})}),Object(a.jsx)("span",{children:Object(a.jsx)("img",{className:Fe.a["social-media"],src:Je,alt:""})}),Object(a.jsx)("span",{children:Object(a.jsx)("img",{className:Fe.a["social-media"],src:We,alt:""})})]}),Object(a.jsx)("div",{className:Fe.a.sd2006,children:"SD2006"})]})]})]})},bt=n(15),mt=n.n(bt),pt=n.p+"static/media/profile-page-pic.2c3455c2.svg",ht=n.p+"static/media/pen.4b4021f9.svg",ft=n(76),Ot=n.n(ft),xt=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:Ot.a["transparent-confirm"]}),Object(a.jsx)("div",{className:Ot.a.container,children:Object(a.jsxs)("div",{className:Ot.a.content,children:[Object(a.jsx)("div",{className:Ot.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"194",height:"142"})}),Object(a.jsx)("div",{className:Ot.a.title,children:"Are you sure you want to ".concat(e.title,"?")}),Object(a.jsxs)("div",{className:Ot.a.buttons,children:[Object(a.jsx)(W,{className:Ot.a.button,title:"Yes",onClick:function(){e.hideConfirm(),e.onConfirm()}}),Object(a.jsx)(W,{className:Ot.a.button,title:"No",onClick:function(){return e.hideConfirm()}})]})]})})]})},_t=n(130),vt=function(){var e=Object(r.useRef)(null),t=Object(r.useContext)(p),n=Object(r.useState)(null),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(!1),u=Object(l.a)(o,2),b=u[0],m=u[1],h=Object(r.useState)(!1),f=Object(l.a)(h,2),O=f[0],x=f[1],_=Object(r.useState)(t.user.username),N=Object(l.a)(_,2),k=N[0],w=N[1],y=Object(r.useState)(null),C=Object(l.a)(y,2),S=C[0],T=C[1],I=Object(r.useState)(null),D=Object(l.a)(I,2),P=D[0],E=D[1],A=Object(r.useState)(!1),F=Object(l.a)(A,2),L=F[0],z=F[1],M=be(e),R=Object(l.a)(M,2),U=R[0],H=R[1],B=be(e),J=Object(l.a)(B,2),Y=J[0],G=J[1],q=Object(r.useState)(!1),V=Object(l.a)(q,2),X=V[0],Z=V[1],K=Object(j.h)(),Q=Object(j.g)(),$=t.user.username,ee=t.user.teams,te=K.userid,ne=Object(r.useCallback)(Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/".concat(te));case 2:if((t=e.sent).ok){e.next=7;break}Q.push("/error"),e.next=11;break;case 7:return e.next=9,t.json();case 9:n=e.sent,i(n.email);case 11:case"end":return e.stop()}}),e)}))),[Q,te]),ae=function(){var e=Object(g.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),z(!1),m(!1),x(!1),k||S){e.next=6;break}return e.abrupt("return");case 6:if(S===P){e.next=9;break}return z(!0),e.abrupt("return");case 9:return e.next=11,nt("/api/user/".concat(te),"PUT",{username:k,password:S},(function(e){t.logIn(e)}),(function(e){console.log("Error",e)}));case 11:ne();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){ne()}),[ne]),!$)return Object(a.jsx)(ye,{children:Object(a.jsx)(d.a,{type:"TailSpin",color:"#363338",height:100,width:100,timeout:3e3})});var re=window.cloudinary.createUploadWidget({cloudName:"do7mce7ni",uploadPreset:"uo9ubii7"},(function(e,n){if("success"===n.event){var a={path:n.info.path,publicId:n.info.public_id};nt("/api/user/image/".concat(te),"PUT",{newImage:a,oldImage:t.user.image},(function(e){t.logIn(e)}),(function(e){console.log("Error",e)})),ne()}})),ce=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt("/api/user/image/".concat(te),"PUT",{oldImage:t.user.image},(function(e){t.logIn(e)}),(function(e){console.log("Error",e)}));case 2:ne();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(ye,{children:[X&&Object(a.jsx)(xt,{title:"delete this picture",hideConfirm:function(){return Z(!1)},onConfirm:function(){return ce()}}),Object(a.jsx)(Te,{title:"Profile"}),Object(a.jsxs)("div",{className:mt.a.container,children:[Object(a.jsxs)("div",{className:mt.a["left-container"],children:[Object(a.jsxs)("div",{className:mt.a["button-input-div"],children:[Object(a.jsx)(W,{title:"Username:",className:mt.a["navigate-buttons"],onClick:function(){x(!O)}}),Object(a.jsx)("input",{ref:function(e){null!=e&&e.focus()},value:k,onChange:function(e){return w(e.target.value)},className:mt.a["input-fields-profile"],placeholder:$,disabled:!O})]}),Object(a.jsxs)("div",{className:mt.a["button-input-div"],children:[Object(a.jsx)(W,{title:"Change Password",className:mt.a["navigate-buttons"],onClick:function(){m(!b)}}),Object(a.jsx)("input",{onChange:function(e){return T(e.target.value)},className:mt.a["input-fields-profile"],placeholder:"********",disabled:!b,type:"password"})]}),Object(a.jsx)("div",{className:mt.a.alerts,children:Object(a.jsx)(tt,{alert:L,message:"Passwords do not match"})}),b?Object(a.jsx)("div",{className:mt.a["new-pass-alert"],children:"Important!!! You have to activate your new password by following the link sent to your email. You have to do this in the next hour in order for your new password to be activated"}):null,Object(a.jsxs)("div",{className:mt.a["button-input-div"],children:[Object(a.jsx)(W,{title:"Confirm Password",className:mt.a["navigate-buttons"],onClick:function(){m(!b)}}),Object(a.jsx)("input",{onChange:function(e){return E(e.target.value)},className:mt.a["input-fields-profile"],placeholder:"********",disabled:!b,type:"password"})]}),Object(a.jsxs)("div",{className:mt.a["button-input-div"],children:[Object(a.jsx)(W,{title:"Email:",className:mt.a["navigate-buttons"]}),Object(a.jsx)("input",{className:mt.a["input-fields-profile"],value:s,disabled:!0})]}),Object(a.jsxs)("div",{className:mt.a["button-input-div-tasks"],children:[Object(a.jsx)(W,{title:"My Tasks",className:mt.a["navigate-buttons"],onClick:function(){return Q.push("/my-tasks/".concat(te))}}),Object(a.jsx)("input",{className:mt.a["input-fields-tasks"],value:"",disabled:!0})]}),Object(a.jsxs)("div",{className:mt.a["button-input-div"],children:[Object(a.jsxs)("div",{className:mt.a.myTeamsContainer,children:[Object(a.jsx)(W,{title:"My Teams",className:mt.a["navigate-buttons"],onClick:function(){return H(!U)}}),Object(a.jsx)("div",{className:mt.a["select-team-container"],children:U?Object(a.jsx)("div",{className:mt.a["teams-home"],ref:e,children:ee.length>0?ee.map((function(e,t){return Object(a.jsx)("span",{children:Object(a.jsx)("div",{className:mt.a["navigate-buttons-teams"],onClick:function(){return t=e._id,void Q.push("/team/".concat(t));var t},children:e.name})},t)})):"You haven't joined any teams yet"}):null})]}),Object(a.jsx)("div",{className:mt.a["button-div-save"],children:Object(a.jsx)(W,{title:"SAVE",className:mt.a["save-button"],onClick:function(e){return ae(e)}})})]})]}),Object(a.jsxs)("div",{className:mt.a["pic-container"],children:[Object(a.jsxs)("div",{className:mt.a["profile-pic-container"],children:[Object(a.jsx)("div",{className:mt.a["profile-pic"],onClick:function(){t.user.image?G(!Y):re.open()},children:t.user.image?Object(a.jsxs)("div",{className:mt.a["profile-picture"],children:[Object(a.jsx)(_t.Image,{publicId:t.user.image.publicId,className:mt.a["profile-picture"],children:Object(a.jsx)(_t.Transformation,{width:"250",height:"250"})}),Object(a.jsx)("div",{className:mt.a.relative,children:Y&&Object(a.jsxs)("div",{ref:e,className:"".concat(mt.a.menu),children:[Object(a.jsx)(W,{onClick:function(){return re.open()},title:"Edit",className:mt.a.edit}),Object(a.jsx)(W,{onClick:function(){Z(!0)},title:"Delete",className:mt.a.delete})]})})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:mt.a["load-pic-text"],children:"Load a profile picture"}),Object(a.jsx)("img",{className:mt.a.pen,src:ht,alt:""})]})}),Object(a.jsx)("p",{children:$})]}),Object(a.jsx)("img",{className:mt.a.pic1,src:pt,alt:""})]})]})]})},gt=n(357),Nt=n.n(gt),kt=function(e){var t=e.title,n=e.onClick,r=e.className;return Object(a.jsx)("button",{onClick:n,className:"".concat(Nt.a.button," ").concat(r),children:t})},wt=n(21),yt=n.n(wt),Ct=n(246),St=n.n(Ct);function Tt(e){var t=e.members,n=e.invited;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:St.a["members-avatars"],children:[Object(a.jsx)("div",{children:"Team Members:"}),t.map((function(e,t){return Object(a.jsx)(S,{title:Object(a.jsx)(H,{user:e,size:40},e._id)},t)}))]}),0!==n.length&&Object(a.jsxs)("div",{className:St.a["members-avatars"],children:[Object(a.jsx)("div",{children:"Invited Members:"}),n.map((function(e,t){return Object(a.jsx)(H,{user:e,size:40},t)}))]})]})}function It(e){var t=Object(r.useState)(e.currTeam),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(c.name),o=Object(l.a)(i,2),u=o[0],d=o[1],m=Object(r.useState)(c.description),h=Object(l.a)(m,2),f=h[0],O=h[1],_=Object(r.useState)(""),N=Object(l.a)(_,2),k=N[0],y=N[1],C=Object(r.useState)(c.members),T=Object(l.a)(C,2),I=T[0],D=T[1],E=Object(r.useState)(c.requests),A=Object(l.a)(E,2),F=A[0],L=A[1],z=Object(r.useState)([]),M=Object(l.a)(z,2),R=M[0],U=M[1],B=Object(r.useState)(!1),J=Object(l.a)(B,2),Y=J[0],G=J[1],q=Object(r.useState)([]),V=Object(l.a)(q,2),X=V[0],Z=V[1],K=Object(r.useState)(!1),Q=Object(l.a)(K,2),$=Q[0],ee=Q[1],te=Object(r.useState)(!1),ne=Object(l.a)(te,2),ae=ne[0],re=ne[1],ce=Object(r.useState)(""),se=Object(l.a)(ce,2),ie=se[0],oe=se[1],le=Object(r.useState)(""),ue=Object(l.a)(le,2),de=ue[0],je=ue[1],be=Object(j.g)(),me=Object(r.useContext)(w),pe=Object(r.useContext)(p),he=P(),fe=Object(j.h)().teamid,Oe=Object(r.useCallback)((function(){pe.user.teams.forEach((function(e){e._id===fe&&s(e)}));var e=c.author;D(c.members),L(c.requests),O(c.description),d(c.name),pe.user.id===e&&ee(!0)}),[pe.user.id,c.author,c.description,c.members,c.name,c.requests,pe.user.teams,fe]);Object(r.useEffect)((function(){Oe()}),[Oe]);var xe=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(t.target.value),G(!1),0!==X.length){e.next=12;break}return n=b("x-auth-token"),e.next=6,fetch("/api/user/get-all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:n}});case 6:return(a=e.sent).ok||be.push("/error"),e.next=10,a.json();case 10:r=e.sent,Z(r);case 12:k.length>=2&&G(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.filter((function(e){return e._id!==t._id})).filter((function(e){return e._id!==t.id}));case 2:return n=e.sent,a=b("x-auth-token"),e.next=6,fetch("/api/teams/".concat(fe),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({name:u,description:f,members:n})});case 6:if(e.sent.ok){e.next=12;break}return be.push("/error"),e.abrupt("return");case 12:he.emit("team-update",fe),t.id===pe.user.id&&be.push("/");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b("x-auth-token"),e.next=3,fetch("/api/teams/".concat(fe),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({removeInvitation:t})});case 3:if(e.sent.ok){e.next=9;break}return be.push("/error"),e.abrupt("return");case 9:Oe(),he.emit("team-update",fe),he.emit("message-sent",t._id);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var t=Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b("x-auth-token"),t.next=3,fetch("/api/teams/".concat(fe),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({name:u,description:f,members:I,requests:R})});case 3:if(t.sent.ok){t.next=9;break}return be.push("/error"),t.abrupt("return");case 9:me.setSelectedTeam(u),Oe(),he.emit("team-update",fe),he.emit("multiple-messages-sent",R),e.hideForm();case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function Ne(){return(Ne=Object(g.a)(v.a.mark((function t(){var n,a,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("You will lost all team information - projects, lists and tasks")){t.next=2;break}return t.abrupt("return");case 2:return n=b("x-auth-token"),t.next=5,fetch("/api/teams/".concat(fe),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:n}});case 5:if((a=t.sent).ok){t.next=10;break}be.push("/error"),t.next=17;break;case 10:return t.next=12,a.json();case 12:r=t.sent,c=[].concat(Object(x.a)(r.members),Object(x.a)(r.requests)),he.emit("team-deleted",{id:fe,recievers:c}),be.push("/"),e.hideForm();case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ke={"remove this member":function(e){var t=R.filter((function(t){return t._id!==e._id}));U(t)},"leave this team":_e,"delete this member from team":_e,"delete this member from invited":ve,"delete this team":function(){return Ne.apply(this,arguments)}};return Object(a.jsxs)("div",{children:[ae&&Object(a.jsx)(xt,{title:ie,hideConfirm:function(){return re(!1)},onConfirm:function(){return ke[ie](de)}}),Object(a.jsx)("div",{className:yt.a.form,children:Object(a.jsxs)("div",{className:yt.a.container,children:[Object(a.jsx)("div",{className:yt.a.title,children:"Team"}),Object(a.jsxs)("div",{className:yt.a["input-container"],children:[Object(a.jsx)("span",{children:" Name"}),Object(a.jsx)("input",{className:yt.a["input-name"],value:u,onChange:function(e){return d(e.target.value)},label:"Name",id:"name"})]}),Object(a.jsxs)("div",{className:yt.a["input-container-descr"],children:[Object(a.jsx)("span",{children:" Description"}),Object(a.jsx)("textarea",{className:yt.a["text-area-descr"],value:f,onChange:function(e){return O(e.target.value)},label:"Description",id:"description"})]}),$?Object(a.jsxs)("div",{className:yt.a["input-container-invite"],children:[Object(a.jsx)("span",{className:yt.a["text-invite"],children:" Invite Members"}),Object(a.jsxs)("div",{className:yt.a["invite-input"],children:[Object(a.jsx)("input",{className:yt.a["input-invite"],autoComplete:"off",value:k,onChange:xe,label:"Invite members",id:"members",placeholder:"username",onBlur:function(){setTimeout((function(){return G(!1)}),120)}}),Object(a.jsx)("div",{className:yt.a["select-for-invite"],children:Y?Object(a.jsx)("div",{className:yt.a.members,children:X.filter((function(e){return e.username.toLowerCase().includes(k.toLowerCase())&&!e.username.includes(pe.user.username)})).filter((function(e){return!I.find((function(t){return t.username===e.username}))})).filter((function(e){return!F.find((function(t){return t.username===e.username}))})).filter((function(e){return!R.find((function(t){return t.username===e.username}))})).sort((function(e,t){return e.username.localeCompare(t.username)})).map((function(e,t){return Object(a.jsx)(S,{className:yt.a.user,onClick:function(){return function(e){var t=Object(x.a)(R);t.push(e),U(t),G(!1),y("")}(e)},title:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:e.username}),Object(a.jsx)("div",{className:yt.a.email,children:e.email})]})},t)}))}):null})]})]}):null,$?Object(a.jsxs)("div",{className:yt.a["members-div"],children:[Object(a.jsx)("div",{className:yt.a["members-avatars"],children:Object(a.jsxs)("span",{children:[Object(a.jsx)("div",{children:"Send Invitation:"}),R.map((function(e,t){return Object(a.jsx)(H,{user:e,size:40,onClick:function(){re(!0),oe("remove this member"),je(e)}},t)}))]})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:yt.a.membersAvatars,children:[Object(a.jsx)("div",{children:"Team Members:"}),I.map((function(e,t){return Object(a.jsx)(H,{user:e,size:40,onClick:function(){re(!0),oe("delete this member from team"),je(e)}},t)}))]}),0!==F.length?Object(a.jsxs)("div",{className:yt.a.membersAvatars,children:[Object(a.jsx)("div",{children:"Invited Members:"}),F.map((function(e,t){return Object(a.jsx)(H,{user:e,size:40,onClick:function(){re(!0),oe("delete this member from invited"),je(e)}},t)}))]}):null]}),Object(a.jsxs)("div",{className:yt.a["button-div"],children:[Object(a.jsx)(W,{className:yt.a["create-button"],onClick:function(){return ge()},title:"Submit Changes"}),Object(a.jsx)(W,{className:yt.a["create-button"],title:"Delete Team",onClick:function(){re(!0),oe("delete this team"),je("")}})]})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(Tt,{members:I,invited:F}),Object(a.jsx)("div",{className:yt.a["leave-team-btn-div"],children:Object(a.jsx)(W,{title:"Leave Team",className:yt.a["leave-team-btn"],onClick:function(){re(!0),oe("leave this team"),je(pe.user)}})})]})]})})]})}var Dt=n(8),Pt=n.n(Dt);function Et(e){var t=e.message,n=e.setInbox,c=e.setInboxHistory,s=e.options,i=Object(r.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],m=Object(r.useState)({}),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(j.g)(),x=b("x-auth-token"),_=P(),N=Object(j.h)().userid;function k(e,t){return w.apply(this,arguments)}function w(){return(w=Object(g.a)(v.a.mark((function e(t,a){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/teams/invitations/".concat(t.team.id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:x},body:JSON.stringify({message:t,accepted:a})});case 2:if((r=e.sent).ok){e.next=8;break}return O.push("/error"),e.abrupt("return");case 8:return e.next=10,r.json();case 10:s=e.sent,_.emit("team-update",t.team.id),n(s.inbox),c(s.inboxHistory),_.emit("message-sent",N),_.emit("message-sent",t.sendFrom._id);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/inbox",{method:"POST",headers:{"Content-Type":"application/json",Authorization:x},body:JSON.stringify({message:t})});case 2:if((n=e.sent).ok){e.next=8;break}return O.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:_.emit("message-sent",N);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(g.a)(v.a.mark((function e(){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/teams/".concat(t.team.id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:x}});case 2:if((n=e.sent).ok){e.next=8;break}return O.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:a=e.sent,f(a);case 12:d(!0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:Pt.a.message,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsx)("div",{className:Pt.a.bold,children:t.subject}),Object(a.jsx)("div",{children:new Date(t.createdAt).toLocaleDateString("en-US",s)})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Team name:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.team.name})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Invited by:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.sendFrom.username})]}),t.team.isDeleted?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:Pt.a.bold,children:"Team deleted"}),Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return y.apply(this,arguments)},title:"Move to History"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return k(t,!0)},title:"Accept"}),Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return k(t,!1)},title:"Decline"}),Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return C.apply(this,arguments)},title:"View Team"})]}),u&&Object(a.jsx)(he,{hideForm:function(){return d(!1)},children:Object(a.jsx)(It,{currTeam:h,hideForm:function(){d(!1)}})})]})}function At(e){var t=e.message,n=e.options,c=e.setInboxHistory,s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(r.useState)({}),m=Object(l.a)(d,2),p=m[0],h=m[1],f=Object(j.g)(),O=b("x-auth-token"),x=Object(r.useState)(!1),_=Object(l.a)(x,2),N=_[0],k=_[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),C=y[0],S=y[1];function T(){return(T=Object(g.a)(v.a.mark((function e(){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/message/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:O}});case 2:if((n=e.sent).ok){e.next=8;break}return f.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:a=e.sent,c(a.inboxHistory);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(g.a)(v.a.mark((function e(){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/teams/".concat(t.team.id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:O}});case 2:if((n=e.sent).ok){e.next=8;break}return f.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:a=e.sent,h(a);case 12:u(!0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[N&&Object(a.jsx)(xt,{title:"delete this message",hideConfirm:function(){return k(!1)},onConfirm:function(){return function(){return T.apply(this,arguments)}(C)}}),Object(a.jsxs)("div",{className:Pt.a.message,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[void 0===t.accepted?Object(a.jsx)("div",{className:Pt.a.container,children:Object(a.jsx)("div",{className:Pt.a.bold,children:t.subject})}):Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsxs)("div",{className:Pt.a.bold,children:[t.subject,":"]}),t.accepted?Object(a.jsx)("div",{children:"Accepted"}):Object(a.jsx)("div",{children:"Declined"})]}),Object(a.jsx)("div",{children:new Date(t.createdAt).toLocaleDateString("en-US",n)})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Team name:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.team.name})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Invited by:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.sendFrom.username})]}),t.team.isDeleted&&Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Team deleted"}),Object(a.jsxs)("div",{children:[!t.team.isDeleted&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return I.apply(this,arguments)},title:"View Team"}),Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){k(!0),S(t)},title:"Delete Message"}),o&&Object(a.jsx)(he,{hideForm:function(){return u(!1)},children:Object(a.jsx)(It,{currTeam:p,hideForm:function(){u(!1)}})})]})]})]})}function Ft(e){var t=e.message,n=e.setInboxHistory,c=e.options,s=e.isInbox,i=Object(j.g)(),o=b("x-auth-token"),u=P(),d=Object(j.h)(),m=Object(r.useState)(!1),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],N=x[1],k=d.userid;function w(){return(w=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/inbox",{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify({message:t})});case 2:if((n=e.sent).ok){e.next=8;break}return i.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:u.emit("message-sent",k);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(g.a)(v.a.mark((function e(){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b("x-auth-token"),e.next=3,fetch("/api/user/message/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:a}});case 3:if((r=e.sent).ok){e.next=9;break}return i.push("/error"),e.abrupt("return");case 9:return e.next=11,r.json();case 11:c=e.sent,n(c.inboxHistory);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[h&&Object(a.jsx)(xt,{title:"delete this message",hideConfirm:function(){return f(!1)},onConfirm:function(){return function(){return y.apply(this,arguments)}(_)}}),Object(a.jsxs)("div",{className:Pt.a.message,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsxs)("div",{className:Pt.a.bold,children:[t.subject,":"]}),Object(a.jsxs)("span",{children:[t.sendFrom.username,t.accepted?Object(a.jsx)("span",{children:" accepted"}):Object(a.jsx)("span",{children:" declined"})]})]}),Object(a.jsx)("div",{children:new Date(t.createdAt).toLocaleDateString("en-US",c)})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Team name:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.team.name})]}),Object(a.jsxs)("div",{children:[s&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return w.apply(this,arguments)},title:"Move to History"}),!s&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){f(!0),N(t)},title:"Delete Message"})]})]})]})}function Lt(e){var t=e.message,n=e.setInboxHistory,c=e.options,s=e.isInbox,i=Object(j.g)(),o=b("x-auth-token"),u=P(),d=Object(j.h)(),m=Object(r.useState)(!1),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],N=x[1],k=d.userid;function w(){return(w=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/inbox",{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify({message:t})});case 2:if((n=e.sent).ok){e.next=8;break}return i.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:u.emit("message-sent",k);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(g.a)(v.a.mark((function e(){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b("x-auth-token"),e.next=3,fetch("/api/user/message/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:a}});case 3:if((r=e.sent).ok){e.next=9;break}return i.push("/error"),e.abrupt("return");case 9:return e.next=11,r.json();case 11:c=e.sent,n(c.inboxHistory);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[h&&Object(a.jsx)(xt,{title:"delete this message",hideConfirm:function(){return f(!1)},onConfirm:function(){return function(){return y.apply(this,arguments)}(_)}}),Object(a.jsxs)("div",{className:Pt.a.message,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsx)("div",{className:Pt.a.bold,children:t.subject}),Object(a.jsx)("div",{children:new Date(t.createdAt).toLocaleDateString("en-US",c)})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Project:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.project.name}),Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline," ").concat(Pt.a.margin),children:"List:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.list.name}),Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline," ").concat(Pt.a.margin),children:"Task:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.card.name})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Assigned by:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.sendFrom.username})]}),(t.team.isDeleted||t.project.isDeleted)&&Object(a.jsx)("div",{className:Pt.a.bold,children:"Project deleted"}),Object(a.jsxs)("div",{children:[!t.team.isDeleted&&!t.project.isDeleted&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return i.push("/project-board/".concat(t.team.id,"/").concat(t.project.id))},title:"Go to Project"}),s?Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return w.apply(this,arguments)},title:"Move to History"}):Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){f(!0),N(t)},title:"Delete Message"})]})]})]})}var zt=n(358),Mt=n.n(zt);function Rt(e){var t=e.message,n=e.setInboxHistory,c=e.options,s=e.isInbox,i=Object(j.g)(),o=b("x-auth-token"),u=P(),d=Object(j.h)(),m=Object(r.useState)(!1),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],N=x[1],k=d.userid;function w(){return(w=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/inbox",{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify({message:t})});case 2:if((n=e.sent).ok){e.next=8;break}return i.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:u.emit("message-sent",k);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(g.a)(v.a.mark((function e(){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b("x-auth-token"),e.next=3,fetch("/api/user/message/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:a}});case 3:if((r=e.sent).ok){e.next=9;break}return i.push("/error"),e.abrupt("return");case 9:return e.next=11,r.json();case 11:c=e.sent,n(c.inboxHistory);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[h&&Object(a.jsx)(xt,{title:"delete this message",hideConfirm:function(){return f(!1)},onConfirm:function(){return function(){return y.apply(this,arguments)}(_)}}),Object(a.jsxs)("div",{className:Pt.a.message,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsx)("div",{className:Pt.a.container,children:Object(a.jsxs)("div",{className:Pt.a.bold,children:["Team ",t.team.name," deleted"]})}),Object(a.jsx)("div",{children:new Date(t.createdAt).toLocaleDateString("en-US",c)})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Deleted by:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.sendFrom.username})]}),Object(a.jsxs)("div",{children:[s&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return w.apply(this,arguments)},title:"Move to History"}),!s&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){f(!0),N(t)},title:"Delete Message"})]})]})]})}function Ut(e){var t=e.message,n=e.setInboxHistory,c=e.options,s=e.isInbox,i=Object(j.g)(),o=b("x-auth-token"),u=P(),d=Object(j.h)().userid,m=Object(r.useState)(!1),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],N=x[1];function k(){return(k=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/inbox",{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify({message:t})});case 2:if((n=e.sent).ok){e.next=8;break}return i.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:u.emit("message-sent",d);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(g.a)(v.a.mark((function e(){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b("x-auth-token"),e.next=3,fetch("/api/user/message/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:a}});case 3:if((r=e.sent).ok){e.next=9;break}return i.push("/error"),e.abrupt("return");case 9:return e.next=11,r.json();case 11:c=e.sent,n(c.inboxHistory);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[h&&Object(a.jsx)(xt,{title:"delete this message",hideConfirm:function(){return f(!1)},onConfirm:function(){return function(){return w.apply(this,arguments)}(_)}}),Object(a.jsxs)("div",{className:Pt.a.message,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsx)("div",{className:Pt.a.container,children:Object(a.jsxs)("div",{className:Pt.a.bold,children:["Project ",t.project.name," deleted"]})}),Object(a.jsx)("div",{children:new Date(t.createdAt).toLocaleDateString("en-US",c)})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Deleted by:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.sendFrom.username})]}),Object(a.jsxs)("div",{children:[s&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return k.apply(this,arguments)},title:"Move to History"}),!s&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){f(!0),N(t)},title:"Delete Message"})]})]})]})}function Ht(e){var t=e.message,n=(e.setInbox,e.setInboxHistory),c=e.options,s=e.isInbox,i=Object(r.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],m=Object(r.useState)({}),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(j.g)(),x=b("x-auth-token"),_=P(),N=Object(j.h)(),k=Object(r.useState)(!1),w=Object(l.a)(k,2),y=w[0],C=w[1],S=Object(r.useState)(""),T=Object(l.a)(S,2),I=T[0],D=T[1],E=N.userid;function A(){return(A=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/inbox",{method:"POST",headers:{"Content-Type":"application/json",Authorization:x},body:JSON.stringify({message:t})});case 2:if((n=e.sent).ok){e.next=8;break}return O.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:_.emit("message-sent",E);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(g.a)(v.a.mark((function e(){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/teams/".concat(t.team.id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:x}});case 2:if((n=e.sent).ok){e.next=8;break}return O.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:a=e.sent,f(a);case 12:d(!0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(g.a)(v.a.mark((function e(){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/message/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:x}});case 2:if((a=e.sent).ok){e.next=8;break}return O.push("/error"),e.abrupt("return");case 8:return e.next=10,a.json();case 10:r=e.sent,n(r.inboxHistory);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[y&&Object(a.jsx)(xt,{title:"delete this message",hideConfirm:function(){return C(!1)},onConfirm:function(){return function(){return L.apply(this,arguments)}(I)}}),Object(a.jsxs)("div",{className:Pt.a.message,children:[Object(a.jsxs)("div",{className:Pt.a.container,children:[Object(a.jsx)("div",{className:Pt.a.bold,children:t.subject}),Object(a.jsx)("div",{children:new Date(t.createdAt).toLocaleDateString("en-US",c)})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Team name:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.team.name})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(Pt.a.bold," ").concat(Pt.a.inline),children:"Invited by:"}),Object(a.jsx)("div",{className:Pt.a.inline,children:t.sendFrom.username})]}),t.team.isDeleted&&Object(a.jsx)("div",{className:Pt.a.bold,children:"Team deleted"}),!t.team.isDeleted&&Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return F.apply(this,arguments)},title:"View Team"}),s?Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){return A.apply(this,arguments)},title:"Move to History"}):Object(a.jsx)(kt,{className:Pt.a.button,onClick:function(){C(!0),D(t)},title:"Delete Message"}),u&&Object(a.jsx)(he,{hideForm:function(){return d(!1)},children:Object(a.jsx)(It,{currTeam:h,hideForm:function(){d(!1)}})})]})]})}var Bt=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(j.g)(),m=P(),p=b("x-auth-token"),h={weekday:"short",year:"numeric",month:"short",day:"numeric"},f=Object(r.useCallback)(Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/inbox",{method:"GET",headers:{"Content-Type":"application/json",Authorization:p}});case 2:if((t=e.sent).ok){e.next=8;break}return d.push("/error"),e.abrupt("return");case 8:return e.next=10,t.json();case 10:n=e.sent,c(n.inbox),u(n.inboxHistory);case 13:case"end":return e.stop()}}),e)}))),[d,p]);Object(r.useEffect)((function(){f()}),[f]);var O=Object(r.useCallback)(function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t.inboxUser.inbox),u(t.inboxUser.inboxHistory);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){if(m)return m.on("message-sent",O),function(){return m.off("message-sent")}}),[m,O]),Object(a.jsxs)(ye,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(Te,{title:"Inbox"}),0===n.length&&Object(a.jsx)("div",{className:Mt.a.title,children:"Inbox is empty"}),Object(x.a)(n).reverse().map((function(e){switch(e.subject){case"Team invitation":return Object(a.jsx)(Et,{message:e,setInbox:c,setInboxHistory:u,options:h},e._id);case"Team invitation response":return Object(a.jsx)(Ft,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!0},e._id);case"Team invitation canceled":return Object(a.jsx)(Ht,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!0},e._id);case"Task assignment":return Object(a.jsx)(Lt,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!0},e._id);case"Team deleted":return Object(a.jsx)(Rt,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!0},e._id);case"Project deleted":return Object(a.jsx)(Ut,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!0},e._id)}return""}))]}),0!==o.length&&Object(a.jsxs)("div",{children:[Object(a.jsx)(Te,{title:"History"}),Object(x.a)(o).reverse().map((function(e){switch(e.subject){case"Team invitation":return Object(a.jsx)(At,{message:e,setInbox:c,setInboxHistory:u,options:h},e._id);case"Team invitation response":return Object(a.jsx)(Ft,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!1},e._id);case"Team invitation canceled":return Object(a.jsx)(Ht,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!1},e._id);case"Task assignment":return Object(a.jsx)(Lt,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!1},e._id);case"Team deleted":return Object(a.jsx)(Rt,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!1},e._id);case"Project deleted":return Object(a.jsx)(Ut,{message:e,setInbox:c,setInboxHistory:u,options:h,isInbox:!1},e._id)}return""}))]})]})},Jt=n(26),Wt=n.n(Jt),Yt=n.p+"static/media/my-tasks.a0bdac2a.svg",Gt=n.p+"static/media/pic6.68bb366f.svg",qt=n(52),Vt=n.n(qt),Xt=n(37),Zt=n.n(Xt),Kt=n.p+"static/media/pic1.06557b43.svg",Qt=n.p+"static/media/pic12.cb5bf992.svg",$t=n(20),en=n.n($t),tn=n.p+"static/media/pic10.b95e708c.svg",nn=n(131),an=n.n(nn);function rn(e){var t=e.members,n=e.deleteMemberOption,c=e.deleteMemberObj,s=b("x-auth-token"),i=Object(j.g)(),o=P(),u=Object(r.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1],h=Object(r.useState)(""),f=Object(l.a)(h,2),O=f[0],_=f[1];var N=function(){var e=c.project,t=c.teamId;o.emit("project-update",e),o.emit("task-team-update",t)},k=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,r,o,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.cardMembers,a=c.setCardMembers,r=c.cardId,o=c.listId,l=n.indexOf(t),u=Object(x.a)(n),-1!==l&&u.splice(l,1),e.next=9,fetch("/api/projects/lists/cards/".concat(o,"/").concat(r),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:s},body:JSON.stringify({members:u})});case 9:e.sent.ok?(N(),a(u)):i.push("/error");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[m&&Object(a.jsx)(xt,{title:"delete this member",hideConfirm:function(){return p(!1)},onConfirm:function(){return k(O)}}),Object(a.jsx)("div",{className:an.a.allCardMembers,children:t.map((function(e,t){return Object(a.jsxs)("div",{className:an.a.eachMember,onClick:function(){return function(e){n&&(p(!0),_(e))}(e)},children:[Object(a.jsx)("span",{className:an.a.avatar,children:Object(a.jsx)(H,{user:e,size:30,className:an.a.avatar})},e._id),Object(a.jsx)("span",{children:e.username})]},t)}))})]})}var cn=n(94),sn=n.n(cn),on=function(e){var t=e.members,n=e.maxLength,c=e.deleteMemberOption,s=e.deleteMemberObj,i=Object(r.useRef)(null),o=be(i),u=Object(l.a)(o,2),d=u[0],j=u[1];return n=Math.min(n,t.length),Object(a.jsxs)("div",{className:sn.a.members,onClick:function(){return j(!0)},ref:i,children:[d&&Object(a.jsx)(rn,{members:t,deleteMemberOption:c,deleteMemberObj:s}),t.length>n?Object(a.jsxs)(a.Fragment,{children:[t.slice(0,n-1).map((function(e){return Object(a.jsx)("span",{className:sn.a.avatar,children:Object(a.jsx)(H,{user:e,size:30,className:sn.a.avatar})},e._id)})),Object(a.jsx)("span",{className:sn.a.avatar,children:Object(a.jsx)(U.a,{color:"grey",name:["+"].concat(Object(x.a)("".concat(t.length-n+1).split(""))).join(" "),size:30,round:!0,maxInitials:3,className:sn.a.avatar})})]}):Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)("span",{className:sn.a.avatar,children:Object(a.jsx)(H,{user:e,size:30},e._id)},e._id)}))})]})};function ln(e){var t=e.card,n=e.listId,c=e.project,s=e.teamId,i=e.setCurrCard,o=Object(r.useRef)(null),u=Object(r.useState)(null),d=Object(l.a)(u,2),m=d[0],p=d[1],h=be(o),f=Object(l.a)(h,2),O=f[0],_=f[1],N=Object(r.useState)([]),k=Object(l.a)(N,2),w=k[0],y=k[1],C=Object(j.g)(),S=P(),T=b("x-auth-token");Object(r.useEffect)((function(){p(t.members)}),[t.members]);var I=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/teams/get-users/".concat(s),{method:"GET",headers:{"Content-Type":"application/json",Authorization:T}});case 2:return(t=e.sent).ok||C.push("/error"),e.next=6,t.json();case 6:for(c in n=e.sent,a=n.members,r=function(e){a=a.filter((function(t){return t._id!==m[e]._id}))},m)r(c);y(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(g.a)(v.a.mark((function e(a){var r,o,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("select"!==a){e.next=2;break}return e.abrupt("return");case 2:if(r=w.filter((function(e){return e._id===a}))[0],c.membersRoles.filter((function(e){return e.memberId._id===r._id}))[0]){e.next=11;break}if(window.confirm("Do you want to add ".concat(r.username," to project?"))){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,fetch("/api/projects/".concat(c._id,"/user"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:T},body:JSON.stringify({member:r,admin:!1})});case 9:e.sent.ok||C.push("/error");case 11:return(o=Object(x.a)(m)).push(r),e.next=15,fetch("/api/projects/lists/cards/".concat(n,"/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:T},body:JSON.stringify({members:o,newMember:r,teamId:s,projectId:c._id,cardId:t._id,listId:n})});case 15:if((l=e.sent).ok){e.next=20;break}C.push("/error"),e.next=29;break;case 20:return e.next=22,l.json();case 22:u=e.sent,i&&i(u),_(!O),p(o),S.emit("project-update",c),S.emit("task-team-update",s),S.emit("message-sent",r._id);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:en.a["small-buttons"],onClick:function(){I(),_(!O)},children:[Object(a.jsx)("img",{className:en.a.pics,src:tn,alt:"pic10"}),"Add Teammate"]}),O&&Object(a.jsx)("form",{ref:o,children:Object(a.jsxs)("select",{className:en.a.select,onChange:function(e){D(e.target.value)},children:[Object(a.jsx)("option",{value:"select",children:"Select"}),w.map((function(e){return Object(a.jsx)("option",{value:e._id,children:e.username},e._id)}))]})}),!O&&t.members.length>0&&Object(a.jsx)("div",{className:en.a.members,children:Object(a.jsx)(on,{members:t.members,maxLength:4,deleteMemberOption:!0,deleteMemberObj:{cardMembers:m,setCardMembers:p,cardId:t._id,listId:n,project:c,teamId:s}})})]})}var un=n(83),dn=n.n(un),jn=/%[aAbBdmwyY]/g,bn=["January","February","March","April","May","June","July","August","September","October","November","December"],mn=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],pn=864e5,hn={y:function(e){return e.getUTCFullYear().toString().slice(-2)},Y:function(e){return e.getUTCFullYear()},m:function(e){return"0".concat(e.getMonth()+1).slice(-2)},b:function(e){return bn[e.getMonth()].slice(0,3)},B:function(e){return bn[e.getMonth()]},d:function(e){return"0".concat(e.getDate()).slice(-2)},a:function(e){return mn[e.getDay()].slice(0,3)},A:function(e){return mn[e.getDay()]},w:function(e){return xn(e)}},fn=function(e,t){return new Date(e.getTime()+t*pn)},On=function(e){var t=(e=e||new Date).getDay()||7,n=new Date(e);return n.setDate(e.getDate()-(t-1)),n},xn=function(e){var t=fn(On(e),3),n=new Date(e.getFullYear(),0,4),a=fn(On(n),3);return 1+Math.round((t.getTime()-a.getTime())/6048e5)},_n=function(e,t){return t.replace(jn,(function(t){var n=t[1];return hn[n](e)}))},vn=function(e,t){return e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},gn=function(e,t){var n=e.getYear(),a=t.getYear();if(n!==a)return 1-2*(a>n);var r=e.getMonth(),c=t.getMonth();if(r!==c)return 1-2*(c>r);var s=e.getDate(),i=t.getDate();return s!==i?1-2*(i>s):0},Nn=n.p+"static/media/pic5.e6817eda.svg";function kn(e){var t=e.dueDate,n=e.card,c=e.listId,s=e.project,i=e.teamId,o=e.setCurrCard,u=Object(r.useState)(null),d=Object(l.a)(u,2),m=d[0],p=d[1],h=Object(r.useState)(null),f=Object(l.a)(h,2),O=f[0],x=f[1],_=Object(r.useState)(0),N=Object(l.a)(_,2),k=N[0],w=N[1],y=Object(j.g)(),C=P(),S=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate());Object(r.useEffect)((function(){return T(),window.addEventListener("resize",T),function(){return window.removeEventListener("resize",T)}}),[]);var T=function(){var e=window.innerWidth;w(e)};Object(r.useEffect)((function(){if(p(t),m){var e=m.getTime()?_n(m,"%d-%m-%Y"):"";x(e)}}),[t,m]);var I,D=Object(r.useCallback)((function(){C.emit("project-update",s),C.emit("task-team-update",i)}),[C,s,i]),E=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==m||""!==t){e.next=3;break}return console.log("return"),e.abrupt("return");case 3:return a=b("x-auth-token"),e.next=6,fetch("/api/projects/lists/cards/".concat(c,"/").concat(n._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({dueDate:t,teamId:i})});case 6:if((r=e.sent).ok){e.next=12;break}return y.push("/error"),e.abrupt("return");case 12:return e.next=14,r.json();case 14:s=e.sent,o&&o(s),D();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(dn.a,{customInput:Object(a.jsxs)("div",{className:en.a["small-buttons"],children:[Object(a.jsx)("img",{className:en.a.pics,src:Nn,alt:"pic5"}),"Due Date"]}),selected:O?m:S,onChange:function(e){p(e),E(e)},label:"Go to date",popperPlacement:(I=k,I>750?"bottom-end":"bottom-start")}),O&&Object(a.jsx)("div",{className:en.a.date,children:O})]})}function wn(e){var t=e.taskHistory,n=[];if(t)for(var r=0;r<t.length;r++){var c=t[r];if(r===t.length-1){n.push(c);break}c.event.slice(0,8)===t[r+1].event.slice(0,8)&&c.date===t[r+1].date||n.push(c)}function s(e){var t=new Date(e);return("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+t.getFullYear()}return Object(a.jsx)("div",{className:en.a.history,children:t?n.reverse().map((function(e,t){return Object(a.jsx)("div",{children:"".concat(s(e.date)," - ").concat(e.event)},t)})):null})}var yn=n.p+"static/media/pic2.da7b02c6.svg",Cn=n(249),Sn=n.n(Cn);function Tn(e){var t,n=e.progress;return Object(a.jsx)("div",{className:Sn.a.bar,children:Object(a.jsx)("div",{style:{width:"".concat(n,"%"),backgroundColor:(t=n,Number(t)<=20?"red":Number(t)<=40?"orange":Number(t)<=80?"blue":Number(t)>80?"green":void 0)},className:Sn.a.progress})})}function In(e){var t=e.card,n=e.listId,c=e.project,s=e.teamId,i=e.taskHistory,o=e.setTaskHistory,u=e.setCurrCard,d=b("x-auth-token"),m=Object(j.g)(),p=P(),h=Object(r.useRef)(null),f=Object(r.useState)(null),O=Object(l.a)(f,2),_=O[0],N=O[1],k=Object(r.useState)(null),w=Object(l.a)(k,2),y=w[0],C=w[1],S=Object(r.useState)(!0),T=Object(l.a)(S,2),I=T[0],D=T[1],E=be(h),A=Object(l.a)(E,2),F=A[0],L=A[1],z=Object(r.useState)(!1),M=Object(l.a)(z,2),R=M[0],U=M[1],H=Object(r.useMemo)((function(){return new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),[]);Object(r.useEffect)((function(){U(null!==t.progress),N(t.progress)}),[t.progress]);var B=function(){var e=Object(g.a)(v.a.mark((function e(){var a,r,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==_){e.next=4;break}return U(!1),L(!1),e.abrupt("return");case 4:if(y!==_&&I){e.next=8;break}return N(y),D(!0),e.abrupt("return");case 8:return(a=Object(x.a)(i)).push({event:"Progress ".concat(_,"%"),date:H}),o(a),e.next=13,fetch("/api/projects/lists/cards/".concat(n,"/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:d},body:JSON.stringify({progress:_,history:a})});case 13:if((r=e.sent).ok){e.next=18;break}m.push("/error"),e.next=24;break;case 18:return e.next=20,r.json();case 20:l=e.sent,u&&u(l),p.emit("project-update",c),p.emit("task-team-update",s);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function J(){U(!0),L(!0),C(_)}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:en.a["small-buttons"],onClick:J,children:[Object(a.jsx)("img",{className:en.a.pics,src:yn,alt:""}),"Progress"]}),Object(a.jsx)("div",{className:en.a["progress-bar"],children:null!==t.progress?Object(a.jsx)(Tn,{progress:t.progress}):null}),Object(a.jsx)("div",{className:en.a["progress-input-container"],children:R&&Object(a.jsx)(a.Fragment,{children:F?Object(a.jsxs)("span",{ref:h,children:[Object(a.jsx)("input",{ref:function(e){null!=e&&e.focus()},id:"progress",type:"number",min:"0",max:"100",className:"".concat(en.a["progress-input"]," ").concat(!I&&en.a["bad-input"]),value:_,onKeyDown:function(e){27===e.keyCode&&(N(y),L(!1),D(!0),null===_&&U(!1))},onKeyUp:function(){!_||Number(_)<0||Number(_)>100?D(!1):D(!0)},onChange:function(e){return N(e.target.value)},onBlur:B}),Object(a.jsx)("span",{children:"%"})]}):Object(a.jsxs)("div",{className:en.a.progress,onClick:J,children:[_,"%"]})})})]})}var Dn=n(132),Pn=n.n(Dn),En=n(95),An=n.n(En),Fn=n.p+"static/media/download.1cad53f3.svg",Ln=n.p+"static/media/remove.3a2c6cb2.svg";function zn(e){var t=e.attachments,n=e.listRef,c=e.card,s=e.project,i=e.teamId,o=e.setCurrCard,u=P(),d=Object(j.g)(),m=b("x-auth-token"),p=Object(r.useState)([]),h=Object(l.a)(p,2),f=h[0],O=h[1],x=Object(r.useState)(!1),_=Object(l.a)(x,2),N=_[0],k=_[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),C=y[0],T=y[1];Object(r.useEffect)((function(){O(t)}),[t]);function I(){return(I=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/projects/lists/cards/attachments/".concat(c._id,"/").concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:m}});case 2:if((n=e.sent).ok){e.next=8;break}return d.push("/error"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:a=e.sent,o&&o(a),O(a.attachments),u.emit("project-update",s),u.emit("task-team-update",i);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[N&&Object(a.jsx)(xt,{title:"remove this attachment",hideConfirm:function(){return k(!1)},onConfirm:function(){return function(e){return I.apply(this,arguments)}(C)}}),Object(a.jsxs)("div",{ref:n,className:An.a.container,children:[Object(a.jsx)("div",{className:An.a.title,children:"Task Attachments"}),f.map((function(e,t){return Object(a.jsxs)("div",{className:An.a.attachment,children:[Object(a.jsxs)("div",{className:An.a.name,children:[e.name,".",e.format]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{title:Object(a.jsx)("img",{className:An.a.button,src:Fn,alt:"Download"}),onClick:function(){return window.open(function(e){return"https://res.cloudinary.com/".concat("do7mce7ni","/raw/upload/fl_attachment/").concat(e.path)}(e),"_blank")}}),Object(a.jsx)(S,{title:Object(a.jsx)("img",{className:An.a.button,src:Ln,alt:"Remove"}),onClick:function(){k(!0),T(e)}})]})]},t)}))]})]})}function Mn(e){var t=e.att,n=e.attachments,c=e.card,s=e.project,i=e.teamId,o=e.setCurrCard,u=Object(r.useRef)(null),d=Object(r.useRef)(null),j=Object(r.useRef)(null),b=Object(r.useState)(!1),m=Object(l.a)(b,2),p=m[0],h=m[1],f=Object(r.useState)(null),O=Object(l.a)(f,2),x=O[0],_=O[1],v=be(j),g=Object(l.a)(v,2),N=g[0],k=g[1];return Object(r.useEffect)((function(){d.current&&_(window.getComputedStyle(d.current).getPropertyValue("width"))}),[p]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:Pn.a.attachment,ref:u,onMouseEnter:function(){setTimeout((function(){u.current&&("hidden"===window.getComputedStyle(u.current).getPropertyValue("border-top-style")&&h(!0))}),700)},onMouseLeave:function(){return h(!1)},onClick:function(){return k(!0)},children:[Object(a.jsx)("img",{src:Kt,alt:"",className:Pn.a["att-picture"]}),Object(a.jsx)("div",{className:Pn.a.format,children:t.format}),p&&Object(a.jsx)("div",{ref:d,className:Pn.a.name,style:{"--width":"".concat(x)},children:t.name})]}),N&&Object(a.jsx)(he,{hideForm:function(){return k(!1)},children:Object(a.jsx)(zn,{listRef:j,attachments:n,card:c,project:s,teamId:i,setCurrCard:o})})]})}function Rn(e){var t=e.card,n=e.project,c=e.teamId,s=e.setCurrCard,i=b("x-auth-token"),o=Object(j.g)(),u=P(),d=Object(r.useState)(null),m=Object(l.a)(d,2),p=m[0],h=m[1];return Object(r.useEffect)((function(){h(t.attachments)}),[t.attachments]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:en.a["small-buttons"],onClick:function(){window.cloudinary.createUploadWidget({cloudName:"do7mce7ni",uploadPreset:"uo9ubii7",resourceType:"raw"},function(){var e=Object(g.a)(v.a.mark((function e(a,r){var s,l,d,j,b,m,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("success"!==r.event){e.next=20;break}return s=r.info.path,l=r.info.original_filename,(d=r.info.format)||(d=s.split(".")[1]),j=r.info.public_id,b={path:s,name:l,format:d,publicId:j},e.next=9,fetch("/api/projects/lists/cards/attachments/".concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:i},body:JSON.stringify({attachment:b})});case 9:if((m=e.sent).ok){e.next=14;break}o.push("/error"),e.next=20;break;case 14:return e.next=16,m.json();case 16:p=e.sent,h(p.attachments),u.emit("project-update",n),u.emit("task-team-update",c);case 20:if(!a){e.next=22;break}return e.abrupt("return");case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).open()},children:[Object(a.jsx)("img",{className:en.a.pics,src:Gt,alt:"pic6"}),"Attach File"]}),p&&Object(a.jsx)("div",{className:en.a["att-container"],children:p.length<=4?p.map((function(e){return Object(a.jsx)(Mn,{att:e,attachments:p,card:t,project:n,teamId:c,setCurrCard:s},e._id)})):Object(a.jsxs)(a.Fragment,{children:[p.slice(0,3).map((function(e){return Object(a.jsx)(Mn,{att:e,attachments:p,card:t,project:n,teamId:c,setCurrCard:s},e._id)})),Object(a.jsxs)("div",{className:"".concat(en.a.remaining," ").concat(en.a.attachment),children:["+",p.length-3]})]})})]})}function Un(e){var t=e.listId,n=e.initialCard,c=e.project,s=e.teamId,i=e.hideForm,o=e.setCurrCard,u=Object(r.useRef)(null),d=Object(r.useRef)(null),m=Object(r.useState)(null),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],N=x[1],k=Object(r.useState)(""),w=Object(l.a)(k,2),y=w[0],C=w[1],S=Object(r.useState)(null),T=Object(l.a)(S,2),I=T[0],D=T[1],E=Object(j.g)(),A=P(),F=Object(r.useState)(null),L=Object(l.a)(F,2),z=L[0],M=L[1],R=Object(r.useState)(null),U=Object(l.a)(R,2),H=U[0],B=U[1],J=Object(r.useMemo)((function(){return new Date(n.dueDate)}),[n.dueDate]),W=b("x-auth-token"),Y=Object(r.useState)(!1),G=Object(l.a)(Y,2),q=G[0],V=G[1];Object(r.useEffect)((function(){f(n),N(n.name),C(n.description),D(n.history)}),[n]);var X=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/projects/lists/cards/".concat(t,"/").concat(h._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:W}});case 2:e.sent.ok?(A.emit("project-update",c),A.emit("task-team-update",s),i()):E.push("/error");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/projects/lists/cards/".concat(t,"/").concat(h._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:W},body:JSON.stringify({name:_,description:y})});case 2:e.sent.ok?(A.emit("project-update",c),A.emit("task-team-update",s)):E.push("/error");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function K(e,t,n){27===e.keyCode&&(t(H),setTimeout((function(){n.current.blur()}),1))}return Object(r.useEffect)((function(){setTimeout((function(){M(u.current.scrollHeight+2)}),1)}),[]),Object(a.jsxs)("div",{className:Zt.a.menu,children:[q&&Object(a.jsx)(xt,{title:"delete this task",hideConfirm:function(){return V(!1)},onConfirm:function(){return X()}}),Object(a.jsxs)("div",{className:Zt.a.container,children:[Object(a.jsxs)("div",{className:Zt.a["task-name"],children:[Object(a.jsx)("span",{children:Object(a.jsx)("img",{src:Kt,alt:"pic1"})}),Object(a.jsx)("textarea",{ref:u,className:"".concat(Zt.a["name-input"]," ").concat(Zt.a.text),style:{height:z},value:_,onFocus:function(){return B(_)},onKeyDown:function(e){return K(e,N,u)},onChange:function(e){N(e.target.value),M(u.current.scrollHeight+2)},onBlur:function(){H!==_&&Z()}})]}),Object(a.jsxs)("div",{className:Zt.a["task-body"],children:[Object(a.jsxs)("div",{className:Zt.a["left-side"],children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:Zt.a.text,children:"Description"}),Object(a.jsx)("textarea",{className:Zt.a["description-input"],ref:d,value:y,onFocus:function(){return B(y)},onKeyDown:function(e){return K(e,C,d)},onChange:function(e){return C(e.target.value)},onBlur:function(){H!==y&&Z()}})]}),Object(a.jsxs)("div",{className:Zt.a["task-component"],children:[Object(a.jsx)("div",{className:Zt.a.text,children:"History"}),Object(a.jsx)(wn,{taskHistory:I})]})]}),Object(a.jsx)("div",{className:Zt.a["right-side"],children:Object(a.jsxs)("div",{className:Zt.a["task-component"],children:[Object(a.jsx)("div",{className:Zt.a.text,children:"Manage"}),Object(a.jsx)(kn,{dueDate:J,card:n,listId:t,project:c,teamId:s,setCurrCard:o}),Object(a.jsx)(ln,{card:n,listId:t,project:c,teamId:s,setCurrCard:o}),Object(a.jsx)(In,{card:n,listId:t,project:c,teamId:s,taskHistory:I,setTaskHistory:D,setCurrCard:o}),Object(a.jsx)(Rn,{card:n,project:c,teamId:s,setCurrCard:o}),Object(a.jsxs)("button",{className:Zt.a["small-buttons"],onClick:function(){V(!0)},title:"Delete Task",children:[Object(a.jsx)("img",{className:Zt.a.pics,src:Qt,alt:"pic12"}),"Delete Task"]})]})})]})]})]})}function Hn(e){var t=e.currTeam,n=e.project,c=e.list,s=e.card,i=Object(r.useRef)(null),o=Object(r.useRef)(null),u=Object(r.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1],h=Object(r.useState)(!1),f=Object(l.a)(h,2),O=f[0],_=f[1],N=be(o),k=Object(l.a)(N,2),w=k[0],y=k[1],C=Object(r.useState)(""),T=Object(l.a)(C,2),I=T[0],D=T[1],E=Object(r.useState)(!0),A=Object(l.a)(E,2),F=A[0],L=A[1],z=Object(j.g)(),M=P(),R=Math.ceil((Date.parse(s.dueDate)-Date.now())/1e3/3600/24);function U(){return(U=Object(g.a)(v.a.mark((function e(){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(!1),F&&Number(I)!==s.progress){e.next=5;break}return D(s.progress+"%"),L(!0),e.abrupt("return");case 5:if(""!==I){e.next=10;break}if(null!==s.progress){e.next=9;break}return D("Add"),e.abrupt("return");case 9:D(s.progress+"%");case 10:return a=new Date(Date.now()),(r=Object(x.a)(s.history)).push({event:"Progress ".concat(I,"%"),date:a}),i=b("x-auth-token"),e.next=16,fetch("/api/projects/lists/cards/".concat(c._id,"/").concat(s._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:i},body:JSON.stringify({progress:I,history:r})});case 16:if(e.sent.ok){e.next=22;break}return z.push("/error"),e.abrupt("return");case 22:M.emit("project-update",n),M.emit("task-team-update",t._id);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){null!==s.progress?D(s.progress+"%"):D("Add")}),[D,s.progress]),Object(a.jsxs)("div",{className:Vt.a.card,children:[Object(a.jsx)("div",{className:Vt.a.task,children:s.name}),Object(a.jsx)("div",{className:Vt.a.progress,children:Object(a.jsx)("input",{ref:i,type:"text",className:"".concat(Vt.a.input," ").concat(!F&&Vt.a["bad-input"]," ").concat(!m&&Vt.a["no-border"]),autoComplete:"off",value:I,onFocus:function(){p(!0),D("Add"!==I?Number(I.slice(0,-1)):"")},onBlur:function(){return U.apply(this,arguments)},onKeyUp:function(){Number.isNaN(Number(I))||Number(I)<0||Number(I)>100?L(!1):L(!0)},onChange:function(e){return D(e.target.value)}})}),Object(a.jsx)("div",{className:Vt.a.days,children:100===s.progress?Object(a.jsx)("div",{children:"Done"}):0===Date.parse(s.dueDate)||null===s.dueDate?Object(a.jsx)("div",{children:"No Deadline"}):R<0?Object(a.jsx)("div",{className:Vt.a.deadline,children:"Deadline Passed"}):Object(a.jsx)("div",{children:R})}),Object(a.jsxs)("div",{className:Vt.a["buttons-container"],children:[s.attachments.length>0&&Object(a.jsx)(S,{className:Vt.a.button,onClick:function(){return y(!0)},title:Object(a.jsx)("img",{src:Gt,alt:"",width:"14"})}),Object(a.jsx)(S,{className:Vt.a.button,onClick:function(){return _(!0)},title:Object(a.jsx)("img",{src:ht,alt:"",width:"14"})})]}),w&&Object(a.jsx)(he,{hideForm:function(){return y(!1)},children:Object(a.jsx)(zn,{listRef:o,attachments:s.attachments,card:s,project:n,teamId:t._id})}),O&&Object(a.jsx)("div",{className:Vt.a.edit,children:Object(a.jsx)(he,{hideForm:function(){return _(!O)},children:Object(a.jsx)(Un,{hideForm:function(){return _(!O)},initialCard:s,listId:c._id,project:n,teamId:t._id})})})]},s._id)}var Bn=function(){var e=Object(r.useContext)(p),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)([]),u=Object(l.a)(i,2),d=u[0],m=u[1],h=Object(j.g)(),f=P(),x=Object(r.useCallback)(function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(t),n=b("x-auth-token"),e.next=4,fetch("/api/user/tasks/".concat(t._id),{method:"GET",headers:{"Content-Type":"application/json",Authorization:n}});case 4:if((a=e.sent).ok){e.next=9;break}h.push("/error"),e.next=13;break;case 9:return e.next=11,a.json();case 11:r=e.sent,m(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h]);function _(e){m(e)}return Object(r.useEffect)((function(){if(c&&null!=f){var e=c._id;return f.on("task-team-updated",_),f.on("task-update-team",(function(t){if(t===e){var n=Object(o.a)({},c);x(n)}})),f.emit("task-team-join",e),function(){f.off("task-team-updated"),f.off("task-update-team")}}}),[c,f,x]),Object(a.jsxs)(ye,{children:[Object(a.jsx)(Te,{title:"My Tasks"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:Wt.a.title,children:"Teams:"}),e.user.teams.map((function(e){return Object(a.jsx)(S,{title:e.name,onClick:function(){return x(e)},className:"".concat(Wt.a.teams," ").concat(c._id===e._id&&Wt.a.selected)},e._id)}))]}),c?Object(a.jsx)("div",{className:Wt.a.box,children:0===d.length?Object(a.jsx)("div",{className:Wt.a.title,children:"There is no current tasks"}):d.map((function(e){return Object(a.jsxs)("div",{className:Wt.a.project,children:[Object(a.jsx)("div",{className:Wt.a["project-name"],children:Object(a.jsxs)(O.b,{to:"/project-board/".concat(c._id,"/").concat(e._id),className:Wt.a.link,children:[Object(a.jsx)("span",{className:Wt.a.bold,children:"Project:"})," ",e.name]})}),Object(a.jsxs)("div",{className:"".concat(Wt.a.header," ").concat(Wt.a.raw),children:[Object(a.jsx)("div",{className:Wt.a.list,children:"List:"}),Object(a.jsxs)("div",{className:Wt.a.container,children:[Object(a.jsx)("div",{className:Wt.a.task,children:"Task:"}),Object(a.jsx)("div",{className:Wt.a.progress,children:"Progress (%):"}),Object(a.jsx)("div",{className:Wt.a.days,children:"Days Till End:"})]})]}),e.lists.map((function(t){return Object(a.jsxs)("div",{className:Wt.a.raw,children:[Object(a.jsx)("div",{className:Wt.a.list,children:t.name}),Object(a.jsx)("div",{className:Wt.a["task-container"],children:t.cards.map((function(n){return Object(a.jsx)(Hn,{currTeam:c,project:e,list:t,card:n},n._id)}))})]},t._id)}))]},e._id)}))}):Object(a.jsx)("div",{className:Wt.a.title,children:"Select a team"}),(!c||0===d.length)&&Object(a.jsx)("div",{className:Wt.a.pic,children:Object(a.jsx)("img",{src:Yt,alt:""})})]})},Jn=function(){return Object(a.jsx)(ye,{children:Object(a.jsx)("h3",{children:"Error Page"})})},Wn=n(176),Yn=n(55),Gn=n.n(Yn),qn=n(34),Vn=n.n(qn),Xn=n(50);function Zn(e){var t=P(),n=e.members,c=Object(r.useState)([]),s=Object(l.a)(c,2),i=s[0],u=s[1],d=Object(r.useState)(""),m=Object(l.a)(d,2),h=m[0],f=m[1],O=Object(r.useContext)(p),x=Object(r.useContext)(w),_=Object(r.useRef)(null),N=be(_),k=Object(l.a)(N,2),y=k[0],C=k[1],S=e.admin,T=Object(j.g)(),I=e.project._id,D=Object(j.h)(),E=Object(r.useState)(!1),A=Object(l.a)(E,2),F=A[0],L=A[1],z=Object(r.useState)(""),M=Object(l.a)(z,2),R=M[0],U=M[1],B=Object(r.useState)(""),J=Object(l.a)(B,2),W=J[0],Y=J[1],G=Object(r.useCallback)((function(){t.emit("project-update",e.project),t.emit("team-update",D.teamid)}),[t,e.project,D.teamid]),q=function(){var e=Object(g.a)(v.a.mark((function e(){var t,a,r,c,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",x.teams.map((function(e){return e.projects.map((function(n){return n._id===I&&(t=e._id),t}))})),a=b("x-auth-token"),e.next=5,fetch("/api/teams/get-users/".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:a}});case 5:return(r=e.sent).ok||T.push("/error"),e.next=9,r.json();case 9:c=e.sent,s=c.members,i=s.filter((function(e){return!n.find((function(t){return t.memberId.username===e.username}))})),u(i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function V(){return(V=Object(g.a)(v.a.mark((function e(t){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=3;break}return console.log("no destination"),e.abrupt("return");case 3:if(a=t.draggableId,n.filter((function(e){return e._id===a}))[0].memberId._id!==O.user.id){e.next=8;break}return console.log("can`t move self"),e.abrupt("return");case 8:if(r=n.filter((function(e){return e._id===a}))[0].admin,"admins"!==t.destination.droppableId||!r){e.next=11;break}return e.abrupt("return");case 11:if("members"!==t.destination.droppableId||r){e.next=13;break}return e.abrupt("return");case 13:return c=b("x-auth-token"),e.next=16,fetch("/api/projects/".concat(I,"/user-roles"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:c},body:JSON.stringify({userRole:a,isAdmin:!r})});case 16:e.sent.ok?G():T.push("/error");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(){var t=Object(g.a)(v.a.mark((function t(n){var a,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.project._id,n._id!==O.user.id){t.next=3;break}return t.abrupt("return");case 3:return r=n._id,c=b("x-auth-token"),t.next=7,fetch("/api/projects/".concat(a,"/user-remove"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:c},body:JSON.stringify({memberId:r})});case 7:t.sent.ok?G():T.push("/error");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),h){e.next=4;break}return C(!y),e.abrupt("return");case 4:return n=b("x-auth-token"),a=h,e.next=8,fetch("/api/projects/".concat(I,"/user"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({member:a,admin:!1})});case 8:e.sent.ok?(G(),C(!y),f("")):T.push("/error");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K={"delete this member":X};return Object(a.jsxs)("div",{className:Vn.a.container,children:[F&&Object(a.jsx)(xt,{title:R,hideConfirm:function(){return L(!1)},onConfirm:function(){return K[R](W)}}),Object(a.jsx)("div",{className:Vn.a["big-container"],children:S?Object(a.jsx)("span",{children:y?Object(a.jsx)("div",{className:Vn.a.members,ref:_,children:i.length>0?Object(a.jsxs)("div",{children:["Add Member to Project",Object(a.jsxs)("div",{children:[Object(a.jsxs)("select",{className:Vn.a["member-select"],onChange:function(e){!function(e){var t=i.filter((function(t){return t._id===e}))[0];f(t)}(e.target.value)},children:[Object(a.jsx)("option",{children:"Select user"}),i.map((function(e){return Object(a.jsx)("option",{value:e._id,children:e.username},e._id)}))]}),Object(a.jsx)("span",{className:Vn.a["add-button"],onClick:Z,children:"Add"})]})]}):Object(a.jsx)("div",{children:"There are no more members in your team"})}):Object(a.jsxs)(Xn.a,{onDragEnd:function(e){return V.apply(this,arguments)},children:[Object(a.jsxs)("div",{className:Vn.a["admins-container"],children:[Object(a.jsx)("span",{className:Vn.a.title,children:"Admins:"}),Object(a.jsx)(Xn.c,{droppableId:"admins",children:function(e){return Object(a.jsxs)("div",Object(o.a)(Object(o.a)({className:Vn.a.droppable,ref:e.innerRef},e.droppableProps),{},{children:[n.filter((function(e){return!0===e.admin})).map((function(e,t){return Object(a.jsx)(Xn.b,{draggableId:e._id,index:t,children:function(t){return Object(a.jsxs)("span",Object(o.a)(Object(o.a)(Object(o.a)({},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,children:[Object(a.jsx)(H,{user:e.memberId,size:40}),t.placeholder]}))}},e.memberId._id)})),e.placeholder]}))}})]}),Object(a.jsxs)("div",{className:Vn.a["members-container"],children:[Object(a.jsx)("span",{className:Vn.a.title,children:"Members:"}),Object(a.jsx)(Xn.c,{droppableId:"members",children:function(e){return Object(a.jsxs)("div",Object(o.a)(Object(o.a)({className:Vn.a["droppable-members"],ref:e.innerRef},e.droppableProps),{},{children:[n.filter((function(e){return!0!==e.admin})).map((function(e,t){return Object(a.jsx)(Xn.b,{draggableId:e._id,index:t,children:function(n){return Object(a.jsxs)("span",Object(o.a)(Object(o.a)(Object(o.a)({},n.dragHandleProps),n.draggableProps),{},{ref:n.innerRef,children:[Object(a.jsx)(H,{user:e.memberId,size:40,round:!0,onClick:function(){L(!0),U("delete this member"),Y(e.memberId)}},t),n.placeholder]}))}},e.memberId._id)})),e.placeholder]}))}}),Object(a.jsx)("span",{className:Vn.a["add-button"],onClick:function(){C(!y),q()},children:"Add"})]})]})}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:Vn.a["admins-container"],children:[Object(a.jsx)("span",{className:Vn.a.title,children:"Admins:"}),Object(a.jsx)("div",{className:Vn.a.droppable,children:n.filter((function(e){return!0===e.admin})).map((function(e,t){return Object(a.jsx)("span",{children:Object(a.jsx)(H,{user:e.memberId,size:40})},t)}))})]}),Object(a.jsxs)("div",{className:Vn.a["admins-container"],children:[Object(a.jsx)("span",{className:Vn.a.title,children:"Members:"}),Object(a.jsx)("div",{className:Vn.a.droppable,children:n.filter((function(e){return!0!==e.admin})).map((function(e,t){return Object(a.jsxs)("span",{children:["                                                                                                ",Object(a.jsx)(H,{user:e.memberId,size:40})]},t)}))})]})]})})]})}var Kn=function(e,t){var n=t.find((function(t){return t.memberId._id===e}));return!!n&&n.admin};function Qn(e){var t=Object(r.useState)(e.project.name),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(e.project.description),o=Object(l.a)(i,2),u=o[0],d=o[1],m=e.project.membersRoles,h=Object(r.useState)(!1),f=Object(l.a)(h,2),O=f[0],x=f[1],_=Object(r.useState)(!1),N=Object(l.a)(_,2),k=N[0],w=N[1],y=Object(r.useContext)(p),C=Object(j.g)(),S=P(),T=Object(j.h)(),I=e.project._id,D=Object(r.useCallback)((function(){S.emit("project-update",e.project)}),[S,e.project]);function E(){return(E=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=b("x-auth-token"),t.next=4,fetch("/api/projects/".concat(I),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({name:c,description:u})});case 4:t.sent.ok?(D(),e.hideForm(),S.emit("team-update",T.teamid)):C.push("/error");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=Object(g.a)(v.a.mark((function t(){var n,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b("x-auth-token"),t.next=3,fetch("/api/projects/".concat(e.project._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:n}});case 3:t.sent.ok?(e.hideForm(),a={projectId:e.project._id,teamId:T.teamid},S.emit("project-deleted",a),C.push("/team/".concat(T.teamid))):C.push("/error");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){x(Kn(y.user.id,m))}),[m,y.user.id,e]),Object(a.jsxs)("div",{className:Gn.a.form,children:[k&&Object(a.jsx)(xt,{title:"delete this project",hideConfirm:function(){return w(!1)},onConfirm:function(){return function(){return A.apply(this,arguments)}()}}),Object(a.jsxs)("div",{className:Gn.a.container,children:[Object(a.jsx)("div",{className:Gn.a.title,children:"Project"}),Object(a.jsxs)("div",{className:Gn.a["input-container"],children:[Object(a.jsx)("span",{children:" Name"}),Object(a.jsx)("input",{className:Gn.a["input-pr-name"],value:c,onChange:function(e){return s(e.target.value)},label:"Name",id:"name"})]}),Object(a.jsxs)("div",{className:Gn.a["input-container-descr"],children:[Object(a.jsx)("span",{children:" Description"}),Object(a.jsx)("textarea",{className:Gn.a["text-area-descr"],value:u,onChange:function(e){return d(e.target.value)},label:"Description",id:"description",placeholder:"Project Description"})]}),Object(a.jsx)("div",{className:Gn.a["edit-members"],children:Object(a.jsx)(Zn,{admin:O,project:e.project,members:e.project.membersRoles})})]}),Object(a.jsx)("div",{children:O?Object(a.jsxs)("div",{className:Gn.a["buttons-div"],children:[Object(a.jsx)(W,{className:Gn.a["navigate-buttons"],title:"Edit",onClick:function(e){return E.apply(this,arguments)}}),Object(a.jsx)(W,{className:Gn.a["navigate-buttons"],title:"Delete Project",onClick:function(){w(!0)}})]}):null})]})}var $n=n(96),ea=n.n($n),ta=n(251),na=n.n(ta),aa=function(e){var t=e.card,n=e.project,c=e.teamId,s=Object(r.useRef)(null),i=be(s),o=Object(l.a)(i,2),u=o[0],d=o[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S,{className:"".concat(na.a.attachments," ").concat(na.a.button),onClick:function(){return d(!0)},title:Object(a.jsx)("img",{src:Gt,alt:"",width:"14px"})}),u&&Object(a.jsx)(he,{hideForm:function(){return d(!1)},children:Object(a.jsx)(zn,{listRef:s,attachments:t.attachments,card:t,project:n,teamId:c})})]})};function ra(e){var t=e.card,n=e.project,c=e.showCurrentCard,s=e.setCurrCard,i=Object(r.useRef)(null),o=be(i),u=Object(l.a)(o,2),d=u[0],b=u[1],m=Object(j.h)().teamid;return Object(a.jsxs)("div",{className:ea.a.card,children:[Object(a.jsxs)("div",{children:[t.progress&&0!==t.progress||t.members.length>0||t.attachments.length>0?Object(a.jsxs)("div",{className:ea.a.container,children:[t.progress?Object(a.jsx)("div",{className:ea.a.progress,children:Object(a.jsx)(Tn,{progress:t.progress})}):Object(a.jsx)("div",{}),Object(a.jsxs)("div",{className:ea.a.container,children:[t.attachments.length>0&&Object(a.jsx)(aa,{card:t,project:n,teamId:m}),Object(a.jsx)(on,{members:t.members,maxLength:2})]})]}):null,Object(a.jsx)("div",{className:ea.a["card-name"],children:t.name})]}),Object(a.jsx)(S,{className:ea.a.button,onClick:function(){c(),s(t)},title:Object(a.jsx)("img",{src:ht,alt:"",width:"11.5",height:"11.5"})}),d&&Object(a.jsx)(he,{hideForm:function(){return b(!1)},children:Object(a.jsx)(zn,{listRef:i,attachments:t.attachments,card:t,project:n,teamId:m})})]})}var ca=n(40),sa=n.n(ca),ia=n.p+"static/media/dots.d2d443b8.svg";function oa(e){var t=e.isAdmin,n=e.project,c=e.list,s=e.showEditList,i=e.showCurrentCard,u=e.setCurrCard,d=Object(r.useRef)(null),m=Object(r.useRef)(null),p=be(m),h=Object(l.a)(p,2),f=h[0],O=h[1],x=be(d),_=Object(l.a)(x,2),N=_[0],k=_[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),C=y[0],T=y[1],I=Object(r.useState)(!1),D=Object(l.a)(I,2),E=D[0],A=D[1],F=Object(j.g)(),L=P(),z=Object(j.h)().teamid,M=Object(r.useCallback)((function(){L.emit("project-update",n)}),[L,n]);function R(){return(R=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b("x-auth-token"),e.next=3,fetch("/api/projects/lists/".concat(n._id,"/").concat(c._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:t}});case 3:e.sent.ok?(M(),L.emit("task-team-update",z)):F.push("/error");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=Object(r.useCallback)(function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==C){e.next=3;break}return e.abrupt("return");case 3:return n=b("x-auth-token"),e.next=6,fetch("/api/projects/lists/cards/".concat(c._id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({name:C,description:"",dueDate:"",progress:"",members:[]})});case 6:if(e.sent.ok){e.next=12;break}return F.push("/error"),e.abrupt("return");case 12:O(!f),T(""),M();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[F,C,c._id,M,f,O]);return Object(a.jsxs)("div",{className:sa.a.list,children:[E&&Object(a.jsx)(xt,{title:"you wish to delete this list",hideConfirm:function(){return A(!1)},onConfirm:function(){return function(){return R.apply(this,arguments)}()}}),Object(a.jsxs)("div",{className:sa.a.row,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:sa.a.name,children:c.name}),Object(a.jsx)(se,{color:c.color||"#A6A48E",type:"list"})]}),t&&Object(a.jsx)(S,{className:sa.a.button,onClick:function(){return k(!N)},title:Object(a.jsx)("img",{className:sa.a.dots,src:ia,alt:"...",width:"20",height:"6"})})]}),Object(a.jsx)("div",{className:sa.a.relative,children:N&&Object(a.jsxs)("div",{ref:d,className:"".concat(sa.a.menu),children:[Object(a.jsx)(W,{onClick:function(){s(),k(!N)},title:"Edit",className:sa.a.edit}),Object(a.jsx)(W,{onClick:function(){return A(!0)},title:"Delete",className:sa.a.delete})]})}),Object(a.jsx)(Xn.c,{droppableId:c._id,type:"droppableSubItem",children:function(e){return Object(a.jsxs)("div",{className:sa.a.droppable,ref:e.innerRef,children:[c.cards.map((function(e,t){return Object(a.jsx)(Xn.b,{draggableId:e._id,index:t,children:function(t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",Object(o.a)(Object(o.a)(Object(o.a)({},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,children:Object(a.jsx)(ra,{card:e,project:n,showCurrentCard:i,setCurrCard:u})})),t.placeholder]})}},e._id)})),e.placeholder]})}}),Object(a.jsx)("div",{className:sa.a.flexend,children:f?Object(a.jsxs)("form",{ref:m,className:sa.a.container,children:[Object(a.jsx)("input",{autoFocus:!0,className:sa.a["task-input"],type:"text",value:C,onChange:function(e){return T(e.target.value)}}),Object(a.jsx)(S,{type:"submit",className:sa.a.addlist,onClick:U,title:"+ Add Task",project:n})]}):Object(a.jsx)(S,{className:sa.a["add-task"],onClick:function(){return O(!f)},title:"+ Add Task"})})]})}var la=n(84),ua=n.n(la),da=n.p+"static/media/pic.260e1407.svg",ja=n(46),ba=n.n(ja),ma=n(366);function pa(e){var t=Object(r.useRef)(null),n=Object(r.useState)(null),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(null),u=Object(l.a)(o,2),d=u[0],m=u[1],h=Object(r.useState)(e.list.name),f=Object(l.a)(h,2),O=f[0],x=f[1],_=Object(j.g)(),N=P(),k=Object(r.useRef)(null),w=be(k),y=Object(l.a)(w,2),C=y[0],T=y[1],I=Object(r.useState)(e.list.color||"#A6A48E"),D=Object(l.a)(I,2),E=D[0],A=D[1],F=Object(r.useState)(!1),L=Object(l.a)(F,2),z=L[0],M=L[1],R=e.project.membersRoles,U=Object(r.useContext)(p),H=e.project._id,B=e.list._id,J=Object(j.h)().teamid;function Y(e){return G.apply(this,arguments)}function G(){return(G=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=b("x-auth-token"),t.next=4,fetch("/api/projects/lists/".concat(H,"/").concat(B),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({name:O,color:E})});case 4:t.sent.ok?(N.emit("project-update",e.project),N.emit("task-team-update",J),e.hideForm()):_.push("/error");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(r.useEffect)((function(){M(Kn(U.user.id,R))}),[R,U.user.id]);return Object(r.useEffect)((function(){setTimeout((function(){i(t.current.scrollHeight+2)}),1)}),[]),Object(a.jsx)("div",{className:ba.a.form,children:Object(a.jsxs)("form",{className:ba.a.container,children:[Object(a.jsx)(Te,{className:ba.a.title,title:"Edit List"}),Object(a.jsxs)("div",{className:ba.a["input-container"],children:[Object(a.jsx)("span",{className:ba.a.name,children:" Name"}),Object(a.jsx)("textarea",{ref:t,className:"".concat(ba.a["name-input"]," ").concat(ba.a.text),style:{height:s},value:O,onFocus:function(){return m(O)},onKeyDown:function(e){return n=x,a=t,void(27===e.keyCode&&(n(d),setTimeout((function(){a.current.blur()}),1)));var n,a},onChange:function(e){x(e.target.value),i(t.current.scrollHeight+2)},onBlur:function(e){d!==O&&Y(e)}})]}),Object(a.jsxs)("div",{className:ba.a["change-color"],children:[Object(a.jsx)("span",{className:ba.a["color-title"],children:"Color"}),Object(a.jsx)("span",{className:ba.a["list-color"],children:Object(a.jsx)(S,{className:ba.a["color-button"],style:{background:"".concat(E)},onClick:function(){return T(!C)}})})]}),C&&Object(a.jsx)("div",{ref:k,children:Object(a.jsx)(ma.a,{className:ba.a["color-pick"],color:E,onChangeComplete:function(e){A(e.hex)}})}),Object(a.jsx)("div",{className:ba.a["edit-list-button"],children:z&&Object(a.jsx)(W,{onClick:function(e){return Y(e)},title:"Edit List"})})]})})}function ha(){var e=Object(j.h)(),t=Object(j.g)(),n=Object(r.useState)([]),c=Object(l.a)(n,2),s=c[0],i=c[1],u=Object(r.useState)(!1),h=Object(l.a)(u,2),f=h[0],O=h[1],_=Object(r.useState)(!1),N=Object(l.a)(_,2),k=N[0],w=N[1],y=Object(r.useState)(""),C=Object(l.a)(y,2),T=C[0],I=C[1],D=Object(r.useRef)(null),E=be(D),A=Object(l.a)(E,2),F=A[0],L=A[1],z=P(),M=Object(r.useContext)(ae),R=Object(r.useState)(!1),U=Object(l.a)(R,2),H=U[0],B=U[1],J=Object(r.useState)(""),Y=Object(l.a)(J,2),G=Y[0],q=Y[1],V=Object(r.useState)(""),X=Object(l.a)(V,2),Z=X[0],K=X[1],Q=Object(r.useState)(!1),$=Object(l.a)(Q,2),ee=$[0],te=$[1],ne=Object(r.useState)(!1),re=Object(l.a)(ne,2),ce=re[0],se=re[1],ie=Object(r.useContext)(p),oe=e.teamid,le=b("x-auth-token"),ue=Object(r.useCallback)((function(e){M.setProject(e);var t=[];e.membersRoles.map((function(e){return t.push({admin:e.admin,username:e.memberId.username})})),i(t),M.setLists(e.lists)}),[M]);Object(r.useEffect)((function(){var t=e.projectid;if(null!=z)return z.on("project-updated",ue),z.emit("project-join",t),function(){return z.off("project-updated")}}),[z,ue,e.projectid]),Object(r.useEffect)((function(){if(M.project&&M.project._id===e.projectid&&!ce){var t=[];M.project.membersRoles.map((function(e){return t.push({admin:e.admin,username:e.memberId.username,id:e.memberId._id})})),i(t),M.setLists(M.project.lists);var n=t.find((function(e){return e.id===ie.user.id}));n&&te(n.admin)}}),[M.project,e.projectid,M,ie.user.id,ce]);var de=Object(r.useCallback)(Object(g.a)(v.a.mark((function n(){var a,r,c,s,i,l,u;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=ie.user.id,r=Object(o.a)({},ie.user),!((c=Object(x.a)(r.recentProjects)).length>2&&c[2]._id===e.projectid)){n.next=5;break}return n.abrupt("return");case 5:return(s=c.filter((function(t){return t._id!==e.projectid}))).push({_id:e.projectid,name:M.project.name}),s.length>3&&s.shift(),n.next=10,fetch("/api/user/recentProjects/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:le},body:JSON.stringify({recentProjects:s})});case 10:if((i=n.sent).ok){n.next=15;break}t.push("/error"),n.next=20;break;case 15:return n.next=17,i.json();case 17:l=n.sent,u=m(l),ie.logIn(u);case 20:case"end":return n.stop()}}),n)}))),[ie,t,e.projectid,M.project,le]);if(Object(r.useEffect)((function(){M.project&&M.project._id===e.projectid&&de()}),[e.projectid,M.project,de]),!M.project||M.project._id!==e.projectid)return Object(a.jsx)(ye,{children:Object(a.jsx)(d.a,{type:"TailSpin",color:"#363338",height:100,width:100,timeout:3e3})});function je(){return(je=Object(g.a)(v.a.mark((function e(n){var a,r,c,s,i,o,u,d,j,b,m,p,h,f,O,_,g,N,k,w,y,C;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.destination){e.next=2;break}return e.abrupt("return");case 2:if(se(!0),"droppableItem"!==n.type){e.next=23;break}return a=n.destination.index,r=M.lists.filter((function(e){return!M.hiddenLists.includes(e._id)})),c=r[a-1],a=M.lists.indexOf(c)+1,s=Object(x.a)(M.lists),i=s.splice(n.source.index,1),o=Object(l.a)(i,1),u=o[0],s.splice(n.destination.index,0,u),M.setLists(s),e.next=14,fetch("/api/projects/lists/".concat(M.project._id,"/").concat(n.draggableId,"/dnd-update"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:le},body:JSON.stringify({position:a,element:"list"})});case 14:if((d=e.sent).ok){e.next=19;break}t.push("/error"),e.next=23;break;case 19:return e.next=21,d.json();case 21:j=e.sent,M.setProject(j);case 23:if("droppableSubItem"!==n.type){e.next=40;break}b=n.destination.index,m=n.source.index,p=n.source.droppableId,h=n.destination.droppableId,f=Object(x.a)(M.lists),O="",_="",g=Object(Wn.a)(f);try{for(g.s();!(N=g.n()).done;)(k=N.value)._id===p&&(O=f.indexOf(k)),k._id===h&&(_=f.indexOf(k))}catch(v){g.e(v)}finally{g.f()}return w=f[O].cards.splice(m,1),y=Object(l.a)(w,1),C=y[0],f[_].cards.splice(b,0,C),M.setLists(f),e.next=38,fetch("/api/projects/lists/".concat(M.project._id,"/").concat(n.draggableId,"/dnd-update"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:le},body:JSON.stringify({position:b,element:"card",source:p,destination:h})});case 38:e.sent.ok||t.push("/error");case 40:z.emit("project-update",M.project),z.emit("task-team-update",oe),se(!1);case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(){var e=Object(g.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==T){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("/api/projects/lists/".concat(M.project._id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:le},body:JSON.stringify({name:T})});case 5:if(e.sent.ok){e.next=11;break}return t.push("/error"),e.abrupt("return");case 11:L(!F),I(""),z.emit("project-update",M.project);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(ye,{children:Object(a.jsxs)("div",{style:{position:"absolute"},children:[H&&Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return B(!H)},children:Object(a.jsx)(Un,{hideForm:function(){return B(!H)},initialCard:G,listId:Z,project:M.project,teamId:oe,setCurrCard:q})})}),k&&Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return w(!k)},children:Object(a.jsx)(pa,{hideForm:function(){return w(!k)},list:Z,project:M.project})})}),Object(a.jsx)(Xn.a,{onDragEnd:function(e){return je.apply(this,arguments)},children:Object(a.jsx)(Xn.c,{droppableId:"droppable",direction:"horizontal",type:"droppableItem",children:function(e){return Object(a.jsxs)("div",{className:ua.a["container-droppable"],ref:e.innerRef,children:[M.lists.filter((function(e){return!M.hiddenLists.includes(e._id)})).map((function(e,t){return Object(a.jsx)(Xn.b,{draggableId:e._id,index:t,children:function(t){return Object(a.jsx)("div",Object(o.a)(Object(o.a)(Object(o.a)({},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,children:Object(a.jsx)(oa,{list:e,project:M.project,isAdmin:ee,showEditList:function(){K(e),w(!k)},showCurrentCard:function(){K(e._id),B(!H)},setCurrCard:q})}))}},e._id)})),e.placeholder,ee&&Object(a.jsx)("div",{className:ua.a.list,children:F?Object(a.jsxs)("form",{ref:D,className:ua.a.container,children:[Object(a.jsx)("input",{autoFocus:!0,className:ua.a.input,type:"text",value:T,onChange:function(e){return I(e.target.value)}}),Object(a.jsx)(S,{type:"submit",className:ua.a.addlist,onClick:me,title:"+ Add List"})]}):Object(a.jsx)(S,{className:ua.a.addlist,onClick:function(){return L(!F)},title:"+ Add List"})})]})}})}),Object(a.jsx)(W,{title:"View Project",onClick:function(){return O(!f)}}),f&&Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return O(!f)},children:Object(a.jsx)(Qn,{hideForm:function(){return O(!f)},project:M.project,members:s})})}),Object(a.jsx)("img",{className:ua.a.pic,src:da,alt:"",width:"373",height:"312"})]})})}var fa=n(253),Oa=n.n(fa),xa=n(70),_a=n.n(xa),va=n(367),ga=(n(654),n(19)),Na=n.n(ga);function ka(e){var t=e.card,n=e.listId,c=e.project,s=Object(r.useRef)(null),i=be(s),o=Object(l.a)(i,2),u=o[0],d=o[1],m=Object(r.useState)(t.name),p=Object(l.a)(m,2),h=p[0],f=p[1],O=Object(j.g)(),x=P(),_=Object(j.h)().teamid,N=Object(r.useCallback)(function(){var e=Object(g.a)(v.a.mark((function e(a){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r=t._id,""!==h){e.next=5;break}return console.log("return"),e.abrupt("return");case 5:return s=b("x-auth-token"),e.next=8,fetch("/api/projects/lists/cards/".concat(n,"/").concat(r),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:s},body:JSON.stringify({name:h})});case 8:if(e.sent.ok){e.next=14;break}return O.push("/error"),e.abrupt("return");case 14:d(!u),x.emit("project-update",c),x.emit("task-team-update",_);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,h,u,d,t._id,n,c,x,_]);return Object(a.jsx)("div",{children:u?Object(a.jsx)("div",{ref:s,className:Na.a.nameContainer,onBlur:N,children:Object(a.jsx)("textarea",{className:Na.a.inputElementName,value:h,onChange:function(e){return f(e.target.value)},rows:2})}):Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:Na.a["attachments-container"],children:t.attachments&&t.attachments.length>0&&!u&&Object(a.jsx)(aa,{card:t,project:c,teamId:_})}),Object(a.jsx)("div",{className:Na.a.tableText,onClick:function(){return d(!u)},children:h})]})})}function wa(e){var t=Object(r.useMemo)((function(){return new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))}),[]),n=e.card,c=Object(r.useState)(n.history),s=Object(l.a)(c,2),i=s[0],o=s[1],u="",d=e.value.split("/");d.length>1&&(u=d[0]);var m=Object(r.useRef)(null),p=be(m),h=Object(l.a)(p,2),f=h[0],O=h[1],_=Object(r.useState)(u),N=Object(l.a)(_,2),k=N[0],w=N[1],y=Object(j.g)(),C=P(),S=Object(j.h)().teamid,T=Object(r.useCallback)(function(){var a=Object(g.a)(v.a.mark((function a(r){var c,s,l,u,d,j;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),c=n._id,s=e.listId,k){a.next=5;break}return a.abrupt("return");case 5:if(l=Number(k),u=Math.max(Math.min(l,100),0),!isNaN(l)&&u!==k){a.next=9;break}return a.abrupt("return");case 9:return w(u),d=[].concat(Object(x.a)(i),[{event:"Progress ".concat(k,"%"),date:t}]),o(d),j=b("x-auth-token"),a.next=15,fetch("/api/projects/lists/cards/".concat(s,"/").concat(c),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:j},body:JSON.stringify({progress:k,history:d})});case 15:if(a.sent.ok){a.next=19;break}return y.push("/error"),a.abrupt("return");case 19:O(!f),C.emit("project-update",e.project),C.emit("task-team-update",S);case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[y,k,f,O,i,t,n._id,e.listId,e.project,C,S]);function I(e){var t="";switch(!0){case 100===e||"100"===e:t="#0E8D27";break;case e<20:t="#EF2D2D";break;case e<100:t="#5E9DDC"}return t}return Object(a.jsx)(a.Fragment,{children:f?Object(a.jsx)("div",{ref:m,className:Na.a.taskProgress,onBlur:T,children:Object(a.jsx)("input",{className:Na.a.taskProgressButtonInput,style:{backgroundColor:I(k)},type:"number",value:k,onChange:function(e){return w(e.target.value)},min:"0",max:"100",autoFocus:!0})}):Object(a.jsx)("div",{className:Na.a.taskProgress,onClick:function(){return O(!f)},children:function(e){return e&&"null"!==e?Object(a.jsxs)("div",{style:{backgroundColor:I(e),padding:"5px",border:"solid black 1px",borderRadius:"5px",minHeight:"2rem",width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:[" ",e," %"]}):Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"+ Add"})}(u)})})}function ya(e){var t=Object(r.useRef)(null),n=be(t),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(e.cardDueDate),u=Object(l.a)(o,2),d=u[0],m=u[1],p=Object(r.useState)(!1),h=Object(l.a)(p,2),f=h[0],O=h[1],x=Object(j.g)(),_=P(),N=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),k=Object(j.h)().teamid,w=Object(r.useCallback)(function(){var t=Object(g.a)(v.a.mark((function t(n){var a,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.cardId,r=e.listId,""!==d||""!==n){t.next=5;break}return console.log("return"),t.abrupt("return");case 5:return c=b("x-auth-token"),t.next=8,fetch("/api/projects/lists/cards/".concat(r,"/").concat(a),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:c},body:JSON.stringify({dueDate:n})});case 8:if(t.sent.ok){t.next=14;break}return x.push("/error"),t.abrupt("return");case 14:i(!s),_.emit("project-update",e.project),_.emit("task-team-update",e.teamId);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[x,d,i,s,e.cardId,e.listId,e.project,_,e.teamId]),y=e.value;return Object(a.jsxs)("span",{className:Na.a.dueDateField,children:[Object(a.jsx)(dn.a,{selected:y?d:N,customInput:y?Object(a.jsx)("div",{className:Na.a.dueDateFieldInput,children:Object(a.jsx)("span",{children:y})}):Object(a.jsx)("span",{children:"Select date"}),onChange:function(e){m(e),w(e)},label:"Go to date",onBlur:y?function(){return i(!s)}:null,popperPlacement:"bottom-end",closeOnScroll:function(e){return e.target===document.getElementsByClassName("rt-tbody")[0]}}),f?Object(a.jsx)("span",{children:Object(a.jsx)(he,{hideForm:function(){return O(!f)},children:Object(a.jsx)(Un,{hideForm:function(){return O(!f)},initialCard:e.card,listId:e.listId,project:e.project,teamId:k})})}):Object(a.jsx)("span",{children:Object(a.jsx)("img",{className:Na.a.pen,src:ht,alt:"...",width:"13",height:"13",onClick:function(){return O(!0)}})})]})}var Ca=function(e){var t=e.handleSubmit,n=e.handleInputRemove,c=e.elementName,s=e.setElementName,i=e.placeholder,o=Object(r.useRef)(null),u=Object(r.useState)(null),d=Object(l.a)(u,2),j=d[0],b=d[1];return Object(a.jsx)("textarea",{value:c,ref:o,placeholder:i,className:Na.a.inputElementName,style:{height:j,width:"100%"},onKeyDown:function(e){return 27===e.keyCode?n():13===e.keyCode?t():void 0},onChange:function(e){13!==e.keyCode&&(s(e.target.value),b(o.current.scrollHeight+2))},onBlur:t,autoFocus:!0})};function Sa(e){var t=e.listId,n=e.project,c=e.handleInputRemove,s=Object(r.useState)(""),i=Object(l.a)(s,2),o=i[0],u=i[1],d=P(),m=Object(j.g)(),p=function(){var e=Object(g.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",c());case 2:return a=b("x-auth-token"),e.next=5,fetch("/api/projects/lists/cards/".concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({name:o,progress:""})});case 5:if(e.sent.ok){e.next=9;break}return m.push("/error"),e.abrupt("return");case 9:d.emit("project-update",n),c();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(Ca,{elementName:o,setElementName:u,handleSubmit:p,handleInputRemove:c,placeholder:"Enter new task name:"})}function Ta(e){var t=e.project,n=e.handleInputRemove,c=Object(r.useState)(""),s=Object(l.a)(c,2),i=s[0],o=s[1],u=P(),d=Object(j.g)(),m=Object(r.useCallback)(Object(g.a)(v.a.mark((function e(){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t._id,i){e.next=3;break}return e.abrupt("return",n());case 3:return r=b("x-auth-token"),e.next=6,fetch("/api/projects/lists/".concat(a),{method:"POST",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify({name:i})});case 6:if(e.sent.ok){e.next=10;break}return d.push("/error"),e.abrupt("return");case 10:u.emit("project-update",t),n();case 12:case"end":return e.stop()}}),e)}))),[d,i,t._id]);return Object(a.jsx)(Ca,{elementName:i,setElementName:o,handleSubmit:m,handleInputRemove:n,placeholder:"Enter new list name:"})}var Ia="#0E8D27",Da="#EF2D2D",Pa="#EF2D2D",Ea="#0E8D27",Aa="#5E9DDC",Fa="#A2A7B0",La=function(e){var t=new Date,n=null,r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black",r={background:t,color:n,width:"100%",padding:"5px",border:"1px solid #363338",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center"};return Object(a.jsx)("div",{className:Na.a.daylyProgress,children:Object(a.jsx)("div",{style:r,children:e})})},c=function(a,c){if(!a)return"";0===c&&(n=JSON.parse(a));var s=n,i=s.date,o=s.history,u=s.progress,d=fn(e,c),j=o&&o.events[_n(d,"%d/%m/%y")],b=i?new Date(i):null,m=b&&gn(d,b)>0,p=gn(d,t)<0;if(j){var h=j.event.split(" "),f=Object(l.a)(h,2),O=f[0],x=f[1];if("Created"===O)return r(O,Ia);if("Progress"===O&&x&&"100%"===x)return r("Finished",Ea);if(p)return r(j.event,Fa);var _=m?Pa:Aa;return r(j.event,_)}var v=0===c,g=o&&o.hasEventsInWeek[_n(d,"%w/%y")];if(v&&u&&100===u&&g)return r("Finished",Ea);if(b){if(vn(d,b))return gn(t,b)>0?r("Delayed",Pa):r("Due Date",Da);if(gn(d,b)>0)return v&&gn(t,d)>0?r("Delayed",Pa):"";var N=o.finishedDate,k=o.startDate;return N=N&&new Date(N),k=k&&new Date(k),N&&gn(d,N)>0?"":v&&k&&gn(k,e)>0?"":r(v?"In Progress":"",p?Fa:Aa)}return""},s=function(n){var r=fn(e,n),c=vn(t,r)?"#CFE2EC":"",s=_n(r,"%d.%m"),i=_n(r,"%A");return Object(a.jsxs)("div",{style:{backgroundColor:c,color:"black"},children:[Object(a.jsx)("div",{style:{fontWeight:"600"},children:i}),Object(a.jsx)("div",{style:{fontSize:"80%"},children:s})]})},i=function(e){return Object(a.jsx)("div",{style:{whiteSpace:"normal",overflowWrap:"anywhere",textAlign:"left",height:"100%"},children:e})};return[{Header:function(){return Object(a.jsx)("div",{className:Na.a.header,children:"Task"})},accessor:"task",minWidth:350,Cell:function(e){var t=e.value;return i(t)},sortable:!0,resizable:!1},{Header:function(){return Object(a.jsx)("div",{className:Na.a.header,children:"Progress"})},accessor:"progress",minWidth:65,maxWidth:75,Cell:function(e){var t=e.value;return i(t)},sortable:!0,resizable:!1,sortMethod:function(){}},{Header:function(){return Object(a.jsx)("div",{className:Na.a.header,children:"Team"})},accessor:"assigned",minWidth:75,maxWidth:80,Cell:function(e){var t=e.value;return i(t)},getProps:function(e,t,n){return{style:{overflow:"visible"}}},sortable:!1,resizable:!1},{Header:s(0),accessor:"monday",minWidth:95,maxWidth:125,Cell:function(e){var t=e.value;return c(t,0)},sortable:!1,resizable:!1},{Header:s(1),accessor:"tuesday",minWidth:95,maxWidth:125,Cell:function(e){var t=e.value;return c(t,1)},sortable:!1,resizable:!1},{Header:s(2),accessor:"wednesday",minWidth:95,maxWidth:125,Cell:function(e){var t=e.value;return c(t,2)},sortable:!1,resizable:!1},{Header:s(3),accessor:"thursday",minWidth:95,maxWidth:125,Cell:function(e){var t=e.value;return c(t,3)},sortable:!1,resizable:!1},{Header:s(4),accessor:"friday",minWidth:95,maxWidth:125,Cell:function(e){var t=e.value;return c(t,4)},sortable:!1,resizable:!1},{Header:s(5),accessor:"saturday",minWidth:95,maxWidth:125,Cell:function(e){var t=e.value;return c(t,5)},sortable:!1,resizable:!1},{Header:s(6),accessor:"sunday",minWidth:95,maxWidth:125,Cell:function(e){var t=e.value;return c(t,6)},sortable:!1,resizable:!1},{Header:function(){return Object(a.jsx)("div",{className:Na.a.header,children:"Due Date"})},accessor:"dueDate",minWidth:100,maxWidth:130,sortable:!0,resizable:!1,sortMethod:function(){}}]},za=n(171),Ma=n(184),Ra=n.n(Ma),Ua=function(e){var t=e.children,n=e.isVisible,r=e.legendContent;return Object(a.jsxs)("fieldset",{className:Ra.a.container,children:[Object(a.jsx)("legend",{className:Ra.a["legend-wrapper"],children:n&&Object(a.jsx)("blockquote",{className:Ra.a.legend,children:r})}),t]})},Ha=n(77),Ba=n.n(Ha),Ja=function(e){var t=e.membersFilter,n=e.setMembersFilter,c=e.handleFilterClear,s=e.buttonStyle,i=Object(r.useRef)(null),o=be(i),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(r.useContext)(ae).project,m=Object(r.useMemo)((function(){return b.membersRoles.map((function(e){return{value:e.memberId._id,displayValue:e.memberId.username}}))}),[b.memberRoles]);return Object(a.jsx)(Ua,{legendContent:"Tasks assigned to:",isVisible:!!t,children:Object(a.jsxs)("div",{className:Ba.a.container,children:[Object(a.jsxs)("div",{className:Ba.a["btn-container"],children:[Object(a.jsx)(S,{className:d?"".concat(s," ").concat(t&&Ba.a["btn-partial"]," ").concat(Ba.a["btn-clicked"]):"".concat(s," ").concat(t&&Ba.a["btn-partial"]),onClick:function(){return j(!d)},title:t&&t.name||"Tasks Assigned To:"}),t&&Object(a.jsx)(S,{className:"".concat(s," ").concat(Ba.a["btn-clear"]),title:"X",onClick:function(){c(),j(!1)}})]}),d&&Object(a.jsx)("div",{className:Ba.a.options,ref:i,children:m.map((function(e){return Object(a.jsx)("div",{className:Ba.a.option,onClick:function(){return t=e.value,a=e.displayValue,n(t,a),void j(!1);var t,a},children:e.displayValue},e.value)}))})]})})},Wa=n(185),Ya=n.n(Wa),Ga=function(e){var t=e.dueBefore,n=e.buttonStyle,r=e.onChange,c=e.handleFilterClear;return Object(a.jsxs)(Ua,{legendContent:"Tasks due before:",isVisible:!!t,children:[Object(a.jsx)(dn.a,{selected:t,customInput:Object(a.jsx)("button",{className:t?"".concat(n," ").concat(Ya.a["filter-used"]):"".concat(n," ").concat(Ya.a["filter-blank"]),children:t?_n(t,"%d-%m-%Y"):"Due Before:"}),showWeekNumbers:!0,onChange:r}),t&&Object(a.jsx)("button",{className:"".concat(n," ").concat(Ya.a["filter-clear"]),onClick:c,children:"X"})]})},qa=n(134),Va=n.n(qa),Xa=function(e){var t=e.isActive,n=e.toggleStatus,r=e.label,c=e.containerStyle;return Object(a.jsxs)("div",{className:"".concat(Va.a.container," ").concat(c),children:[Object(a.jsx)("label",{children:r}),Object(a.jsx)("span",{className:"".concat(Va.a["switch-container"]," ").concat(t&&Va.a["container-active"]),onClick:n,children:Object(a.jsx)("span",{className:Va.a["state-circle"]})})]})},Za=n(85),Ka=n.n(Za),Qa=function(e){var t=e.buttonStyle,n=e.filters,c=e.toggleFilter,s=Object(r.useRef)(null),i=be(s),o=Object(l.a)(i,2),u=o[0],d=o[1];return Object(a.jsxs)("div",{class:Ka.a.container,children:[Object(a.jsx)(S,{title:"Filter By Progress:",className:t,onClick:function(){return d(!u)}}),u&&Object(a.jsxs)("div",{className:Ka.a.dropdown,ref:s,children:[Object(a.jsx)(Xa,{isActive:n.notStarted,label:"Not Started",toggleStatus:function(){return c("notStarted")},containerStyle:"".concat(Ka.a["progress-switch"]," ").concat(Ka.a["progress-switch-top"])}),Object(a.jsx)(Xa,{isActive:n.inProgress,label:"In Progress",toggleStatus:function(){return c("inProgress")},containerStyle:Ka.a["progress-switch"]}),Object(a.jsx)(Xa,{isActive:n.done,label:"Done",toggleStatus:function(){return c("done")},containerStyle:"".concat(Ka.a["progress-switch"]," ").concat(Ka.a["progress-switch-bottom"])})]})]})},$a=function(e){var t=e.filter,n=e.setFilter;return Object(a.jsxs)("div",{className:Na.a["filters-container"],children:[Object(a.jsx)(Qa,{buttonStyle:Na.a.filter,filters:t.progress,toggleFilter:function(e){var a=t.progress[[e]];n(Object(o.a)(Object(o.a)({},t),{},{progress:Object(o.a)(Object(o.a)({},t.progress),{},Object(za.a)({},e,!a))}))}}),Object(a.jsx)(Ja,{membersFilter:t.member,setMembersFilter:function(e,a){return n(Object(o.a)(Object(o.a)({},t),{},{member:{id:e,name:a}}))},handleFilterClear:function(){return n(Object(o.a)(Object(o.a)({},t),{},{member:null}))},buttonStyle:Na.a.filter}),Object(a.jsx)(Ga,{dueBefore:t.dueBefore,buttonStyle:Na.a.filter,onChange:function(e){return n(Object(o.a)(Object(o.a)({},t),{},{dueBefore:e}))},handleFilterClear:function(){return n(Object(o.a)(Object(o.a)({},t),{},{dueBefore:null}))}})]})},er=n(59),tr=n.n(er),nr=n.p+"static/media/previous-day.e04a7658.svg",ar=n.p+"static/media/next-day.2584bb08.svg",rr=function(e){var t=e.startDate,n=e.changeStartDate,r=e.setStartDate;return Object(a.jsxs)("div",{className:tr.a.container,children:[Object(a.jsx)(dn.a,{selected:t,customInput:Object(a.jsx)("button",{className:tr.a.navigateButtons,children:"Choose Week"}),showWeekNumbers:!0,onChange:function(e){return r(On(e))}}),Object(a.jsx)("button",{className:tr.a.navigateButtons,onClick:function(){return n(-7)},children:"Previous week"}),Object(a.jsxs)("div",{className:tr.a.picContainer,onClick:function(){return n(-1)},children:[Object(a.jsx)("img",{className:tr.a.buttonPreviousDay,src:nr,alt:"..."}),Object(a.jsx)("div",{className:tr.a.centeredText,children:"Previous day"})]}),Object(a.jsxs)("div",{className:tr.a.picContainer,onClick:function(){return n(1)},children:[Object(a.jsx)("img",{className:tr.a.buttonPreviousDay,src:ar,alt:"..."}),Object(a.jsx)("div",{className:tr.a.centeredText,children:"Next day"})]}),Object(a.jsx)("button",{className:tr.a.navigateButtons,onClick:function(){return n(7)},children:"Next week"})]})},cr=function(e,t){return e.name.localeCompare(t.name)},sr=function(e,t){var n=e.progress||0,a=t.progress||0;return n>a?1:n<a?-1:0},ir=function(e,t){var n=e.dueDate?new Date(e.dueDate):new Date("1970-01-01"),a=t.dueDate?new Date(t.dueDate):new Date("1970-01-01");return gn(n,a)},or=function(e){return{task:e.task||"",progress:e.progress||"",assigned:e.assigned||"",monday:e.monday||"",tuesday:e.tuesday||"",wednesday:e.wednesday||"",thursday:e.thursday||"",friday:e.friday||"",saturday:e.saturday||"",sunday:e.sunday||"",dueDate:e.dueDate||""}},lr=function(e){var t=e.project,n=Object(r.useContext)(ae),c=Object(r.useContext)(p),s=Object(j.h)(),i=Object(r.useState)(On()),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(r.useState)([]),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),_=x[0],v=x[1],g=Object(r.useState)(null),N=Object(l.a)(g,2),k=N[0],w=N[1],y=Object(r.useState)({columnName:null,isDescending:!1}),C=Object(l.a)(y,2),T=C[0],I=C[1],D=Object(r.useState)({progress:{notStarted:!0,inProgress:!0,done:!0},member:null,dueBefore:null,isUsed:!1}),P=Object(l.a)(D,2),E=P[0],A=P[1],F=Object(r.useCallback)((function(e){var t=n.project.membersRoles.find((function(e){return e.memberId._id===c.user.id}));t&&t.admin&&v(e),n.setLists(n.project.lists)}),[n,c.user.id]),L=Object(r.useCallback)((function(){var e=[],r=t.lists;n.setLists(r);var c=function(e,t){var n=null;switch(e){case"task":n=cr;break;case"progress":n=sr;break;case"dueDate":n=ir;break;default:return null}return function(e,a){var r=n(e,a);return t?-r:r}}(T.columnName,T.isDescending);r.forEach((function(r,i){if(!n.hiddenLists.includes(r._id)){e.push(or({task:Object(a.jsx)("div",{className:_a.a.listNameContainer,style:{background:r.color||"#A6A48E"},onClick:function(){return F(r)},children:Object(a.jsx)("span",{className:_a.a.listNameText,children:r.name})},i),dueDate:Object(a.jsx)("div",{onClick:function(){return w({newTask:r._id})},className:_a.a.addTask,children:"+ Add Task"})}));var o=r.cards.filter((function(e){return function(e,t){var n=!1;!t.progress.notStarted||0!==e.progress&&e.progress||(n=!0),t.progress.inProgress&&e.progress>0&&e.progress<100&&(n=!0),t.progress.done&&100===e.progress&&(n=!0);var a=!t.member||e.members.some((function(e){return e._id===t.member.id})),r=!t.dueBefore||e.dueDate&&gn(new Date(e.dueDate),t.dueBefore)<=0;return n&&a&&r}(e,E)}));T.columnName&&(o=o.sort(c)),o.forEach((function(n){var c=n.dueDate?new Date(n.dueDate):"",i={date:c,history:function(e){if(!e)return null;var t,n={events:{},hasEventsInWeek:{}},a=Object(Wn.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=new Date(r.date);"Created"===r.event&&(n.startDate=c),n.events[_n(c,"%d/%m/%y")]=r,n.hasEventsInWeek[_n(c,"%w/%y")]=!0}}catch(i){a.e(i)}finally{a.f()}var s=e[e.length-1];return s&&"Progress 100%"===s.event&&(n.finishedDate=new Date(s.date)),n}(n.history),progress:n.progress},o=JSON.stringify(i);e.push(or({task:Object(a.jsx)(ka,{card:n,listId:r._id,project:t}),progress:Object(a.jsx)(wa,{value:n.progress+"/"+n._id+"/"+r._id,listId:r._id,project:t,card:n}),assigned:Object(a.jsx)(on,{members:n.members,maxLength:2}),monday:o,tuesday:o,wednesday:o,thursday:o,friday:o,saturday:o,sunday:o,dueDate:Object(a.jsx)(ya,{value:c?_n(c,"%d-%m-%Y"):"",cardDueDate:c,cardId:n._id,listId:r._id,project:t,card:n,teamId:s.teamid})}))})),k&&k.newTask&&k.newTask===r._id&&e.push(or({task:Object(a.jsx)(Sa,{listId:r._id,project:t,handleInputRemove:function(){return w(null)}})}))}})),k&&k.newList&&e.push(or({task:Object(a.jsx)(Ta,{project:t,handleInputRemove:function(){return w(null)}})})),f(T.isDescending?e.reverse():e)}),[E,F,s.teamid,n,t,k,T.columnName,T.isDescending]);Object(r.useEffect)((function(){L()}),[E,t,n.hiddenLists,T,L]);return Object(a.jsxs)("div",{className:_a.a.pageContainer,children:[_&&Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return v("")},children:Object(a.jsx)(pa,{hideForm:function(){return v("")},list:_,project:t})})}),Object(a.jsxs)("div",{className:_a.a.buttoDiv,children:[Object(a.jsx)($a,{filter:E,setFilter:A}),Object(a.jsx)(rr,{startDate:u,setStartDate:d,changeStartDate:function(e){var t=fn(u,e);d(t)}}),Object(a.jsx)(S,{className:_a.a.addListButton,onClick:function(){return w({newList:!0})},title:"+ Add List"})]}),Object(a.jsx)("div",{children:Object(a.jsx)(va.a,{data:h,columns:La(u),defaultPageSize:10,pageSize:h.length,showPagination:!1,background:"white",className:"".concat(_a.a.reactTable," -highlight"),getTbodyProps:function(){return{className:_a.a.reactTableBody}},getTrGroupProps:function(){return{className:_a.a.reactTableTrGroup}},onSortedChange:function(e){var t=e[0],n=t.id,a=t.desc;I({columnName:n,isDescending:a})}})})]})};function ur(){var e=Object(j.h)(),t=P(),n=Object(r.useContext)(ae),c=Object(r.useCallback)((function(e){n.setProject(e)}),[n]);return Object(r.useEffect)((function(){var n=e.projectid;if(null!=t)return t.on("project-updated",c),t.emit("project-join",n),function(){return t.off("project-updated")}}),[t,c,e.projectid]),n.project&&n.project._id===e.projectid?Object(a.jsx)(ye,{contentStyle:{margin:"5.6rem 0.2rem 0 3.5rem",padding:0},children:Object(a.jsx)("div",{className:Oa.a.calendarPageContainer,children:Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:Oa.a["calendar-container"],children:Object(a.jsx)(lr,{project:n.project})})})})}):Object(a.jsx)(ye,{children:Object(a.jsx)(d.a,{type:"TailSpin",color:"#363338",height:100,width:100,timeout:3e3})})}var dr=function(e){var t=e.children,n=Object(r.useState)([]),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)([]),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(null),m=Object(l.a)(b,2),p=m[0],h=m[1],f=Object(r.useState)("Select"),O=Object(l.a)(f,2),x=O[0],_=O[1];return Object(a.jsx)(ae.Provider,{value:{lists:s,setLists:i,hiddenLists:d,setHiddenLists:j,project:p,setProject:h,projectName:x,setProjectName:_},children:t})};var jr=function(e){var t=e.children,n=Object(r.useState)([]),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)("Select"),u=Object(l.a)(o,2),d=u[0],j=u[1],h=Object(r.useState)([]),f=Object(l.a)(h,2),O=f[0],x=f[1],_=Object(r.useContext)(p),N=P();Object(r.useEffect)((function(){i(_.user.teams)}),[_.user.teams]);var k=Object(r.useCallback)(Object(g.a)(v.a.mark((function e(){var t,n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b("x-auth-token"),e.next=3,fetch("/api/teams",{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,i(a.teams),r=m(a),_.logIn(r);case 10:case"end":return e.stop()}}),e)}))),[_]);return Object(r.useEffect)((function(){if(null!=N)return N.on("team-updated",k),function(){return N.off("team-updated")}}),[N,k]),Object(a.jsx)(w.Provider,{value:{teams:s,setTeams:i,selectedTeam:d,setSelectedTeam:j,currentProjects:O,setCurrentProjects:x,getCurrentProjects:function(e){var t=s.find((function(t){return t._id===e}));t&&x(t.projects)},updateSelectedTeam:function(e){var t=s.find((function(t){return t._id===e}));t&&j(t.name)}},children:t})},br=n(86),mr=n.n(br),pr=n(78),hr=n.n(pr);function fr(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(j.h)();return Object(a.jsxs)("div",{children:[c?Object(a.jsx)("div",{children:Object(a.jsx)(he,{hideForm:function(){return s(!c)},children:Object(a.jsx)(Qn,{hideForm:function(){return s(!c)},project:e.project})})}):null,Object(a.jsxs)("div",{className:hr.a.container,children:[Object(a.jsxs)("div",{className:hr.a.leftSide,children:[Object(a.jsxs)(O.b,{to:"/project-board/".concat(i.teamid,"/").concat(e.project._id),className:hr.a.key,children:["Name: ",Object(a.jsx)("span",{className:hr.a.value,children:e.project.name})]}),Object(a.jsxs)("div",{className:hr.a.key,children:["Creator: ",Object(a.jsx)("span",{className:hr.a.value,children:e.project.author.username})]})]}),Object(a.jsx)("div",{className:hr.a.info,children:Object(a.jsx)(W,{className:hr.a["info-btn"],title:"Info",onClick:function(){return s(!c)}})})]})]})}var Or=n.p+"static/media/pic1.5bdefb31.svg",xr=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(r.useState)({}),b=Object(l.a)(d,2),m=b[0],h=b[1],f=Object(r.useState)([]),O=Object(l.a)(f,2),x=O[0],_=O[1],v=Object(r.useState)([]),g=Object(l.a)(v,2),N=g[0],k=g[1],w=Object(r.useState)([]),y=Object(l.a)(w,2),C=y[0],S=y[1],T=Object(j.h)(),I=Object(r.useContext)(p);return Object(r.useEffect)((function(){I.user.teams.forEach((function(e){e._id===T.teamid&&(h(e),_(e.projects),k(e.members),S(e.requests))}))}),[I,T]),Object(a.jsx)(ye,{children:Object(a.jsxs)("div",{className:mr.a.container,children:[n&&Object(a.jsx)(he,{hideForm:function(){return c(!1)},children:Object(a.jsx)(xe,{})}),o&&Object(a.jsx)(he,{hideForm:function(){return u(!1)},children:Object(a.jsx)(It,{currTeam:m,hideForm:function(){u(!1)}})}),Object(a.jsx)("div",{className:mr.a.pic1,children:Object(a.jsx)("img",{className:mr.a.picture,src:Or,alt:""})}),Object(a.jsx)("div",{className:mr.a["left-side"],children:Object(a.jsx)("div",{children:x.map((function(e,t){return Object(a.jsx)(fr,{index:t,project:e},e._id)}))})}),Object(a.jsx)("div",{className:mr.a["right-side"],children:Object(a.jsxs)("div",{className:mr.a["right-side-team"],children:[Object(a.jsx)(Tt,{members:N,invited:C}),Object(a.jsx)(W,{className:mr.a["new-project-button"],title:"View Team",onClick:function(){return u(!0)}}),Object(a.jsx)(W,{title:"New Project",onClick:function(){return c(!0)}})]})})]})})},_r=n(36),vr=n.n(_r),gr=function(){var e=Object(j.h)(),t=Object(j.g)(),n=Object(r.useState)(!0),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(!1),u=Object(l.a)(o,2),d=u[0],b=u[1],m=Object(r.useContext)(p),h=m.user.newPasswordConfirmed,f=Object(r.useCallback)(Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.token,"not-confirmed"!==e.token){t.next=3;break}return t.abrupt("return");case 3:if(!m.user.confirmed||!m.user.newPasswordConfirmed){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Xe("/api/user/confirmation","POST",{token:n},(function(e){m.logIn(e),i(!1),b(!0)}),(function(e){console.log("Error",e)}));case 7:case"end":return t.stop()}}),t)}))),[e.token,m]);return Object(r.useEffect)((function(){f()}),[f]),"not-confirmed"===e.token?Object(a.jsx)("div",{children:h?Object(a.jsxs)("div",{className:vr.a.container,children:[Object(a.jsx)("div",{className:vr.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"194",height:"142"})}),Object(a.jsx)("div",{className:vr.a.title,children:" Confirm your email address"}),Object(a.jsx)("div",{className:vr.a.text,children:"Please check your email to confirm your account"}),Object(a.jsx)("div",{className:vr.a.text,children:"Once confirmed, this email address will be uniquely associated with your Smart Manager  account."})]}):Object(a.jsxs)("div",{className:vr.a.container,children:[Object(a.jsx)("div",{className:vr.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"194",height:"142"})}),Object(a.jsx)("div",{className:vr.a.title,children:" Confirm your new password"}),Object(a.jsx)("div",{className:vr.a.text,children:"Please check your email to confirm your new password"}),Object(a.jsx)("div",{className:vr.a.text,children:"Once confirmed, your new password will be active for your Smart Manager  account."})]})}):Object(a.jsxs)("div",{children:[s&&Object(a.jsx)("div",{children:"Validating your email."}),!s&&d&&Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:vr.a.container,children:[Object(a.jsx)("div",{className:vr.a.logo,children:Object(a.jsx)("img",{src:K,alt:"logo",width:"194",height:"142"})}),Object(a.jsx)("div",{className:vr.a.title,children:" Thank you"}),Object(a.jsx)("div",{className:vr.a.text,children:"You can continue to Smart Manager now"}),Object(a.jsx)(kt,{title:"Proceed",className:vr.a["proceed-button"],onClick:function(){return t.push("/")}}),Object(a.jsx)("div",{className:vr.a.cheers,children:" Cheers,"}),Object(a.jsx)("div",{className:vr.a.team,children:"The Smart Manager Team"})]})})]})},Nr=function(){var e=Object(r.useContext)(p),t=e.user.loggedIn;return Object(a.jsx)(O.a,{children:Object(a.jsx)(E,{user:e.user,children:Object(a.jsx)(dr,{children:Object(a.jsx)(jr,{children:Object(a.jsx)(_t.CloudinaryContext,{cloudName:"do7mce7ni",children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{path:"/confirmation/:token",children:Object(a.jsx)(gr,{})}),(t&&!e.user.confirmed||t&&!e.user.newPasswordConfirmed)&&Object(a.jsx)(j.a,{to:"/confirmation/not-confirmed"}),Object(a.jsx)(j.b,{exact:!0,path:"/",children:t?Object(a.jsx)(Ee,{}):Object(a.jsx)(jt,{})}),Object(a.jsx)(j.b,{path:"/profile/:userid",children:t?Object(a.jsx)(vt,{}):Object(a.jsx)(j.a,{to:"/"})}),Object(a.jsx)(j.b,{path:"/inbox/:userid",children:t?Object(a.jsx)(Bt,{}):Object(a.jsx)(j.a,{to:"/"})}),Object(a.jsx)(j.b,{path:"/my-tasks/:userid",children:t?Object(a.jsx)(Bn,{}):Object(a.jsx)(j.a,{to:"/"})}),Object(a.jsx)(j.b,{path:"/project-board/:teamid/:projectid",children:t?Object(a.jsx)(ha,{}):Object(a.jsx)(j.a,{to:"/"})}),Object(a.jsx)(j.b,{path:"/project-list/:teamid/:projectid",children:t?Object(a.jsx)(ur,{}):Object(a.jsx)(j.a,{to:"/"})}),Object(a.jsx)(j.b,{path:"/team/:teamid",children:t?Object(a.jsx)(xr,{}):Object(a.jsx)(j.a,{to:"/"})}),Object(a.jsx)(j.b,{component:Jn})]})})})})})})};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(f,{children:Object(a.jsx)(Nr,{})})}),document.getElementById("root"))},70:function(e,t,n){e.exports={pageContainer:"calendar-table_pageContainer__2rJk8",columns:"calendar-table_columns__2r7c1",task:"calendar-table_task__1tz91",buttoDiv:"calendar-table_buttoDiv__AB2Qr",addTaskField:"calendar-table_addTaskField__3Yb0t",input:"calendar-table_input__214q3",addlist:"calendar-table_addlist__3I9s5",addTask:"calendar-table_addTask__T6HLg",daylyProgress:"calendar-table_daylyProgress__3j-CE",header:"calendar-table_header__1AROC",listNameContainer:"calendar-table_listNameContainer__1-WSQ",listNameColor:"calendar-table_listNameColor__2hEFD",listNameText:"calendar-table_listNameText__YPqg0",reactTable:"calendar-table_reactTable__3vx2L",reactTableBody:"calendar-table_reactTableBody__5ycqq",reactTableTrGroup:"calendar-table_reactTableTrGroup__196RR",addListButton:"calendar-table_addListButton__2wO7g"}},76:function(e,t,n){e.exports={"transparent-confirm":"confirmation-dialog_transparent-confirm__OWWYi",container:"confirmation-dialog_container__1zecx",content:"confirmation-dialog_content__2cu-I",logo:"confirmation-dialog_logo__28wb0",title:"confirmation-dialog_title__ePYJq",buttons:"confirmation-dialog_buttons__H0JMo",button:"confirmation-dialog_button__3-63i"}},77:function(e,t,n){e.exports={container:"filter-members_container__XNrP9",filter:"filter-members_filter__2z-EO",options:"filter-members_options__35nPG",option:"filter-members_option___b8vh","option-blank":"filter-members_option-blank__3ZSz_","btn-clicked":"filter-members_btn-clicked__1R62N","btn-partial":"filter-members_btn-partial__18SZI","btn-clear":"filter-members_btn-clear__1Z90F","btn-container":"filter-members_btn-container__1X7Mx"}},78:function(e,t,n){e.exports={container:"project_container__2Nl29",key:"project_key__2DKXD",value:"project_value__1hM7g",info:"project_info__16VKJ","info-btn":"project_info-btn__27yl6"}},8:function(e,t,n){e.exports={message:"inbox_message__2rJZ5",bold:"inbox_bold__dWoq7",container:"inbox_container__2TzHF",button:"inbox_button__1lhQJ",inline:"inbox_inline__2bJwy",margin:"inbox_margin__28-x8"}},84:function(e,t,n){e.exports={pic:"project-board_pic__3YRcb","container-droppable":"project-board_container-droppable__20aMa",list:"project-board_list__jeXIy",addlist:"project-board_addlist__-i_Vu",input:"project-board_input__ljKcM",container:"project-board_container__1yKm3",navigateButtons:"project-board_navigateButtons__2-7tX"}},85:function(e,t,n){e.exports={container:"filter-progress_container__2p9DD",dropdown:"filter-progress_dropdown__1nz79","progress-switch":"filter-progress_progress-switch__3yAu6","progress-switch-top":"filter-progress_progress-switch-top__1jez0","progress-switch-bottom":"filter-progress_progress-switch-bottom__3Lb7w"}},86:function(e,t,n){e.exports={"right-side":"team_right-side__ZnE1z","right-side-team":"team_right-side-team__3Zfil",container:"team_container__6u9Hq",pic1:"team_pic1__2NH3f","left-side":"team_left-side__3BmL8","new-project-button":"team_new-project-button__1xvQt",picture:"team_picture__3lgLz"}},94:function(e,t,n){e.exports={members:"members-list_members__3UTNX",avatar:"members-list_avatar__ZxnGc"}},95:function(e,t,n){e.exports={container:"attachmentList_container__3I7fF",attachment:"attachmentList_attachment__QQusp",title:"attachmentList_title__3E_EC",name:"attachmentList_name__3FRuS",button:"attachmentList_button__1j5ui"}},96:function(e,t,n){e.exports={card:"card_card__35DiC",container:"card_container__11kTq","card-name":"card_card-name__2TOpL",button:"card_button__Is0Nh",attachments:"card_attachments__3gUvc",progress:"card_progress__S2h6J"}}},[[655,1,2]]]);
//# sourceMappingURL=main.e48639e1.chunk.js.map